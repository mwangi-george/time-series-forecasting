<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.33">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="George N. Mwangi">
<meta name="dcterms.date" content="2026-01-27">
<meta name="description" content="A practical walkthrough for forecasting monthly sales using Modeltime, Tidymodels, and XGBoost in R.">

<title>Sales Forecasting with Machine Learning in R – George Mwangi</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-ea385d0e468b0dd5ea5bf0780b1290d9.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-dc871ed2b555fa4da091f2ac86594198.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<style>html{ scroll-behavior: smooth; }</style>
<style>

      .quarto-title-block .quarto-title-banner h1,
      .quarto-title-block .quarto-title-banner h2,
      .quarto-title-block .quarto-title-banner h3,
      .quarto-title-block .quarto-title-banner h4,
      .quarto-title-block .quarto-title-banner h5,
      .quarto-title-block .quarto-title-banner h6
      {
        color: white;
      }

      .quarto-title-block .quarto-title-banner {
        color: white;
background: #2456ED;
      }
</style>
<link href="../../site_libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">
<script src="../../site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<script src="../../site_libs/plotly-binding-4.11.0/plotly.js"></script>
<script src="../../site_libs/typedarray-0.1/typedarray.min.js"></script>
<script src="../../site_libs/jquery-3.5.1/jquery.min.js"></script>
<link href="../../site_libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet">
<script src="../../site_libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>
<link href="../../site_libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="../../site_libs/plotly-main-2.11.1/plotly-latest.min.js"></script>
<link href="../../site_libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet">
<script src="../../site_libs/pagedtable-1.1/js/pagedtable.js"></script>


</head>

<body class="nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">George Mwangi</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="https://github.com/mwangi-george"> <i class="bi bi-fa-github" role="img">
</i> 
<span class="menu-text">Github</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://www.linkedin.com/in/georgemwangikenya/"> <i class="bi bi-fa-twitter" role="img">
</i> 
<span class="menu-text">LinkedIn</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <div class="quarto-title-block"><div><h1 class="title">Sales Forecasting with Machine Learning in R</h1><button type="button" class="btn code-tools-button" id="quarto-code-tools-source"><i class="bi"></i> Code</button></div></div>
            <p class="subtitle lead">An end-to-end, practical workflow using Modeltime, Tidymodels, and XGBoost</p>
                  <div>
        <div class="description">
          A practical walkthrough for forecasting monthly sales using Modeltime, Tidymodels, and XGBoost in R.
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">Forecasting</div>
                <div class="quarto-category">Machine Learning</div>
                <div class="quarto-category">R</div>
                <div class="quarto-category">Time Series</div>
              </div>
                  </div>
  </div>
    
  <div class="quarto-title-meta-author">
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-heading">Affiliation</div>
    
      <div class="quarto-title-meta-contents">
      <p class="author"><a href="https://github.com/mwangi-george">George N. Mwangi</a> <a href="mailto:mwangigeorge648@gmail.com" class="quarto-title-author-email"><i class="bi bi-envelope"></i></a> </p>
    </div>
    <div class="quarto-title-meta-contents">
          <p class="affiliation">
              inSupply Health
            </p>
        </div>
    </div>

  <div class="quarto-title-meta">

        
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">January 27, 2026</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction"><span class="header-section-number">1</span> Introduction</a></li>
  <li><a href="#workspace-setup" id="toc-workspace-setup" class="nav-link" data-scroll-target="#workspace-setup"><span class="header-section-number">2</span> Workspace setup</a></li>
  <li><a href="#dataset-overview" id="toc-dataset-overview" class="nav-link" data-scroll-target="#dataset-overview"><span class="header-section-number">3</span> Dataset overview</a></li>
  <li><a href="#anomaly-detection" id="toc-anomaly-detection" class="nav-link" data-scroll-target="#anomaly-detection"><span class="header-section-number">4</span> Anomaly detection</a></li>
  <li><a href="#traintest-splitting-for-time-series" id="toc-traintest-splitting-for-time-series" class="nav-link" data-scroll-target="#traintest-splitting-for-time-series"><span class="header-section-number">5</span> Train–test splitting for time series</a></li>
  <li><a href="#feature-engineering-for-time-series-modeling" id="toc-feature-engineering-for-time-series-modeling" class="nav-link" data-scroll-target="#feature-engineering-for-time-series-modeling"><span class="header-section-number">6</span> Feature engineering for time series modeling</a></li>
  <li><a href="#model-specification" id="toc-model-specification" class="nav-link" data-scroll-target="#model-specification"><span class="header-section-number">7</span> Model Specification</a></li>
  <li><a href="#workflow-sets" id="toc-workflow-sets" class="nav-link" data-scroll-target="#workflow-sets"><span class="header-section-number">8</span> Workflow sets</a></li>
  <li><a href="#fitting-using-parallel-backend" id="toc-fitting-using-parallel-backend" class="nav-link" data-scroll-target="#fitting-using-parallel-backend"><span class="header-section-number">9</span> Fitting Using Parallel Backend</a></li>
  <li><a href="#accuracy-assessment" id="toc-accuracy-assessment" class="nav-link" data-scroll-target="#accuracy-assessment"><span class="header-section-number">10</span> Accuracy assessment</a></li>
  <li><a href="#forecast-assessment" id="toc-forecast-assessment" class="nav-link" data-scroll-target="#forecast-assessment"><span class="header-section-number">11</span> Forecast Assessment</a></li>
  <li><a href="#refit-to-full-dataset-forecast-forward" id="toc-refit-to-full-dataset-forecast-forward" class="nav-link" data-scroll-target="#refit-to-full-dataset-forecast-forward"><span class="header-section-number">12</span> Refit to Full Dataset &amp; Forecast Forward</a></li>
  <li><a href="#conclusion" id="toc-conclusion" class="nav-link" data-scroll-target="#conclusion"><span class="header-section-number">13</span> Conclusion</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<p><img src="img/cover.avif" class="img-fluid"></p>
<section id="introduction" class="level2" data-number="1">
<h2 data-number="1" class="anchored" data-anchor-id="introduction"><span class="header-section-number">1</span> Introduction</h2>
<p>Sales forecasting used to be a game of spreadsheets, gut feeling, and crossed fingers. Today, machine learning lets us move beyond guesswork and start making predictions that actually learn from data.</p>
<p>In this post, we’ll explore how to build practical sales forecasting models using <strong>R</strong>, a language loved for its statistical depth and elegant data tooling. Without drowning in theory, we’ll walk through how historical sales data can be transformed into forward-looking insights using modern machine learning techniques.</p>
<p>Whether you’re an analyst trying to improve forecast accuracy, a data scientist working in R, or a business professional curious about how machine learning really works under the hood, this guide will show you how to turn past sales into smarter decisions about the future.</p>
<hr>
</section>
<section id="workspace-setup" class="level2" data-number="2">
<h2 data-number="2" class="anchored" data-anchor-id="workspace-setup"><span class="header-section-number">2</span> Workspace setup</h2>
<p>To build our forecasting models, we’ll work entirely within the <strong>tidy modeling ecosystem in R</strong>, which emphasizes readable code, reproducibility, and modular workflows. We’ll rely on three core machine learning libraries—<strong><code>modeltime</code></strong>, <strong><code>tidymodels</code></strong>, and <strong><code>workflowsets</code></strong>—alongside two essential data and time-series packages: <code>dplyr</code> and <strong><code>timetk</code></strong>.</p>
<p>At the center of this workflow is the <a href="https://business-science.github.io/modeltime/articles/getting-started-with-modeltime.html" title="See documentation"><strong>Modeltime ecosystem</strong></a>, which extends <code>tidymodels</code> with first-class support for time series forecasting. Modeltime provides a unified interface for fitting, calibrating, comparing, and evaluating both classical statistical models and modern machine learning approaches (such as boosted trees and neural networks) using tidy data principles. By integrating seamlessly with <code>timetk</code>, it makes feature engineering for time-based data—lags, rolling statistics, and seasonal signatures—both intuitive and scalable.</p>
<p><code>tidymodels</code> gives us a consistent framework for preprocessing, model specification, and evaluation, while <code>workflowsets</code> allows us to experiment with multiple models and feature combinations in a structured and repeatable way. Together with <code>dplyr</code> for data manipulation and <code>timetk</code> for time-series visualization and feature engineering, this setup lets us move cleanly from raw historical sales data to production-ready forecasts.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Machine Learning</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidymodels)   <span class="co"># modeling framework</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(modeltime)    <span class="co"># time series forecasting workflows built on tidymodels</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(workflowsets) <span class="co"># manage and compare many model/preprocess workflows at once</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Core</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(timetk)       <span class="co"># time series plotting helpers, and feature engineering</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)        <span class="co"># core data manipulation</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Avoid scientific notation for large values (e.g., 250000 instead of 2.5e+05)</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">scipen =</span> <span class="dv">999</span>)</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------------------------------------------------------------------</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Enable parallel processing for model training</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------------------------------------------------------------------</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Detect available physical CPU cores (optional)</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>parallel<span class="sc">::</span><span class="fu">detectCores</span>(<span class="at">logical =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 8</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Start a parallel backend using 2 cores</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">parallel_start</span>(<span class="dv">2</span>, <span class="at">.method =</span> <span class="st">"parallel"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
</section>
<section id="dataset-overview" class="level2" data-number="3">
<h2 data-number="3" class="anchored" data-anchor-id="dataset-overview"><span class="header-section-number">3</span> Dataset overview</h2>
<p>The dataset used in this tutorial represents the <strong>historical monthly sales of a single product (Product Y)</strong> for a fictional company called <strong>Metricon</strong>. Each observation corresponds to the total sales recorded in a given month, making the data naturally suited for time series analysis and forecasting.</p>
<p>The dataset contains <strong>two columns</strong>:</p>
<ul>
<li><p><strong><code>date</code></strong> – the first day of each month, representing the sales period</p></li>
<li><p><strong><code>value</code></strong> – the total sales volume for Product Y in that month</p></li>
</ul>
<p>The data spans <strong>multiple consecutive years</strong>, providing enough history to observe long-term trends, seasonal patterns, and periods of growth or volatility. In the sections that follow, we’ll first explore the structure of the data by inspecting the first and last few records, then visualize the full time series to better understand its overall behavior before applying machine learning models for forecasting.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------------------------------------------------------------------</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Load and prepare the sales dataset</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------------------------------------------------------------------</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>raw_sales_df <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">"data/sales_timeseries_monthly.csv"</span>,</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>) <span class="sc">|&gt;</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">date =</span> lubridate<span class="sc">::</span><span class="fu">mdy</span>(date)  <span class="co"># Parse date column into Date type</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------------------------------------------------------------------</span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Quick data inspection</span></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------------------------------------------------------------------</span></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Preview the first 3 observations</span></span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>raw_sales_df <span class="sc">|&gt;</span></span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["date"],"name":[1],"type":["date"],"align":["right"]},{"label":["value"],"name":[2],"type":["int"],"align":["right"]}],"data":[{"1":"2018-01-01","2":"132001"},{"1":"2018-02-01","2":"103489"},{"1":"2018-03-01","2":"116015"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Preview the last 3 observations</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>raw_sales_df <span class="sc">|&gt;</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_tail</span>(<span class="at">n =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["date"],"name":[1],"type":["date"],"align":["right"]},{"label":["value"],"name":[2],"type":["int"],"align":["right"]}],"data":[{"1":"2023-11-01","2":"382464"},{"1":"2023-12-01","2":"321930"},{"1":"2024-01-01","2":"243165"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------------------------------------------------------------------</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualize historical sales trend</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------------------------------------------------------------------</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>raw_sales_df <span class="sc">|&gt;</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_time_series</span>(</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">.date_var =</span> date,</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">.value    =</span> value,</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">.title    =</span> <span class="st">"Product Y Sales Trend over Time"</span>,</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">.y_lab =</span> <span class="st">"Sales in USD"</span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-c2c66433eac969ddaa9b" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-c2c66433eac969ddaa9b">{"x":{"data":[{"x":["2018-01-01","2018-02-01","2018-03-01","2018-04-01","2018-05-01","2018-06-01","2018-07-01","2018-08-01","2018-09-01","2018-10-01","2018-11-01","2018-12-01","2019-01-01","2019-02-01","2019-03-01","2019-04-01","2019-05-01","2019-06-01","2019-07-01","2019-08-01","2019-09-01","2019-10-01","2019-11-01","2019-12-01","2020-01-01","2020-02-01","2020-03-01","2020-04-01","2020-05-01","2020-06-01","2020-07-01","2020-08-01","2020-09-01","2020-10-01","2020-11-01","2020-12-01","2021-01-01","2021-02-01","2021-03-01","2021-04-01","2021-05-01","2021-06-01","2021-07-01","2021-08-01","2021-09-01","2021-10-01","2021-11-01","2021-12-01","2022-01-01","2022-02-01","2022-03-01","2022-04-01","2022-05-01","2022-06-01","2022-07-01","2022-08-01","2022-09-01","2022-10-01","2022-11-01","2022-12-01","2023-01-01","2023-02-01","2023-03-01","2023-04-01","2023-05-01","2023-06-01","2023-07-01","2023-08-01","2023-09-01","2023-10-01","2023-11-01","2023-12-01","2024-01-01"],"y":[132001,103489,116015,69447,100724,92142,54932,119214,98478,81370,155923,153946,173323,109364,172609,24693,79815,53377,158612,106772,157821,73594,30049,121287,145652,208897,41454,49230,88628,70484,146170,110401,185050,182977,223930,182977,121287,133210,227041,269031,131655,147726,223231,188161,188161,225486,186606,223930,291841,228078,243111,200084,68294,149279,273178,195418,175201,232743,244666,240519,227676,151873,303764,229633,147207,185196,233780,262292,229633,175201,382464,321930,243165],"text":["date: 2018-01-01<br />.value: 132001","date: 2018-02-01<br />.value: 103489","date: 2018-03-01<br />.value: 116015","date: 2018-04-01<br />.value:  69447","date: 2018-05-01<br />.value: 100724","date: 2018-06-01<br />.value:  92142","date: 2018-07-01<br />.value:  54932","date: 2018-08-01<br />.value: 119214","date: 2018-09-01<br />.value:  98478","date: 2018-10-01<br />.value:  81370","date: 2018-11-01<br />.value: 155923","date: 2018-12-01<br />.value: 153946","date: 2019-01-01<br />.value: 173323","date: 2019-02-01<br />.value: 109364","date: 2019-03-01<br />.value: 172609","date: 2019-04-01<br />.value:  24693","date: 2019-05-01<br />.value:  79815","date: 2019-06-01<br />.value:  53377","date: 2019-07-01<br />.value: 158612","date: 2019-08-01<br />.value: 106772","date: 2019-09-01<br />.value: 157821","date: 2019-10-01<br />.value:  73594","date: 2019-11-01<br />.value:  30049","date: 2019-12-01<br />.value: 121287","date: 2020-01-01<br />.value: 145652","date: 2020-02-01<br />.value: 208897","date: 2020-03-01<br />.value:  41454","date: 2020-04-01<br />.value:  49230","date: 2020-05-01<br />.value:  88628","date: 2020-06-01<br />.value:  70484","date: 2020-07-01<br />.value: 146170","date: 2020-08-01<br />.value: 110401","date: 2020-09-01<br />.value: 185050","date: 2020-10-01<br />.value: 182977","date: 2020-11-01<br />.value: 223930","date: 2020-12-01<br />.value: 182977","date: 2021-01-01<br />.value: 121287","date: 2021-02-01<br />.value: 133210","date: 2021-03-01<br />.value: 227041","date: 2021-04-01<br />.value: 269031","date: 2021-05-01<br />.value: 131655","date: 2021-06-01<br />.value: 147726","date: 2021-07-01<br />.value: 223231","date: 2021-08-01<br />.value: 188161","date: 2021-09-01<br />.value: 188161","date: 2021-10-01<br />.value: 225486","date: 2021-11-01<br />.value: 186606","date: 2021-12-01<br />.value: 223930","date: 2022-01-01<br />.value: 291841","date: 2022-02-01<br />.value: 228078","date: 2022-03-01<br />.value: 243111","date: 2022-04-01<br />.value: 200084","date: 2022-05-01<br />.value:  68294","date: 2022-06-01<br />.value: 149279","date: 2022-07-01<br />.value: 273178","date: 2022-08-01<br />.value: 195418","date: 2022-09-01<br />.value: 175201","date: 2022-10-01<br />.value: 232743","date: 2022-11-01<br />.value: 244666","date: 2022-12-01<br />.value: 240519","date: 2023-01-01<br />.value: 227676","date: 2023-02-01<br />.value: 151873","date: 2023-03-01<br />.value: 303764","date: 2023-04-01<br />.value: 229633","date: 2023-05-01<br />.value: 147207","date: 2023-06-01<br />.value: 185196","date: 2023-07-01<br />.value: 233780","date: 2023-08-01<br />.value: 262292","date: 2023-09-01<br />.value: 229633","date: 2023-10-01<br />.value: 175201","date: 2023-11-01<br />.value: 382464","date: 2023-12-01<br />.value: 321930","date: 2024-01-01<br />.value: 243165"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(44,62,80,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":["2018-01-01","2018-02-01","2018-03-01","2018-04-01","2018-05-01","2018-06-01","2018-07-01","2018-08-01","2018-09-01","2018-10-01","2018-11-01","2018-12-01","2019-01-01","2019-02-01","2019-03-01","2019-04-01","2019-05-01","2019-06-01","2019-07-01","2019-08-01","2019-09-01","2019-10-01","2019-11-01","2019-12-01","2020-01-01","2020-02-01","2020-03-01","2020-04-01","2020-05-01","2020-06-01","2020-07-01","2020-08-01","2020-09-01","2020-10-01","2020-11-01","2020-12-01","2021-01-01","2021-02-01","2021-03-01","2021-04-01","2021-05-01","2021-06-01","2021-07-01","2021-08-01","2021-09-01","2021-10-01","2021-11-01","2021-12-01","2022-01-01","2022-02-01","2022-03-01","2022-04-01","2022-05-01","2022-06-01","2022-07-01","2022-08-01","2022-09-01","2022-10-01","2022-11-01","2022-12-01","2023-01-01","2023-02-01","2023-03-01","2023-04-01","2023-05-01","2023-06-01","2023-07-01","2023-08-01","2023-09-01","2023-10-01","2023-11-01","2023-12-01","2024-01-01"],"y":[114974.84019313108,112717.62529769351,110656.44068536977,108789.6012989022,107115.42208103313,105632.21797450489,104338.30392205979,103231.99486644016,102311.60575038832,101575.45151664663,101028.64901796989,100679.25761335953,100530.00600492771,100583.62289478662,100842.83698504842,101310.37697782528,101988.9715752294,102881.34947937299,103990.23939236815,105208.42177366713,106459.54369478229,107792.63377591617,109256.72063727121,110900.8328990499,112773.99918145472,114925.24810468819,117403.60828895278,120258.10835445095,123933.5763180763,128659.26322505296,134160.83223807911,140163.94651985297,146394.26923307279,152577.46354043679,158439.19260464323,163705.11958839028,168100.90765437626,172102.95073083387,176304.13689033614,180604.87051209158,184905.55597530867,189106.59765919592,193108.39994296184,196811.36720581492,200115.90382696374,202922.41418561671,205090.60166906542,206655.82722470196,207781.98157188555,208632.95542997547,209372.63951833095,210164.92455631122,211173.70126327558,212562.8603585833,214496.29256159358,216704.98413492876,218832.46220617689,220911.42879214571,222974.58590964312,225054.63557547683,227184.27980645472,229396.22061938461,231723.16003107428,234197.80005833154,236817.22904223119,239549.93083599463,242385.70072464942,245314.33399322297,248325.62592674297,251409.37181023709,254555.36692873272,257753.40656725751,260993.28601083902],"text":["date: 2018-01-01<br />.value_smooth: 114974.8","date: 2018-02-01<br />.value_smooth: 112717.6","date: 2018-03-01<br />.value_smooth: 110656.4","date: 2018-04-01<br />.value_smooth: 108789.6","date: 2018-05-01<br />.value_smooth: 107115.4","date: 2018-06-01<br />.value_smooth: 105632.2","date: 2018-07-01<br />.value_smooth: 104338.3","date: 2018-08-01<br />.value_smooth: 103232.0","date: 2018-09-01<br />.value_smooth: 102311.6","date: 2018-10-01<br />.value_smooth: 101575.5","date: 2018-11-01<br />.value_smooth: 101028.6","date: 2018-12-01<br />.value_smooth: 100679.3","date: 2019-01-01<br />.value_smooth: 100530.0","date: 2019-02-01<br />.value_smooth: 100583.6","date: 2019-03-01<br />.value_smooth: 100842.8","date: 2019-04-01<br />.value_smooth: 101310.4","date: 2019-05-01<br />.value_smooth: 101989.0","date: 2019-06-01<br />.value_smooth: 102881.3","date: 2019-07-01<br />.value_smooth: 103990.2","date: 2019-08-01<br />.value_smooth: 105208.4","date: 2019-09-01<br />.value_smooth: 106459.5","date: 2019-10-01<br />.value_smooth: 107792.6","date: 2019-11-01<br />.value_smooth: 109256.7","date: 2019-12-01<br />.value_smooth: 110900.8","date: 2020-01-01<br />.value_smooth: 112774.0","date: 2020-02-01<br />.value_smooth: 114925.2","date: 2020-03-01<br />.value_smooth: 117403.6","date: 2020-04-01<br />.value_smooth: 120258.1","date: 2020-05-01<br />.value_smooth: 123933.6","date: 2020-06-01<br />.value_smooth: 128659.3","date: 2020-07-01<br />.value_smooth: 134160.8","date: 2020-08-01<br />.value_smooth: 140163.9","date: 2020-09-01<br />.value_smooth: 146394.3","date: 2020-10-01<br />.value_smooth: 152577.5","date: 2020-11-01<br />.value_smooth: 158439.2","date: 2020-12-01<br />.value_smooth: 163705.1","date: 2021-01-01<br />.value_smooth: 168100.9","date: 2021-02-01<br />.value_smooth: 172103.0","date: 2021-03-01<br />.value_smooth: 176304.1","date: 2021-04-01<br />.value_smooth: 180604.9","date: 2021-05-01<br />.value_smooth: 184905.6","date: 2021-06-01<br />.value_smooth: 189106.6","date: 2021-07-01<br />.value_smooth: 193108.4","date: 2021-08-01<br />.value_smooth: 196811.4","date: 2021-09-01<br />.value_smooth: 200115.9","date: 2021-10-01<br />.value_smooth: 202922.4","date: 2021-11-01<br />.value_smooth: 205090.6","date: 2021-12-01<br />.value_smooth: 206655.8","date: 2022-01-01<br />.value_smooth: 207782.0","date: 2022-02-01<br />.value_smooth: 208633.0","date: 2022-03-01<br />.value_smooth: 209372.6","date: 2022-04-01<br />.value_smooth: 210164.9","date: 2022-05-01<br />.value_smooth: 211173.7","date: 2022-06-01<br />.value_smooth: 212562.9","date: 2022-07-01<br />.value_smooth: 214496.3","date: 2022-08-01<br />.value_smooth: 216705.0","date: 2022-09-01<br />.value_smooth: 218832.5","date: 2022-10-01<br />.value_smooth: 220911.4","date: 2022-11-01<br />.value_smooth: 222974.6","date: 2022-12-01<br />.value_smooth: 225054.6","date: 2023-01-01<br />.value_smooth: 227184.3","date: 2023-02-01<br />.value_smooth: 229396.2","date: 2023-03-01<br />.value_smooth: 231723.2","date: 2023-04-01<br />.value_smooth: 234197.8","date: 2023-05-01<br />.value_smooth: 236817.2","date: 2023-06-01<br />.value_smooth: 239549.9","date: 2023-07-01<br />.value_smooth: 242385.7","date: 2023-08-01<br />.value_smooth: 245314.3","date: 2023-09-01<br />.value_smooth: 248325.6","date: 2023-10-01<br />.value_smooth: 251409.4","date: 2023-11-01<br />.value_smooth: 254555.4","date: 2023-12-01<br />.value_smooth: 257753.4","date: 2024-01-01<br />.value_smooth: 260993.3"],"type":"scatter","mode":"lines","line":{"width":3.7795275590551185,"color":"rgba(51,102,255,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":43.762557077625573,"r":7.3059360730593621,"b":25.57077625570777,"l":60.639269406392714},"plot_bgcolor":"rgba(255,255,255,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(44,62,80,1)","family":"","size":14.611872146118724},"title":{"text":"Product Y Sales Trend over Time","font":{"color":"rgba(44,62,80,1)","family":"","size":17.534246575342465},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"date","autorange":true,"range":["2017-09-13","2024-04-19"],"tickmode":"auto","ticktext":["2018","2020","2022","2024"],"tickvals":[17532,18262,18993,19723],"categoryorder":"array","categoryarray":["2018","2020","2022","2024"],"nticks":null,"ticks":"outside","tickcolor":"rgba(204,204,204,1)","ticklen":3.6529680365296811,"tickwidth":0.22139200221392005,"showticklabels":true,"tickfont":{"color":"rgba(44,62,80,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(204,204,204,1)","gridwidth":0.22139200221392005,"zeroline":false,"anchor":"y","title":{"text":"","font":{"color":"rgba(44,62,80,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":true,"range":[6804.4500000000007,400352.54999999999],"tickmode":"auto","ticktext":["100000","200000","300000","400000"],"tickvals":[100000,200000,300000,400000],"categoryorder":"array","categoryarray":["100000","200000","300000","400000"],"nticks":null,"ticks":"outside","tickcolor":"rgba(204,204,204,1)","ticklen":3.6529680365296811,"tickwidth":0.22139200221392005,"showticklabels":true,"tickfont":{"color":"rgba(44,62,80,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(204,204,204,1)","gridwidth":0.22139200221392005,"zeroline":false,"anchor":"x","title":{"text":"Sales in USD","font":{"color":"rgba(44,62,80,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(44,62,80,1)","width":0.33208800332088001,"linetype":"solid"},"yref":"paper","xref":"paper","layer":"below","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.8897637795275593,"font":{"color":"rgba(44,62,80,1)","family":"","size":11.68949771689498}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"260f13374227":{"x":{},"y":{},"type":"scatter"},"260f10d8184c":{"x":{},"y":{}}},"cur_data":"260f13374227","visdat":{"260f13374227":["function (y) ","x"],"260f10d8184c":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>The historical sales trend for <strong>Product Y at Metricon</strong> shows a business that has steadily grown over time, but not without meaningful volatility along the way. In the earlier years of the series, sales fluctuate around a lower baseline, with noticeable month-to-month swings that suggest an immature or stabilizing market phase. From around <strong>2020 onward</strong>, a clear upward trajectory begins to emerge. By the most recent periods, sales reach their highest levels in the dataset, indicating strong momentum and increasing demand for Product Y.</p>
<hr>
</section>
<section id="anomaly-detection" class="level2" data-number="4">
<h2 data-number="4" class="anchored" data-anchor-id="anomaly-detection"><span class="header-section-number">4</span> Anomaly detection</h2>
<p>Before building forecasting models, it’s important to understand whether the historical data contains <strong>unusual or unexpected behavior</strong>. The anomaly diagnostics plot highlights periods where sales of Product Y significantly deviate from the expected range, flagging potential outliers caused by events such as promotions, supply disruptions, or reporting issues. Identifying these anomalies early helps ensure that forecasting models learn genuine patterns rather than noise, ultimately leading to more reliable and robust predictions.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------------------------------------------------------------------</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualize anomaly diagnostics in the sales time series</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------------------------------------------------------------------</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>raw_sales_df <span class="sc">|&gt;</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_anomaly_diagnostics</span>(</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">.date_var    =</span> date,</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">.value       =</span> value,</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">.title       =</span> <span class="st">"Product Y Anomaly Diagnostics"</span>,</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">.y_lab =</span> <span class="st">"Sales in USD"</span>,</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">.alpha       =</span> <span class="fl">0.10</span>,   <span class="co"># Sensitivity level for anomaly detection</span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">.legend_show =</span> <span class="cn">FALSE</span>  <span class="co"># Hide legend for a cleaner visualization</span></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-5b6c261c973bc257aca7" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-5b6c261c973bc257aca7">{"x":{"data":[{"x":[17532,17563,17591,17622,17652,17683,17713,17744,17775,17805,17836,17866,17897,17928,17956,17987,18017,18048,18078,18109,18140,18170,18201,18231,18262,18293,18322,18353,18383,18414,18444,18475,18506,18536,18567,18597,18628,18659,18687,18718,18748,18779,18809,18840,18871,18901,18932,18962,18993,19024,19052,19083,19113,19144,19174,19205,19236,19266,19297,19327,19358,19389,19417,19448,19478,19509,19539,19570,19601,19631,19662,19692,19723,19723,19723,19692,19662,19631,19601,19570,19539,19509,19478,19448,19417,19389,19358,19327,19297,19266,19236,19205,19174,19144,19113,19083,19052,19024,18993,18962,18932,18901,18871,18840,18809,18779,18748,18718,18687,18659,18628,18597,18567,18536,18506,18475,18444,18414,18383,18353,18322,18293,18262,18231,18201,18170,18140,18109,18078,18048,18017,17987,17956,17928,17897,17866,17836,17805,17775,17744,17713,17683,17652,17622,17591,17563,17532,17532],"y":[57039.041022204357,7785.6526373582165,69481.301588210801,-10538.123789456527,-10317.658658153348,-16439.486580618192,55900.64264163794,28217.971841943858,34769.584271904823,27420.061551521008,61871.548607099277,68121.827706762648,69105.621219728695,18812.217165960697,79467.850447891426,-2219.4732817529002,-3666.9065024267329,-12827.847042534762,56473.169562078197,25570.653219926782,28902.420107430429,16560.871053425042,46020.331775381739,48562.17999251603,45837.542622952955,-1264.0270215058554,62583.44066973406,-13300.427268162777,-8944.4046970890922,-5282.960910919297,76840.440019971458,57808.621602665342,73011.086415014317,68468.118040987785,105726.15944292335,113254.10468047034,115515.56433132,66763.059255782515,128959.5915159437,53767.959902524977,58816.218798076763,57625.372609720798,134896.48356608578,109651.58740309189,118640.97446975307,115106.91257245562,153373.86045112024,162458.98214407088,166277.61825032413,118572.47149207082,181816.36206951627,100259.66136234725,98942.851164148771,89137.301869584393,157793.70971974099,128070.86603172845,132582.30557337095,122751.43114927874,154721.56650114863,162511.32573969397,165034.59939154197,116169.89243743411,178254.22281902496,101295.62158770679,104576.91086535915,98364.303998482763,170613.65427632735,143061.84064842836,149744.31025018447,141211.17941965311,174479.05836508385,179830.02521193391,179914.50647208662,179914.50647208662,346662.3125205207,346577.831260368,341226.86441351793,307958.98546808719,316492.11629861855,309809.64669686242,337361.46032476146,265112.11004691687,271324.71691379324,268043.42763614084,345002.02886745904,282917.69848586817,331782.40543997602,329259.13178812806,321469.37254958274,289499.23719771282,299330.111621805,294818.67208016256,324541.51576817507,255885.10791801848,265690.65721258288,267007.4674107813,348564.16811795032,285320.27754050493,333025.42429875821,329206.78819250496,320121.6664995543,281854.7186208897,285388.78051818715,276399.39345152595,301644.28961451986,224373.17865815488,225564.02484651085,220515.76595095906,295707.39756437775,233510.8653042166,282263.37037975411,280001.91072890442,272473.96549135743,235215.92408942187,239758.8924634484,224556.42765109942,243588.24606840554,161464.84513751479,157803.401351345,153447.37878027131,229331.24671816814,165483.77902692824,212585.34867138704,215309.98604095011,212768.13782381581,183308.67710185912,195650.22615586451,192318.45926836086,223220.97561051228,153919.95900589932,163080.89954600733,164528.33276668118,246215.65649632551,185560.02321439478,235853.42726816278,234869.63375519673,228619.35465553336,194167.86759995509,201517.39032033889,194965.77789037794,222648.44869007202,150308.31946781589,156430.14739028073,156209.68225897755,236229.10763664488,174533.45868579228,223786.84707063844,57039.041022204357],"text":["date: 2018-01-01<br />observed: 132001<br />recomposed_l1:  57039.041<br />recomposed_l2: 223786.8","date: 2018-02-01<br />observed: 103489<br />recomposed_l1:   7785.653<br />recomposed_l2: 174533.5","date: 2018-03-01<br />observed: 116015<br />recomposed_l1:  69481.302<br />recomposed_l2: 236229.1","date: 2018-04-01<br />observed:  69447<br />recomposed_l1: -10538.124<br />recomposed_l2: 156209.7","date: 2018-05-01<br />observed: 100724<br />recomposed_l1: -10317.659<br />recomposed_l2: 156430.1","date: 2018-06-01<br />observed:  92142<br />recomposed_l1: -16439.487<br />recomposed_l2: 150308.3","date: 2018-07-01<br />observed:  54932<br />recomposed_l1:  55900.643<br />recomposed_l2: 222648.4","date: 2018-08-01<br />observed: 119214<br />recomposed_l1:  28217.972<br />recomposed_l2: 194965.8","date: 2018-09-01<br />observed:  98478<br />recomposed_l1:  34769.584<br />recomposed_l2: 201517.4","date: 2018-10-01<br />observed:  81370<br />recomposed_l1:  27420.062<br />recomposed_l2: 194167.9","date: 2018-11-01<br />observed: 155923<br />recomposed_l1:  61871.549<br />recomposed_l2: 228619.4","date: 2018-12-01<br />observed: 153946<br />recomposed_l1:  68121.828<br />recomposed_l2: 234869.6","date: 2019-01-01<br />observed: 173323<br />recomposed_l1:  69105.621<br />recomposed_l2: 235853.4","date: 2019-02-01<br />observed: 109364<br />recomposed_l1:  18812.217<br />recomposed_l2: 185560.0","date: 2019-03-01<br />observed: 172609<br />recomposed_l1:  79467.850<br />recomposed_l2: 246215.7","date: 2019-04-01<br />observed:  24693<br />recomposed_l1:  -2219.473<br />recomposed_l2: 164528.3","date: 2019-05-01<br />observed:  79815<br />recomposed_l1:  -3666.907<br />recomposed_l2: 163080.9","date: 2019-06-01<br />observed:  53377<br />recomposed_l1: -12827.847<br />recomposed_l2: 153920.0","date: 2019-07-01<br />observed: 158612<br />recomposed_l1:  56473.170<br />recomposed_l2: 223221.0","date: 2019-08-01<br />observed: 106772<br />recomposed_l1:  25570.653<br />recomposed_l2: 192318.5","date: 2019-09-01<br />observed: 157821<br />recomposed_l1:  28902.420<br />recomposed_l2: 195650.2","date: 2019-10-01<br />observed:  73594<br />recomposed_l1:  16560.871<br />recomposed_l2: 183308.7","date: 2019-11-01<br />observed:  30049<br />recomposed_l1:  46020.332<br />recomposed_l2: 212768.1","date: 2019-12-01<br />observed: 121287<br />recomposed_l1:  48562.180<br />recomposed_l2: 215310.0","date: 2020-01-01<br />observed: 145652<br />recomposed_l1:  45837.543<br />recomposed_l2: 212585.3","date: 2020-02-01<br />observed: 208897<br />recomposed_l1:  -1264.027<br />recomposed_l2: 165483.8","date: 2020-03-01<br />observed:  41454<br />recomposed_l1:  62583.441<br />recomposed_l2: 229331.2","date: 2020-04-01<br />observed:  49230<br />recomposed_l1: -13300.427<br />recomposed_l2: 153447.4","date: 2020-05-01<br />observed:  88628<br />recomposed_l1:  -8944.405<br />recomposed_l2: 157803.4","date: 2020-06-01<br />observed:  70484<br />recomposed_l1:  -5282.961<br />recomposed_l2: 161464.8","date: 2020-07-01<br />observed: 146170<br />recomposed_l1:  76840.440<br />recomposed_l2: 243588.2","date: 2020-08-01<br />observed: 110401<br />recomposed_l1:  57808.622<br />recomposed_l2: 224556.4","date: 2020-09-01<br />observed: 185050<br />recomposed_l1:  73011.086<br />recomposed_l2: 239758.9","date: 2020-10-01<br />observed: 182977<br />recomposed_l1:  68468.118<br />recomposed_l2: 235215.9","date: 2020-11-01<br />observed: 223930<br />recomposed_l1: 105726.159<br />recomposed_l2: 272474.0","date: 2020-12-01<br />observed: 182977<br />recomposed_l1: 113254.105<br />recomposed_l2: 280001.9","date: 2021-01-01<br />observed: 121287<br />recomposed_l1: 115515.564<br />recomposed_l2: 282263.4","date: 2021-02-01<br />observed: 133210<br />recomposed_l1:  66763.059<br />recomposed_l2: 233510.9","date: 2021-03-01<br />observed: 227041<br />recomposed_l1: 128959.592<br />recomposed_l2: 295707.4","date: 2021-04-01<br />observed: 269031<br />recomposed_l1:  53767.960<br />recomposed_l2: 220515.8","date: 2021-05-01<br />observed: 131655<br />recomposed_l1:  58816.219<br />recomposed_l2: 225564.0","date: 2021-06-01<br />observed: 147726<br />recomposed_l1:  57625.373<br />recomposed_l2: 224373.2","date: 2021-07-01<br />observed: 223231<br />recomposed_l1: 134896.484<br />recomposed_l2: 301644.3","date: 2021-08-01<br />observed: 188161<br />recomposed_l1: 109651.587<br />recomposed_l2: 276399.4","date: 2021-09-01<br />observed: 188161<br />recomposed_l1: 118640.974<br />recomposed_l2: 285388.8","date: 2021-10-01<br />observed: 225486<br />recomposed_l1: 115106.913<br />recomposed_l2: 281854.7","date: 2021-11-01<br />observed: 186606<br />recomposed_l1: 153373.860<br />recomposed_l2: 320121.7","date: 2021-12-01<br />observed: 223930<br />recomposed_l1: 162458.982<br />recomposed_l2: 329206.8","date: 2022-01-01<br />observed: 291841<br />recomposed_l1: 166277.618<br />recomposed_l2: 333025.4","date: 2022-02-01<br />observed: 228078<br />recomposed_l1: 118572.471<br />recomposed_l2: 285320.3","date: 2022-03-01<br />observed: 243111<br />recomposed_l1: 181816.362<br />recomposed_l2: 348564.2","date: 2022-04-01<br />observed: 200084<br />recomposed_l1: 100259.661<br />recomposed_l2: 267007.5","date: 2022-05-01<br />observed:  68294<br />recomposed_l1:  98942.851<br />recomposed_l2: 265690.7","date: 2022-06-01<br />observed: 149279<br />recomposed_l1:  89137.302<br />recomposed_l2: 255885.1","date: 2022-07-01<br />observed: 273178<br />recomposed_l1: 157793.710<br />recomposed_l2: 324541.5","date: 2022-08-01<br />observed: 195418<br />recomposed_l1: 128070.866<br />recomposed_l2: 294818.7","date: 2022-09-01<br />observed: 175201<br />recomposed_l1: 132582.306<br />recomposed_l2: 299330.1","date: 2022-10-01<br />observed: 232743<br />recomposed_l1: 122751.431<br />recomposed_l2: 289499.2","date: 2022-11-01<br />observed: 244666<br />recomposed_l1: 154721.567<br />recomposed_l2: 321469.4","date: 2022-12-01<br />observed: 240519<br />recomposed_l1: 162511.326<br />recomposed_l2: 329259.1","date: 2023-01-01<br />observed: 227676<br />recomposed_l1: 165034.599<br />recomposed_l2: 331782.4","date: 2023-02-01<br />observed: 151873<br />recomposed_l1: 116169.892<br />recomposed_l2: 282917.7","date: 2023-03-01<br />observed: 303764<br />recomposed_l1: 178254.223<br />recomposed_l2: 345002.0","date: 2023-04-01<br />observed: 229633<br />recomposed_l1: 101295.622<br />recomposed_l2: 268043.4","date: 2023-05-01<br />observed: 147207<br />recomposed_l1: 104576.911<br />recomposed_l2: 271324.7","date: 2023-06-01<br />observed: 185196<br />recomposed_l1:  98364.304<br />recomposed_l2: 265112.1","date: 2023-07-01<br />observed: 233780<br />recomposed_l1: 170613.654<br />recomposed_l2: 337361.5","date: 2023-08-01<br />observed: 262292<br />recomposed_l1: 143061.841<br />recomposed_l2: 309809.6","date: 2023-09-01<br />observed: 229633<br />recomposed_l1: 149744.310<br />recomposed_l2: 316492.1","date: 2023-10-01<br />observed: 175201<br />recomposed_l1: 141211.179<br />recomposed_l2: 307959.0","date: 2023-11-01<br />observed: 382464<br />recomposed_l1: 174479.058<br />recomposed_l2: 341226.9","date: 2023-12-01<br />observed: 321930<br />recomposed_l1: 179830.025<br />recomposed_l2: 346577.8","date: 2024-01-01<br />observed: 243165<br />recomposed_l1: 179914.506<br />recomposed_l2: 346662.3","date: 2024-01-01<br />observed: 243165<br />recomposed_l1: 179914.506<br />recomposed_l2: 346662.3","date: 2024-01-01<br />observed: 243165<br />recomposed_l1: 179914.506<br />recomposed_l2: 346662.3","date: 2023-12-01<br />observed: 321930<br />recomposed_l1: 179830.025<br />recomposed_l2: 346577.8","date: 2023-11-01<br />observed: 382464<br />recomposed_l1: 174479.058<br />recomposed_l2: 341226.9","date: 2023-10-01<br />observed: 175201<br />recomposed_l1: 141211.179<br />recomposed_l2: 307959.0","date: 2023-09-01<br />observed: 229633<br />recomposed_l1: 149744.310<br />recomposed_l2: 316492.1","date: 2023-08-01<br />observed: 262292<br />recomposed_l1: 143061.841<br />recomposed_l2: 309809.6","date: 2023-07-01<br />observed: 233780<br />recomposed_l1: 170613.654<br />recomposed_l2: 337361.5","date: 2023-06-01<br />observed: 185196<br />recomposed_l1:  98364.304<br />recomposed_l2: 265112.1","date: 2023-05-01<br />observed: 147207<br />recomposed_l1: 104576.911<br />recomposed_l2: 271324.7","date: 2023-04-01<br />observed: 229633<br />recomposed_l1: 101295.622<br />recomposed_l2: 268043.4","date: 2023-03-01<br />observed: 303764<br />recomposed_l1: 178254.223<br />recomposed_l2: 345002.0","date: 2023-02-01<br />observed: 151873<br />recomposed_l1: 116169.892<br />recomposed_l2: 282917.7","date: 2023-01-01<br />observed: 227676<br />recomposed_l1: 165034.599<br />recomposed_l2: 331782.4","date: 2022-12-01<br />observed: 240519<br />recomposed_l1: 162511.326<br />recomposed_l2: 329259.1","date: 2022-11-01<br />observed: 244666<br />recomposed_l1: 154721.567<br />recomposed_l2: 321469.4","date: 2022-10-01<br />observed: 232743<br />recomposed_l1: 122751.431<br />recomposed_l2: 289499.2","date: 2022-09-01<br />observed: 175201<br />recomposed_l1: 132582.306<br />recomposed_l2: 299330.1","date: 2022-08-01<br />observed: 195418<br />recomposed_l1: 128070.866<br />recomposed_l2: 294818.7","date: 2022-07-01<br />observed: 273178<br />recomposed_l1: 157793.710<br />recomposed_l2: 324541.5","date: 2022-06-01<br />observed: 149279<br />recomposed_l1:  89137.302<br />recomposed_l2: 255885.1","date: 2022-05-01<br />observed:  68294<br />recomposed_l1:  98942.851<br />recomposed_l2: 265690.7","date: 2022-04-01<br />observed: 200084<br />recomposed_l1: 100259.661<br />recomposed_l2: 267007.5","date: 2022-03-01<br />observed: 243111<br />recomposed_l1: 181816.362<br />recomposed_l2: 348564.2","date: 2022-02-01<br />observed: 228078<br />recomposed_l1: 118572.471<br />recomposed_l2: 285320.3","date: 2022-01-01<br />observed: 291841<br />recomposed_l1: 166277.618<br />recomposed_l2: 333025.4","date: 2021-12-01<br />observed: 223930<br />recomposed_l1: 162458.982<br />recomposed_l2: 329206.8","date: 2021-11-01<br />observed: 186606<br />recomposed_l1: 153373.860<br />recomposed_l2: 320121.7","date: 2021-10-01<br />observed: 225486<br />recomposed_l1: 115106.913<br />recomposed_l2: 281854.7","date: 2021-09-01<br />observed: 188161<br />recomposed_l1: 118640.974<br />recomposed_l2: 285388.8","date: 2021-08-01<br />observed: 188161<br />recomposed_l1: 109651.587<br />recomposed_l2: 276399.4","date: 2021-07-01<br />observed: 223231<br />recomposed_l1: 134896.484<br />recomposed_l2: 301644.3","date: 2021-06-01<br />observed: 147726<br />recomposed_l1:  57625.373<br />recomposed_l2: 224373.2","date: 2021-05-01<br />observed: 131655<br />recomposed_l1:  58816.219<br />recomposed_l2: 225564.0","date: 2021-04-01<br />observed: 269031<br />recomposed_l1:  53767.960<br />recomposed_l2: 220515.8","date: 2021-03-01<br />observed: 227041<br />recomposed_l1: 128959.592<br />recomposed_l2: 295707.4","date: 2021-02-01<br />observed: 133210<br />recomposed_l1:  66763.059<br />recomposed_l2: 233510.9","date: 2021-01-01<br />observed: 121287<br />recomposed_l1: 115515.564<br />recomposed_l2: 282263.4","date: 2020-12-01<br />observed: 182977<br />recomposed_l1: 113254.105<br />recomposed_l2: 280001.9","date: 2020-11-01<br />observed: 223930<br />recomposed_l1: 105726.159<br />recomposed_l2: 272474.0","date: 2020-10-01<br />observed: 182977<br />recomposed_l1:  68468.118<br />recomposed_l2: 235215.9","date: 2020-09-01<br />observed: 185050<br />recomposed_l1:  73011.086<br />recomposed_l2: 239758.9","date: 2020-08-01<br />observed: 110401<br />recomposed_l1:  57808.622<br />recomposed_l2: 224556.4","date: 2020-07-01<br />observed: 146170<br />recomposed_l1:  76840.440<br />recomposed_l2: 243588.2","date: 2020-06-01<br />observed:  70484<br />recomposed_l1:  -5282.961<br />recomposed_l2: 161464.8","date: 2020-05-01<br />observed:  88628<br />recomposed_l1:  -8944.405<br />recomposed_l2: 157803.4","date: 2020-04-01<br />observed:  49230<br />recomposed_l1: -13300.427<br />recomposed_l2: 153447.4","date: 2020-03-01<br />observed:  41454<br />recomposed_l1:  62583.441<br />recomposed_l2: 229331.2","date: 2020-02-01<br />observed: 208897<br />recomposed_l1:  -1264.027<br />recomposed_l2: 165483.8","date: 2020-01-01<br />observed: 145652<br />recomposed_l1:  45837.543<br />recomposed_l2: 212585.3","date: 2019-12-01<br />observed: 121287<br />recomposed_l1:  48562.180<br />recomposed_l2: 215310.0","date: 2019-11-01<br />observed:  30049<br />recomposed_l1:  46020.332<br />recomposed_l2: 212768.1","date: 2019-10-01<br />observed:  73594<br />recomposed_l1:  16560.871<br />recomposed_l2: 183308.7","date: 2019-09-01<br />observed: 157821<br />recomposed_l1:  28902.420<br />recomposed_l2: 195650.2","date: 2019-08-01<br />observed: 106772<br />recomposed_l1:  25570.653<br />recomposed_l2: 192318.5","date: 2019-07-01<br />observed: 158612<br />recomposed_l1:  56473.170<br />recomposed_l2: 223221.0","date: 2019-06-01<br />observed:  53377<br />recomposed_l1: -12827.847<br />recomposed_l2: 153920.0","date: 2019-05-01<br />observed:  79815<br />recomposed_l1:  -3666.907<br />recomposed_l2: 163080.9","date: 2019-04-01<br />observed:  24693<br />recomposed_l1:  -2219.473<br />recomposed_l2: 164528.3","date: 2019-03-01<br />observed: 172609<br />recomposed_l1:  79467.850<br />recomposed_l2: 246215.7","date: 2019-02-01<br />observed: 109364<br />recomposed_l1:  18812.217<br />recomposed_l2: 185560.0","date: 2019-01-01<br />observed: 173323<br />recomposed_l1:  69105.621<br />recomposed_l2: 235853.4","date: 2018-12-01<br />observed: 153946<br />recomposed_l1:  68121.828<br />recomposed_l2: 234869.6","date: 2018-11-01<br />observed: 155923<br />recomposed_l1:  61871.549<br />recomposed_l2: 228619.4","date: 2018-10-01<br />observed:  81370<br />recomposed_l1:  27420.062<br />recomposed_l2: 194167.9","date: 2018-09-01<br />observed:  98478<br />recomposed_l1:  34769.584<br />recomposed_l2: 201517.4","date: 2018-08-01<br />observed: 119214<br />recomposed_l1:  28217.972<br />recomposed_l2: 194965.8","date: 2018-07-01<br />observed:  54932<br />recomposed_l1:  55900.643<br />recomposed_l2: 222648.4","date: 2018-06-01<br />observed:  92142<br />recomposed_l1: -16439.487<br />recomposed_l2: 150308.3","date: 2018-05-01<br />observed: 100724<br />recomposed_l1: -10317.659<br />recomposed_l2: 156430.1","date: 2018-04-01<br />observed:  69447<br />recomposed_l1: -10538.124<br />recomposed_l2: 156209.7","date: 2018-03-01<br />observed: 116015<br />recomposed_l1:  69481.302<br />recomposed_l2: 236229.1","date: 2018-02-01<br />observed: 103489<br />recomposed_l1:   7785.653<br />recomposed_l2: 174533.5","date: 2018-01-01<br />observed: 132001<br />recomposed_l1:  57039.041<br />recomposed_l2: 223786.8","date: 2018-01-01<br />observed: 132001<br />recomposed_l1:  57039.041<br />recomposed_l2: 223786.8"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"transparent","dash":"solid"},"fill":"toself","fillcolor":"rgba(51,51,51,0.2)","hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[17532,17563,17591,17622,17652,17683,17713,17744,17775,17805,17836,17866,17897,17928,17956,17987,18017,18048,18078,18109,18140,18170,18201,18231,18262,18293,18322,18353,18383,18414,18444,18475,18506,18536,18567,18597,18628,18659,18687,18718,18748,18779,18809,18840,18871,18901,18932,18962,18993,19024,19052,19083,19113,19144,19174,19205,19236,19266,19297,19327,19358,19389,19417,19448,19478,19509,19539,19570,19601,19631,19662,19692,19723],"y":[132001,103489,116015,69447,100724,92142,54932,119214,98478,81370,155923,153946,173323,109364,172609,24693.000000000007,79815,53377,158612,106772,157821,73594,30049,121287,145652,208897,41454,49230,88628,70484,146170,110401,185050,182977,223930,182977,121287,133210,227041,269031,131655,147726,223231,188161,188161,225486,186606,223930,291841,228078,243111.00000000003,200084,68294,149279,273178,195418,175201,232743,244666,240519,227676,151873,303764,229633,147207,185196,233780,262292,229633,175201,382464,321930,243165],"text":["date: 2018-01-01<br />observed: 132001","date: 2018-02-01<br />observed: 103489","date: 2018-03-01<br />observed: 116015","date: 2018-04-01<br />observed:  69447","date: 2018-05-01<br />observed: 100724","date: 2018-06-01<br />observed:  92142","date: 2018-07-01<br />observed:  54932","date: 2018-08-01<br />observed: 119214","date: 2018-09-01<br />observed:  98478","date: 2018-10-01<br />observed:  81370","date: 2018-11-01<br />observed: 155923","date: 2018-12-01<br />observed: 153946","date: 2019-01-01<br />observed: 173323","date: 2019-02-01<br />observed: 109364","date: 2019-03-01<br />observed: 172609","date: 2019-04-01<br />observed:  24693","date: 2019-05-01<br />observed:  79815","date: 2019-06-01<br />observed:  53377","date: 2019-07-01<br />observed: 158612","date: 2019-08-01<br />observed: 106772","date: 2019-09-01<br />observed: 157821","date: 2019-10-01<br />observed:  73594","date: 2019-11-01<br />observed:  30049","date: 2019-12-01<br />observed: 121287","date: 2020-01-01<br />observed: 145652","date: 2020-02-01<br />observed: 208897","date: 2020-03-01<br />observed:  41454","date: 2020-04-01<br />observed:  49230","date: 2020-05-01<br />observed:  88628","date: 2020-06-01<br />observed:  70484","date: 2020-07-01<br />observed: 146170","date: 2020-08-01<br />observed: 110401","date: 2020-09-01<br />observed: 185050","date: 2020-10-01<br />observed: 182977","date: 2020-11-01<br />observed: 223930","date: 2020-12-01<br />observed: 182977","date: 2021-01-01<br />observed: 121287","date: 2021-02-01<br />observed: 133210","date: 2021-03-01<br />observed: 227041","date: 2021-04-01<br />observed: 269031","date: 2021-05-01<br />observed: 131655","date: 2021-06-01<br />observed: 147726","date: 2021-07-01<br />observed: 223231","date: 2021-08-01<br />observed: 188161","date: 2021-09-01<br />observed: 188161","date: 2021-10-01<br />observed: 225486","date: 2021-11-01<br />observed: 186606","date: 2021-12-01<br />observed: 223930","date: 2022-01-01<br />observed: 291841","date: 2022-02-01<br />observed: 228078","date: 2022-03-01<br />observed: 243111","date: 2022-04-01<br />observed: 200084","date: 2022-05-01<br />observed:  68294","date: 2022-06-01<br />observed: 149279","date: 2022-07-01<br />observed: 273178","date: 2022-08-01<br />observed: 195418","date: 2022-09-01<br />observed: 175201","date: 2022-10-01<br />observed: 232743","date: 2022-11-01<br />observed: 244666","date: 2022-12-01<br />observed: 240519","date: 2023-01-01<br />observed: 227676","date: 2023-02-01<br />observed: 151873","date: 2023-03-01<br />observed: 303764","date: 2023-04-01<br />observed: 229633","date: 2023-05-01<br />observed: 147207","date: 2023-06-01<br />observed: 185196","date: 2023-07-01<br />observed: 233780","date: 2023-08-01<br />observed: 262292","date: 2023-09-01<br />observed: 229633","date: 2023-10-01<br />observed: 175201","date: 2023-11-01<br />observed: 382464","date: 2023-12-01<br />observed: 321930","date: 2024-01-01<br />observed: 243165"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(44,62,80,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[17713,18201,18293,18322,18718,19113,19662],"y":[54932,30049,208897,41454,269031,68294,382464],"text":["date: 2018-07-01<br />observed:  54932<br />anomaly: Yes","date: 2019-11-01<br />observed:  30049<br />anomaly: Yes","date: 2020-02-01<br />observed: 208897<br />anomaly: Yes","date: 2020-03-01<br />observed:  41454<br />anomaly: Yes","date: 2021-04-01<br />observed: 269031<br />anomaly: Yes","date: 2022-05-01<br />observed:  68294<br />anomaly: Yes","date: 2023-11-01<br />observed: 382464<br />anomaly: Yes"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(227,26,28,1)","opacity":1,"size":5.6692913385826778,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(227,26,28,1)"}},"hoveron":"points","name":"Yes","legendgroup":"Yes","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":43.762557077625573,"r":7.3059360730593621,"b":25.57077625570777,"l":60.639269406392714},"plot_bgcolor":"rgba(255,255,255,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(44,62,80,1)","family":"","size":14.611872146118724},"title":{"text":"Product Y Anomaly Diagnostics","font":{"color":"rgba(44,62,80,1)","family":"","size":17.534246575342465},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[17422.450000000001,19832.549999999999],"tickmode":"array","ticktext":["2018","2020","2022","2024"],"tickvals":[17532,18262,18993,19723],"categoryorder":"array","categoryarray":["2018","2020","2022","2024"],"nticks":null,"ticks":"outside","tickcolor":"rgba(204,204,204,1)","ticklen":3.6529680365296811,"tickwidth":0.22139200221392005,"showticklabels":true,"tickfont":{"color":"rgba(44,62,80,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(204,204,204,1)","gridwidth":0.22139200221392005,"zeroline":false,"anchor":"y","title":{"text":"","font":{"color":"rgba(44,62,80,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-36384.660909649101,402409.17432903091],"tickmode":"array","ticktext":["0","100000","200000","300000","400000"],"tickvals":[0,100000,200000,300000,400000],"categoryorder":"array","categoryarray":["0","100000","200000","300000","400000"],"nticks":null,"ticks":"outside","tickcolor":"rgba(204,204,204,1)","ticklen":3.6529680365296811,"tickwidth":0.22139200221392005,"showticklabels":true,"tickfont":{"color":"rgba(44,62,80,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(204,204,204,1)","gridwidth":0.22139200221392005,"zeroline":false,"anchor":"x","title":{"text":"Sales in USD","font":{"color":"rgba(44,62,80,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(44,62,80,1)","width":0.33208800332088001,"linetype":"solid"},"yref":"paper","xref":"paper","layer":"below","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.8897637795275593,"font":{"color":"rgba(44,62,80,1)","family":"","size":11.68949771689498}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"260f56158480":{"x":{},"y":{},"ymin":{},"ymax":{},"type":"scatter"},"260f1eae1ba7":{"x":{},"y":{}},"260f389980ad":{"x":{},"y":{},"colour":{}}},"cur_data":"260f56158480","visdat":{"260f56158480":["function (y) ","x"],"260f1eae1ba7":["function (y) ","x"],"260f389980ad":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>The code chunk below focuses on <strong>cleaning the historical sales data before forecasting</strong>. Using anomaly detection, we identify months where Product Y’s sales significantly deviate from the expected pattern. Instead of removing these observations entirely, the workflow replaces anomalous values with a cleaned estimate that better reflects the underlying trend to preserve the continuity of the time series while preventing extreme values from distorting downstream machine learning models. Finally, the cleaned series is replotted to visually confirm that the long-term trend remains intact, but with reduced noise.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------------------------------------------------------------------</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Detect anomalies in the historical sales data</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------------------------------------------------------------------</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>anomaly_results_df <span class="ot">&lt;-</span> raw_sales_df <span class="sc">|&gt;</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">anomalize</span>(</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">.date_var  =</span> date,</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">.value     =</span> value,</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">.iqr_alpha =</span> <span class="fl">0.10</span>   <span class="co"># Sensitivity level for anomaly detection</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Inspect a few records to understand the anomaly flags</span></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>anomaly_results_df <span class="sc">|&gt;</span></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">3</span>) <span class="sc">|&gt;</span></span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(date, observed, anomaly, trend, observed_clean)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["date"],"name":[1],"type":["date"],"align":["right"]},{"label":["observed"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["anomaly"],"name":[3],"type":["chr"],"align":["left"]},{"label":["trend"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["observed_clean"],"name":[5],"type":["dbl"],"align":["right"]}],"data":[{"1":"2018-01-01","2":"132001","3":"No","4":"108036.6","5":"132001"},{"1":"2018-02-01","2":"103489","3":"No","4":"108814.0","5":"103489"},{"1":"2018-03-01","2":"116015","3":"No","4":"109591.3","5":"116015"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------------------------------------------------------------------</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Replace anomalous values with cleaned estimates</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------------------------------------------------------------------</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>cleaned_sales_df <span class="ot">&lt;-</span> anomaly_results_df <span class="sc">|&gt;</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">transmute</span>(</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>    date,</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">value =</span> <span class="fu">if_else</span>(</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>      anomaly <span class="sc">==</span> <span class="st">"Yes"</span>,</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>      observed_clean,  <span class="co"># Use cleaned value when anomaly is detected</span></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>      observed         <span class="co"># Otherwise keep the original observation</span></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------------------------------------------------------------------</span></span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualize the cleaned time series</span></span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------------------------------------------------------------------</span></span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a>cleaned_sales_df <span class="sc">|&gt;</span></span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_time_series</span>(</span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">.date_var =</span> date,</span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">.value    =</span> value,</span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">.title    =</span> <span class="st">"Product Y Sales Trend over Time (Anomalies Adjusted)"</span>,</span>
<span id="cb9-25"><a href="#cb9-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">.y_lab =</span> <span class="st">"Sales in USD"</span></span>
<span id="cb9-26"><a href="#cb9-26" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-51e7b74bce9132931d18" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-51e7b74bce9132931d18">{"x":{"data":[{"x":["2018-01-01","2018-02-01","2018-03-01","2018-04-01","2018-05-01","2018-06-01","2018-07-01","2018-08-01","2018-09-01","2018-10-01","2018-11-01","2018-12-01","2019-01-01","2019-02-01","2019-03-01","2019-04-01","2019-05-01","2019-06-01","2019-07-01","2019-08-01","2019-09-01","2019-10-01","2019-11-01","2019-12-01","2020-01-01","2020-02-01","2020-03-01","2020-04-01","2020-05-01","2020-06-01","2020-07-01","2020-08-01","2020-09-01","2020-10-01","2020-11-01","2020-12-01","2021-01-01","2021-02-01","2021-03-01","2021-04-01","2021-05-01","2021-06-01","2021-07-01","2021-08-01","2021-09-01","2021-10-01","2021-11-01","2021-12-01","2022-01-01","2022-02-01","2022-03-01","2022-04-01","2022-05-01","2022-06-01","2022-07-01","2022-08-01","2022-09-01","2022-10-01","2022-11-01","2022-12-01","2023-01-01","2023-02-01","2023-03-01","2023-04-01","2023-05-01","2023-06-01","2023-07-01","2023-08-01","2023-09-01","2023-10-01","2023-11-01","2023-12-01","2024-01-01"],"y":[132001,103489,116015,69447,100724,92142,76744.118397692204,119214,98478,81370,155923,153946,173323,109364,172609,24693.000000000007,79815,53377,158612,106772,157821,73594,66863.807531436003,121287,145652,144640.30327087396,83426.916425788324,49230,88628,70484,146170,110401,185050,182977,223930,182977,121287,133210,227041,199672.29019490481,131655,147726,223231,188161,188161,225486,186606,223930,291841,228078,243111.00000000003,200084,119786.32692020304,149279,273178,195418,175201,232743,244666,240519,227676,151873,303764,229633,147207,185196,233780,262292,229633,175201,320383.38865746366,321930,243165],"text":["date: 2018-01-01<br />.value: 132001.00","date: 2018-02-01<br />.value: 103489.00","date: 2018-03-01<br />.value: 116015.00","date: 2018-04-01<br />.value:  69447.00","date: 2018-05-01<br />.value: 100724.00","date: 2018-06-01<br />.value:  92142.00","date: 2018-07-01<br />.value:  76744.12","date: 2018-08-01<br />.value: 119214.00","date: 2018-09-01<br />.value:  98478.00","date: 2018-10-01<br />.value:  81370.00","date: 2018-11-01<br />.value: 155923.00","date: 2018-12-01<br />.value: 153946.00","date: 2019-01-01<br />.value: 173323.00","date: 2019-02-01<br />.value: 109364.00","date: 2019-03-01<br />.value: 172609.00","date: 2019-04-01<br />.value:  24693.00","date: 2019-05-01<br />.value:  79815.00","date: 2019-06-01<br />.value:  53377.00","date: 2019-07-01<br />.value: 158612.00","date: 2019-08-01<br />.value: 106772.00","date: 2019-09-01<br />.value: 157821.00","date: 2019-10-01<br />.value:  73594.00","date: 2019-11-01<br />.value:  66863.81","date: 2019-12-01<br />.value: 121287.00","date: 2020-01-01<br />.value: 145652.00","date: 2020-02-01<br />.value: 144640.30","date: 2020-03-01<br />.value:  83426.92","date: 2020-04-01<br />.value:  49230.00","date: 2020-05-01<br />.value:  88628.00","date: 2020-06-01<br />.value:  70484.00","date: 2020-07-01<br />.value: 146170.00","date: 2020-08-01<br />.value: 110401.00","date: 2020-09-01<br />.value: 185050.00","date: 2020-10-01<br />.value: 182977.00","date: 2020-11-01<br />.value: 223930.00","date: 2020-12-01<br />.value: 182977.00","date: 2021-01-01<br />.value: 121287.00","date: 2021-02-01<br />.value: 133210.00","date: 2021-03-01<br />.value: 227041.00","date: 2021-04-01<br />.value: 199672.29","date: 2021-05-01<br />.value: 131655.00","date: 2021-06-01<br />.value: 147726.00","date: 2021-07-01<br />.value: 223231.00","date: 2021-08-01<br />.value: 188161.00","date: 2021-09-01<br />.value: 188161.00","date: 2021-10-01<br />.value: 225486.00","date: 2021-11-01<br />.value: 186606.00","date: 2021-12-01<br />.value: 223930.00","date: 2022-01-01<br />.value: 291841.00","date: 2022-02-01<br />.value: 228078.00","date: 2022-03-01<br />.value: 243111.00","date: 2022-04-01<br />.value: 200084.00","date: 2022-05-01<br />.value: 119786.33","date: 2022-06-01<br />.value: 149279.00","date: 2022-07-01<br />.value: 273178.00","date: 2022-08-01<br />.value: 195418.00","date: 2022-09-01<br />.value: 175201.00","date: 2022-10-01<br />.value: 232743.00","date: 2022-11-01<br />.value: 244666.00","date: 2022-12-01<br />.value: 240519.00","date: 2023-01-01<br />.value: 227676.00","date: 2023-02-01<br />.value: 151873.00","date: 2023-03-01<br />.value: 303764.00","date: 2023-04-01<br />.value: 229633.00","date: 2023-05-01<br />.value: 147207.00","date: 2023-06-01<br />.value: 185196.00","date: 2023-07-01<br />.value: 233780.00","date: 2023-08-01<br />.value: 262292.00","date: 2023-09-01<br />.value: 229633.00","date: 2023-10-01<br />.value: 175201.00","date: 2023-11-01<br />.value: 320383.39","date: 2023-12-01<br />.value: 321930.00","date: 2024-01-01<br />.value: 243165.00"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(44,62,80,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":["2018-01-01","2018-02-01","2018-03-01","2018-04-01","2018-05-01","2018-06-01","2018-07-01","2018-08-01","2018-09-01","2018-10-01","2018-11-01","2018-12-01","2019-01-01","2019-02-01","2019-03-01","2019-04-01","2019-05-01","2019-06-01","2019-07-01","2019-08-01","2019-09-01","2019-10-01","2019-11-01","2019-12-01","2020-01-01","2020-02-01","2020-03-01","2020-04-01","2020-05-01","2020-06-01","2020-07-01","2020-08-01","2020-09-01","2020-10-01","2020-11-01","2020-12-01","2021-01-01","2021-02-01","2021-03-01","2021-04-01","2021-05-01","2021-06-01","2021-07-01","2021-08-01","2021-09-01","2021-10-01","2021-11-01","2021-12-01","2022-01-01","2022-02-01","2022-03-01","2022-04-01","2022-05-01","2022-06-01","2022-07-01","2022-08-01","2022-09-01","2022-10-01","2022-11-01","2022-12-01","2023-01-01","2023-02-01","2023-03-01","2023-04-01","2023-05-01","2023-06-01","2023-07-01","2023-08-01","2023-09-01","2023-10-01","2023-11-01","2023-12-01","2024-01-01"],"y":[115919.73938323965,113831.10890181357,111922.7407931171,110192.61095863381,108638.69529984734,107258.96971824125,106051.41011529911,105013.99239250452,104144.69245134105,103441.48619329234,102906.89794432775,102547.65578823334,102368.04126321773,102372.33590748944,102564.82125925708,102949.77885672922,103531.49023811446,104314.23694162138,105302.30050545852,106374.28253172211,107443.10686120257,108564.53839014974,109794.3420148135,111188.28263144376,112802.12513629034,114691.63442560316,116912.57539563208,119520.71294262698,122888.62056874459,127195.58997014398,132207.46333407852,137690.08284780162,143409.29069856659,149130.92907362679,154620.84016023568,159644.86614564655,163968.84921711282,168078.14972407371,172525.53046518384,177177.93730151988,181902.31609415825,186565.61270417558,191034.7729926483,195176.7428206531,198858.46804926646,201946.89453956491,204391.96700885144,206317.19951976169,207849.89195137133,209117.34418275591,210246.85609299107,211365.72756115234,212601.2584663154,214080.74868755578,215931.49810394915,217948.59824566368,219858.18408473153,221684.12066302416,223450.27302241296,225180.50620476948,226898.68525196507,228628.67520587129,230394.34110835954,232219.54800130136,234103.11875211768,236022.87180784479,237971.1655797768,239940.35847920767,241922.80891743171,243910.87530574307,245896.91605543578,247873.28957780398,249832.35428414188],"text":["date: 2018-01-01<br />.value_smooth: 115919.7","date: 2018-02-01<br />.value_smooth: 113831.1","date: 2018-03-01<br />.value_smooth: 111922.7","date: 2018-04-01<br />.value_smooth: 110192.6","date: 2018-05-01<br />.value_smooth: 108638.7","date: 2018-06-01<br />.value_smooth: 107259.0","date: 2018-07-01<br />.value_smooth: 106051.4","date: 2018-08-01<br />.value_smooth: 105014.0","date: 2018-09-01<br />.value_smooth: 104144.7","date: 2018-10-01<br />.value_smooth: 103441.5","date: 2018-11-01<br />.value_smooth: 102906.9","date: 2018-12-01<br />.value_smooth: 102547.7","date: 2019-01-01<br />.value_smooth: 102368.0","date: 2019-02-01<br />.value_smooth: 102372.3","date: 2019-03-01<br />.value_smooth: 102564.8","date: 2019-04-01<br />.value_smooth: 102949.8","date: 2019-05-01<br />.value_smooth: 103531.5","date: 2019-06-01<br />.value_smooth: 104314.2","date: 2019-07-01<br />.value_smooth: 105302.3","date: 2019-08-01<br />.value_smooth: 106374.3","date: 2019-09-01<br />.value_smooth: 107443.1","date: 2019-10-01<br />.value_smooth: 108564.5","date: 2019-11-01<br />.value_smooth: 109794.3","date: 2019-12-01<br />.value_smooth: 111188.3","date: 2020-01-01<br />.value_smooth: 112802.1","date: 2020-02-01<br />.value_smooth: 114691.6","date: 2020-03-01<br />.value_smooth: 116912.6","date: 2020-04-01<br />.value_smooth: 119520.7","date: 2020-05-01<br />.value_smooth: 122888.6","date: 2020-06-01<br />.value_smooth: 127195.6","date: 2020-07-01<br />.value_smooth: 132207.5","date: 2020-08-01<br />.value_smooth: 137690.1","date: 2020-09-01<br />.value_smooth: 143409.3","date: 2020-10-01<br />.value_smooth: 149130.9","date: 2020-11-01<br />.value_smooth: 154620.8","date: 2020-12-01<br />.value_smooth: 159644.9","date: 2021-01-01<br />.value_smooth: 163968.8","date: 2021-02-01<br />.value_smooth: 168078.1","date: 2021-03-01<br />.value_smooth: 172525.5","date: 2021-04-01<br />.value_smooth: 177177.9","date: 2021-05-01<br />.value_smooth: 181902.3","date: 2021-06-01<br />.value_smooth: 186565.6","date: 2021-07-01<br />.value_smooth: 191034.8","date: 2021-08-01<br />.value_smooth: 195176.7","date: 2021-09-01<br />.value_smooth: 198858.5","date: 2021-10-01<br />.value_smooth: 201946.9","date: 2021-11-01<br />.value_smooth: 204392.0","date: 2021-12-01<br />.value_smooth: 206317.2","date: 2022-01-01<br />.value_smooth: 207849.9","date: 2022-02-01<br />.value_smooth: 209117.3","date: 2022-03-01<br />.value_smooth: 210246.9","date: 2022-04-01<br />.value_smooth: 211365.7","date: 2022-05-01<br />.value_smooth: 212601.3","date: 2022-06-01<br />.value_smooth: 214080.7","date: 2022-07-01<br />.value_smooth: 215931.5","date: 2022-08-01<br />.value_smooth: 217948.6","date: 2022-09-01<br />.value_smooth: 219858.2","date: 2022-10-01<br />.value_smooth: 221684.1","date: 2022-11-01<br />.value_smooth: 223450.3","date: 2022-12-01<br />.value_smooth: 225180.5","date: 2023-01-01<br />.value_smooth: 226898.7","date: 2023-02-01<br />.value_smooth: 228628.7","date: 2023-03-01<br />.value_smooth: 230394.3","date: 2023-04-01<br />.value_smooth: 232219.5","date: 2023-05-01<br />.value_smooth: 234103.1","date: 2023-06-01<br />.value_smooth: 236022.9","date: 2023-07-01<br />.value_smooth: 237971.2","date: 2023-08-01<br />.value_smooth: 239940.4","date: 2023-09-01<br />.value_smooth: 241922.8","date: 2023-10-01<br />.value_smooth: 243910.9","date: 2023-11-01<br />.value_smooth: 245896.9","date: 2023-12-01<br />.value_smooth: 247873.3","date: 2024-01-01<br />.value_smooth: 249832.4"],"type":"scatter","mode":"lines","line":{"width":3.7795275590551185,"color":"rgba(51,102,255,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":43.762557077625573,"r":7.3059360730593621,"b":25.57077625570777,"l":60.639269406392714},"plot_bgcolor":"rgba(255,255,255,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(44,62,80,1)","family":"","size":14.611872146118724},"title":{"text":"Product Y Sales Trend over Time (Anomalies Adjusted)","font":{"color":"rgba(44,62,80,1)","family":"","size":17.534246575342465},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"date","autorange":true,"range":["2017-09-13","2024-04-19"],"tickmode":"auto","ticktext":["2018","2020","2022","2024"],"tickvals":[17532,18262,18993,19723],"categoryorder":"array","categoryarray":["2018","2020","2022","2024"],"nticks":null,"ticks":"outside","tickcolor":"rgba(204,204,204,1)","ticklen":3.6529680365296811,"tickwidth":0.22139200221392005,"showticklabels":true,"tickfont":{"color":"rgba(44,62,80,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(204,204,204,1)","gridwidth":0.22139200221392005,"zeroline":false,"anchor":"y","title":{"text":"","font":{"color":"rgba(44,62,80,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":true,"range":[9831.1500000000069,336791.84999999998],"tickmode":"auto","ticktext":["100000","200000","300000"],"tickvals":[100000,200000,300000],"categoryorder":"array","categoryarray":["100000","200000","300000"],"nticks":null,"ticks":"outside","tickcolor":"rgba(204,204,204,1)","ticklen":3.6529680365296811,"tickwidth":0.22139200221392005,"showticklabels":true,"tickfont":{"color":"rgba(44,62,80,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(204,204,204,1)","gridwidth":0.22139200221392005,"zeroline":false,"anchor":"x","title":{"text":"Sales in USD","font":{"color":"rgba(44,62,80,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(44,62,80,1)","width":0.33208800332088001,"linetype":"solid"},"yref":"paper","xref":"paper","layer":"below","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.8897637795275593,"font":{"color":"rgba(44,62,80,1)","family":"","size":11.68949771689498}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"260f6bf2753d":{"x":{},"y":{},"type":"scatter"},"260f7aef2f28":{"x":{},"y":{}}},"cur_data":"260f6bf2753d","visdat":{"260f6bf2753d":["function (y) ","x"],"260f7aef2f28":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<hr>
</section>
<section id="traintest-splitting-for-time-series" class="level2" data-number="5">
<h2 data-number="5" class="anchored" data-anchor-id="traintest-splitting-for-time-series"><span class="header-section-number">5</span> Train–test splitting for time series</h2>
<p>Before training any forecasting models, we split the cleaned sales data into <strong>training and testing sets using a temporal split</strong>. Unlike random sampling, time series data must respect chronological order to avoid data leakage. In this setup, the model is trained on all historical observations up to a cutoff point and evaluated on the <strong>most recent 12 months</strong>, simulating a real-world forecasting scenario. The cumulative training window allows the model to learn from an expanding history over time, while the visualization of the cross-validation plan helps confirm that the split is both temporally sound and aligned with how forecasts will be used in practice.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------------------------------------------------------------------</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Train / test split (temporal holdout)</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="co"># - We keep time order intact to avoid leakage.</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="co"># - The last 12 months are held out for testing.</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="co"># - cumulative = TRUE uses an expanding training window.</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------------------------------------------------------------------</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>sales_split <span class="ot">&lt;-</span> cleaned_sales_df <span class="sc">|&gt;</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">time_series_split</span>(</span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">date_var    =</span> date,</span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">assess      =</span> <span class="st">"12 months"</span>,</span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">cumulative  =</span> <span class="cn">TRUE</span></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a><span class="co"># View the split summary (prints the rsample split object)</span></span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>sales_split</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;Analysis/Assess/Total&gt;
&lt;61/12/73&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------------------------------------------------------------------</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualize the split as a CV plan (train vs test over time)</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------------------------------------------------------------------</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>sales_split <span class="sc">|&gt;</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tk_time_series_cv_plan</span>() <span class="sc">|&gt;</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_time_series_cv_plan</span>(</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">.date_var =</span> date,</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">.value    =</span> value,</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">.y_lab    =</span> <span class="st">"Sales in USD"</span>,</span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">.title    =</span> <span class="st">"Train/Test Temporal Split (12-Month Holdout)"</span></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-38dce95d612c0fb3c9ac" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-38dce95d612c0fb3c9ac">{"x":{"data":[{"x":["2018-01-01","2018-02-01","2018-03-01","2018-04-01","2018-05-01","2018-06-01","2018-07-01","2018-08-01","2018-09-01","2018-10-01","2018-11-01","2018-12-01","2019-01-01","2019-02-01","2019-03-01","2019-04-01","2019-05-01","2019-06-01","2019-07-01","2019-08-01","2019-09-01","2019-10-01","2019-11-01","2019-12-01","2020-01-01","2020-02-01","2020-03-01","2020-04-01","2020-05-01","2020-06-01","2020-07-01","2020-08-01","2020-09-01","2020-10-01","2020-11-01","2020-12-01","2021-01-01","2021-02-01","2021-03-01","2021-04-01","2021-05-01","2021-06-01","2021-07-01","2021-08-01","2021-09-01","2021-10-01","2021-11-01","2021-12-01","2022-01-01","2022-02-01","2022-03-01","2022-04-01","2022-05-01","2022-06-01","2022-07-01","2022-08-01","2022-09-01","2022-10-01","2022-11-01","2022-12-01","2023-01-01"],"y":[132001,103489,116015,69447,100724,92142,76744.118397692204,119214,98478,81370,155923,153946,173323,109364,172609,24693.000000000007,79815,53377,158612,106772,157821,73594,66863.807531436003,121287,145652,144640.30327087396,83426.916425788324,49230,88628,70484,146170,110401,185050,182977,223930,182977,121287,133210,227041,199672.29019490481,131655,147726,223231,188161,188161,225486,186606,223930,291841,228078,243111.00000000003,200084,119786.32692020304,149279,273178,195418,175201,232743,244666,240519,227676],"text":["date: 2018-01-01<br />.value: 132001.00<br />.color_mod: training<br />.color_mod: training","date: 2018-02-01<br />.value: 103489.00<br />.color_mod: training<br />.color_mod: training","date: 2018-03-01<br />.value: 116015.00<br />.color_mod: training<br />.color_mod: training","date: 2018-04-01<br />.value:  69447.00<br />.color_mod: training<br />.color_mod: training","date: 2018-05-01<br />.value: 100724.00<br />.color_mod: training<br />.color_mod: training","date: 2018-06-01<br />.value:  92142.00<br />.color_mod: training<br />.color_mod: training","date: 2018-07-01<br />.value:  76744.12<br />.color_mod: training<br />.color_mod: training","date: 2018-08-01<br />.value: 119214.00<br />.color_mod: training<br />.color_mod: training","date: 2018-09-01<br />.value:  98478.00<br />.color_mod: training<br />.color_mod: training","date: 2018-10-01<br />.value:  81370.00<br />.color_mod: training<br />.color_mod: training","date: 2018-11-01<br />.value: 155923.00<br />.color_mod: training<br />.color_mod: training","date: 2018-12-01<br />.value: 153946.00<br />.color_mod: training<br />.color_mod: training","date: 2019-01-01<br />.value: 173323.00<br />.color_mod: training<br />.color_mod: training","date: 2019-02-01<br />.value: 109364.00<br />.color_mod: training<br />.color_mod: training","date: 2019-03-01<br />.value: 172609.00<br />.color_mod: training<br />.color_mod: training","date: 2019-04-01<br />.value:  24693.00<br />.color_mod: training<br />.color_mod: training","date: 2019-05-01<br />.value:  79815.00<br />.color_mod: training<br />.color_mod: training","date: 2019-06-01<br />.value:  53377.00<br />.color_mod: training<br />.color_mod: training","date: 2019-07-01<br />.value: 158612.00<br />.color_mod: training<br />.color_mod: training","date: 2019-08-01<br />.value: 106772.00<br />.color_mod: training<br />.color_mod: training","date: 2019-09-01<br />.value: 157821.00<br />.color_mod: training<br />.color_mod: training","date: 2019-10-01<br />.value:  73594.00<br />.color_mod: training<br />.color_mod: training","date: 2019-11-01<br />.value:  66863.81<br />.color_mod: training<br />.color_mod: training","date: 2019-12-01<br />.value: 121287.00<br />.color_mod: training<br />.color_mod: training","date: 2020-01-01<br />.value: 145652.00<br />.color_mod: training<br />.color_mod: training","date: 2020-02-01<br />.value: 144640.30<br />.color_mod: training<br />.color_mod: training","date: 2020-03-01<br />.value:  83426.92<br />.color_mod: training<br />.color_mod: training","date: 2020-04-01<br />.value:  49230.00<br />.color_mod: training<br />.color_mod: training","date: 2020-05-01<br />.value:  88628.00<br />.color_mod: training<br />.color_mod: training","date: 2020-06-01<br />.value:  70484.00<br />.color_mod: training<br />.color_mod: training","date: 2020-07-01<br />.value: 146170.00<br />.color_mod: training<br />.color_mod: training","date: 2020-08-01<br />.value: 110401.00<br />.color_mod: training<br />.color_mod: training","date: 2020-09-01<br />.value: 185050.00<br />.color_mod: training<br />.color_mod: training","date: 2020-10-01<br />.value: 182977.00<br />.color_mod: training<br />.color_mod: training","date: 2020-11-01<br />.value: 223930.00<br />.color_mod: training<br />.color_mod: training","date: 2020-12-01<br />.value: 182977.00<br />.color_mod: training<br />.color_mod: training","date: 2021-01-01<br />.value: 121287.00<br />.color_mod: training<br />.color_mod: training","date: 2021-02-01<br />.value: 133210.00<br />.color_mod: training<br />.color_mod: training","date: 2021-03-01<br />.value: 227041.00<br />.color_mod: training<br />.color_mod: training","date: 2021-04-01<br />.value: 199672.29<br />.color_mod: training<br />.color_mod: training","date: 2021-05-01<br />.value: 131655.00<br />.color_mod: training<br />.color_mod: training","date: 2021-06-01<br />.value: 147726.00<br />.color_mod: training<br />.color_mod: training","date: 2021-07-01<br />.value: 223231.00<br />.color_mod: training<br />.color_mod: training","date: 2021-08-01<br />.value: 188161.00<br />.color_mod: training<br />.color_mod: training","date: 2021-09-01<br />.value: 188161.00<br />.color_mod: training<br />.color_mod: training","date: 2021-10-01<br />.value: 225486.00<br />.color_mod: training<br />.color_mod: training","date: 2021-11-01<br />.value: 186606.00<br />.color_mod: training<br />.color_mod: training","date: 2021-12-01<br />.value: 223930.00<br />.color_mod: training<br />.color_mod: training","date: 2022-01-01<br />.value: 291841.00<br />.color_mod: training<br />.color_mod: training","date: 2022-02-01<br />.value: 228078.00<br />.color_mod: training<br />.color_mod: training","date: 2022-03-01<br />.value: 243111.00<br />.color_mod: training<br />.color_mod: training","date: 2022-04-01<br />.value: 200084.00<br />.color_mod: training<br />.color_mod: training","date: 2022-05-01<br />.value: 119786.33<br />.color_mod: training<br />.color_mod: training","date: 2022-06-01<br />.value: 149279.00<br />.color_mod: training<br />.color_mod: training","date: 2022-07-01<br />.value: 273178.00<br />.color_mod: training<br />.color_mod: training","date: 2022-08-01<br />.value: 195418.00<br />.color_mod: training<br />.color_mod: training","date: 2022-09-01<br />.value: 175201.00<br />.color_mod: training<br />.color_mod: training","date: 2022-10-01<br />.value: 232743.00<br />.color_mod: training<br />.color_mod: training","date: 2022-11-01<br />.value: 244666.00<br />.color_mod: training<br />.color_mod: training","date: 2022-12-01<br />.value: 240519.00<br />.color_mod: training<br />.color_mod: training","date: 2023-01-01<br />.value: 227676.00<br />.color_mod: training<br />.color_mod: training"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(44,62,80,1)","dash":"solid"},"hoveron":"points","name":"training","legendgroup":"training","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":["2023-02-01","2023-03-01","2023-04-01","2023-05-01","2023-06-01","2023-07-01","2023-08-01","2023-09-01","2023-10-01","2023-11-01","2023-12-01","2024-01-01"],"y":[151873,303764,229633,147207,185196,233780,262292,229633,175201,320383.38865746366,321930,243165],"text":["date: 2023-02-01<br />.value: 151873.00<br />.color_mod: testing<br />.color_mod: testing","date: 2023-03-01<br />.value: 303764.00<br />.color_mod: testing<br />.color_mod: testing","date: 2023-04-01<br />.value: 229633.00<br />.color_mod: testing<br />.color_mod: testing","date: 2023-05-01<br />.value: 147207.00<br />.color_mod: testing<br />.color_mod: testing","date: 2023-06-01<br />.value: 185196.00<br />.color_mod: testing<br />.color_mod: testing","date: 2023-07-01<br />.value: 233780.00<br />.color_mod: testing<br />.color_mod: testing","date: 2023-08-01<br />.value: 262292.00<br />.color_mod: testing<br />.color_mod: testing","date: 2023-09-01<br />.value: 229633.00<br />.color_mod: testing<br />.color_mod: testing","date: 2023-10-01<br />.value: 175201.00<br />.color_mod: testing<br />.color_mod: testing","date: 2023-11-01<br />.value: 320383.39<br />.color_mod: testing<br />.color_mod: testing","date: 2023-12-01<br />.value: 321930.00<br />.color_mod: testing<br />.color_mod: testing","date: 2024-01-01<br />.value: 243165.00<br />.color_mod: testing<br />.color_mod: testing"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(227,26,28,1)","dash":"solid"},"hoveron":"points","name":"testing","legendgroup":"testing","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":55.452054794520549,"r":7.3059360730593621,"b":25.57077625570777,"l":60.639269406392714},"plot_bgcolor":"rgba(255,255,255,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(44,62,80,1)","family":"","size":14.611872146118724},"title":{"text":"Train/Test Temporal Split (12-Month Holdout)","font":{"color":"rgba(44,62,80,1)","family":"","size":17.534246575342465},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"date","autorange":true,"range":["2017-09-13","2024-04-19"],"tickmode":"auto","ticktext":["2018","2020","2022","2024"],"tickvals":[17532,18262,18993,19723],"categoryorder":"array","categoryarray":["2018","2020","2022","2024"],"nticks":null,"ticks":"outside","tickcolor":"rgba(204,204,204,1)","ticklen":3.6529680365296811,"tickwidth":0.22139200221392005,"showticklabels":true,"tickfont":{"color":"rgba(44,62,80,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(204,204,204,1)","gridwidth":0.22139200221392005,"zeroline":false,"anchor":"y","title":"","hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":true,"range":[9831.1500000000069,336791.84999999998],"tickmode":"auto","ticktext":["100000","200000","300000"],"tickvals":[100000,200000,300000],"categoryorder":"array","categoryarray":["100000","200000","300000"],"nticks":null,"ticks":"outside","tickcolor":"rgba(204,204,204,1)","ticklen":3.6529680365296811,"tickwidth":0.22139200221392005,"showticklabels":true,"tickfont":{"color":"rgba(44,62,80,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(204,204,204,1)","gridwidth":0.22139200221392005,"zeroline":false,"anchor":"x","title":"","hoverformat":".2f"},"annotations":[{"text":"Sales in USD","x":0,"y":0.5,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(44,62,80,1)","family":"","size":14.611872146118724},"xref":"paper","yref":"paper","textangle":-90,"xanchor":"right","yanchor":"center","annotationType":"axis","xshift":-45.296803652968052},{"text":"Slice1","x":0.5,"y":1,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(255,255,255,1)","family":"","size":11.68949771689498},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"}],"shapes":[{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(44,62,80,1)","width":0.33208800332088001,"linetype":"solid"},"yref":"paper","xref":"paper","layer":"below","x0":0,"x1":1,"y0":0,"y1":1},{"type":"rect","fillcolor":"rgba(44,62,80,1)","line":{"color":"rgba(44,62,80,1)","width":0.66417600664176002,"linetype":"solid"},"yref":"paper","xref":"paper","layer":"below","x0":0,"x1":1,"y0":0,"y1":24.973017849730184,"yanchor":1,"ysizemode":"pixel"}],"showlegend":true,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.8897637795275593,"font":{"color":"rgba(44,62,80,1)","family":"","size":11.68949771689498},"title":{"text":"Legend","font":{"color":"rgba(44,62,80,1)","family":"","size":14.611872146118724}}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"260f50525b2c":{"x":{},"y":{},"colour":{},"type":"scatter"}},"cur_data":"260f50525b2c","visdat":{"260f50525b2c":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<hr>
</section>
<section id="feature-engineering-for-time-series-modeling" class="level2" data-number="6">
<h2 data-number="6" class="anchored" data-anchor-id="feature-engineering-for-time-series-modeling"><span class="header-section-number">6</span> Feature engineering for time series modeling</h2>
<p>To enable machine learning models to learn from temporal patterns, we transform the raw date information into meaningful numerical features using a preprocessing recipe. The time series signature expands the date column into multiple components such as trend, seasonality, and calendar-based signals, which are then cleaned and standardized for modeling. Redundant and zero-variance features are removed to reduce noise, while categorical time features are one-hot encoded to ensure compatibility with most machine learning algorithms. This structured feature engineering step allows models to capture complex time-dependent behavior beyond what raw timestamps alone can provide.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------------------------------------------------------------------</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Feature engineering (tidymodels recipe)</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="co"># - Convert the date into rich time-based features (trend + seasonality signals)</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="co"># - Remove the original date column to avoid leakage / redundancy</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="co"># - Normalize the numeric time index for ML models that benefit from scaling</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a><span class="co"># - Drop zero-variance predictors (features that never change)</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a><span class="co"># - One-hot encode categorical time features (month labels, weekdays, etc.)</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------------------------------------------------------------------</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>sales_recipe <span class="ot">&lt;-</span> <span class="fu">recipe</span>(value <span class="sc">~</span> date, <span class="at">data =</span> <span class="fu">training</span>(sales_split)) <span class="sc">|&gt;</span></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_timeseries_signature</span>(date) <span class="sc">|&gt;</span></span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_rm</span>(date) <span class="sc">|&gt;</span>                </span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_normalize</span>(date_index.num) <span class="sc">|&gt;</span></span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_zv</span>(<span class="fu">all_predictors</span>()) <span class="sc">|&gt;</span></span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_dummy</span>(<span class="fu">all_nominal_predictors</span>(), <span class="at">one_hot =</span> <span class="cn">TRUE</span>)</span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Inspect the recipe steps</span></span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a>sales_recipe</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code></code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>── Recipe ──────────────────────────────────────────────────────────────────────</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code></code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>── Inputs </code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Number of variables by role</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>outcome:   1
predictor: 1</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code></code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>── Operations </code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• Timeseries signature features from: date</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• Variables removed: date</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• Centering and scaling for: date_index.num</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• Zero variance filter on: all_predictors()</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• Dummy variables from: all_nominal_predictors()</code></pre>
</div>
</div>
<hr>
</section>
<section id="model-specification" class="level2" data-number="7">
<h2 data-number="7" class="anchored" data-anchor-id="model-specification"><span class="header-section-number">7</span> Model Specification</h2>
<p>With our time-based features ready, the next step is to <strong>define the models we want to try</strong>. Instead of relying on a single configuration, we evaluate multiple <strong>XGBoost</strong> models by varying key hyperparameters such as <strong>learning rate, tree depth, and regularization</strong> strength.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>XGBoost (Extreme Gradient Boosting) is a high-performance machine learning algorithm that builds powerful predictive models by combining many decision trees in a sequential, error-correcting manner. It is widely used for regression and classification tasks because it efficiently captures complex nonlinear patterns while offering strong accuracy, scalability, and regularization to prevent overfitting.</p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------------------------------------------------------------------</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Model specification (XGBoost regression)</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------------------------------------------------------------------</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Hyperparameter grid (learn_rate + depth + min_n + loss_reduction)</span></span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>xgb_param_grid <span class="ot">&lt;-</span> tidyr<span class="sc">::</span><span class="fu">crossing</span>(</span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">learn_rate     =</span> <span class="fu">c</span>(<span class="fl">0.001</span>, <span class="fl">0.01</span>, <span class="fl">0.1</span>, <span class="fl">0.2</span>, <span class="fl">0.35</span>),</span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">tree_depth     =</span> <span class="fu">c</span>(<span class="dv">2</span>L, <span class="dv">4</span>L, <span class="dv">6</span>L, <span class="dv">8</span>L),</span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">min_n          =</span> <span class="fu">c</span>(<span class="dv">2</span>L, <span class="dv">5</span>L, <span class="dv">10</span>L, <span class="dv">20</span>L),</span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">loss_reduction =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.01</span>, <span class="fl">0.1</span>, <span class="dv">1</span>)</span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb27-13"><a href="#cb27-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-14"><a href="#cb27-14" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------------------------------------------------------------------</span></span>
<span id="cb27-15"><a href="#cb27-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Create model specifications for each hyperparameter combination</span></span>
<span id="cb27-16"><a href="#cb27-16" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------------------------------------------------------------------</span></span>
<span id="cb27-17"><a href="#cb27-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-18"><a href="#cb27-18" aria-hidden="true" tabindex="-1"></a>xgb_spec_tbl <span class="ot">&lt;-</span> <span class="fu">create_model_grid</span>(</span>
<span id="cb27-19"><a href="#cb27-19" aria-hidden="true" tabindex="-1"></a>  <span class="at">grid         =</span> xgb_param_grid,</span>
<span id="cb27-20"><a href="#cb27-20" aria-hidden="true" tabindex="-1"></a>  <span class="at">f_model_spec =</span> boost_tree,</span>
<span id="cb27-21"><a href="#cb27-21" aria-hidden="true" tabindex="-1"></a>  <span class="at">engine_name  =</span> <span class="st">"xgboost"</span>,</span>
<span id="cb27-22"><a href="#cb27-22" aria-hidden="true" tabindex="-1"></a>  <span class="at">mode         =</span> <span class="st">"regression"</span></span>
<span id="cb27-23"><a href="#cb27-23" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb27-24"><a href="#cb27-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-25"><a href="#cb27-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Review the model specification table (includes parameters + model objects)</span></span>
<span id="cb27-26"><a href="#cb27-26" aria-hidden="true" tabindex="-1"></a>xgb_spec_tbl</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["learn_rate"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["tree_depth"],"name":[2],"type":["int"],"align":["right"]},{"label":["min_n"],"name":[3],"type":["int"],"align":["right"]},{"label":["loss_reduction"],"name":[4],"type":["dbl"],"align":["right"]},{"label":[".models"],"name":[5],"type":["list"],"align":["right"]}],"data":[{"1":"0.001","2":"2","3":"2","4":"0.00","5":"<S3: boost_tree>"},{"1":"0.001","2":"2","3":"2","4":"0.01","5":"<S3: boost_tree>"},{"1":"0.001","2":"2","3":"2","4":"0.10","5":"<S3: boost_tree>"},{"1":"0.001","2":"2","3":"2","4":"1.00","5":"<S3: boost_tree>"},{"1":"0.001","2":"2","3":"5","4":"0.00","5":"<S3: boost_tree>"},{"1":"0.001","2":"2","3":"5","4":"0.01","5":"<S3: boost_tree>"},{"1":"0.001","2":"2","3":"5","4":"0.10","5":"<S3: boost_tree>"},{"1":"0.001","2":"2","3":"5","4":"1.00","5":"<S3: boost_tree>"},{"1":"0.001","2":"2","3":"10","4":"0.00","5":"<S3: boost_tree>"},{"1":"0.001","2":"2","3":"10","4":"0.01","5":"<S3: boost_tree>"},{"1":"0.001","2":"2","3":"10","4":"0.10","5":"<S3: boost_tree>"},{"1":"0.001","2":"2","3":"10","4":"1.00","5":"<S3: boost_tree>"},{"1":"0.001","2":"2","3":"20","4":"0.00","5":"<S3: boost_tree>"},{"1":"0.001","2":"2","3":"20","4":"0.01","5":"<S3: boost_tree>"},{"1":"0.001","2":"2","3":"20","4":"0.10","5":"<S3: boost_tree>"},{"1":"0.001","2":"2","3":"20","4":"1.00","5":"<S3: boost_tree>"},{"1":"0.001","2":"4","3":"2","4":"0.00","5":"<S3: boost_tree>"},{"1":"0.001","2":"4","3":"2","4":"0.01","5":"<S3: boost_tree>"},{"1":"0.001","2":"4","3":"2","4":"0.10","5":"<S3: boost_tree>"},{"1":"0.001","2":"4","3":"2","4":"1.00","5":"<S3: boost_tree>"},{"1":"0.001","2":"4","3":"5","4":"0.00","5":"<S3: boost_tree>"},{"1":"0.001","2":"4","3":"5","4":"0.01","5":"<S3: boost_tree>"},{"1":"0.001","2":"4","3":"5","4":"0.10","5":"<S3: boost_tree>"},{"1":"0.001","2":"4","3":"5","4":"1.00","5":"<S3: boost_tree>"},{"1":"0.001","2":"4","3":"10","4":"0.00","5":"<S3: boost_tree>"},{"1":"0.001","2":"4","3":"10","4":"0.01","5":"<S3: boost_tree>"},{"1":"0.001","2":"4","3":"10","4":"0.10","5":"<S3: boost_tree>"},{"1":"0.001","2":"4","3":"10","4":"1.00","5":"<S3: boost_tree>"},{"1":"0.001","2":"4","3":"20","4":"0.00","5":"<S3: boost_tree>"},{"1":"0.001","2":"4","3":"20","4":"0.01","5":"<S3: boost_tree>"},{"1":"0.001","2":"4","3":"20","4":"0.10","5":"<S3: boost_tree>"},{"1":"0.001","2":"4","3":"20","4":"1.00","5":"<S3: boost_tree>"},{"1":"0.001","2":"6","3":"2","4":"0.00","5":"<S3: boost_tree>"},{"1":"0.001","2":"6","3":"2","4":"0.01","5":"<S3: boost_tree>"},{"1":"0.001","2":"6","3":"2","4":"0.10","5":"<S3: boost_tree>"},{"1":"0.001","2":"6","3":"2","4":"1.00","5":"<S3: boost_tree>"},{"1":"0.001","2":"6","3":"5","4":"0.00","5":"<S3: boost_tree>"},{"1":"0.001","2":"6","3":"5","4":"0.01","5":"<S3: boost_tree>"},{"1":"0.001","2":"6","3":"5","4":"0.10","5":"<S3: boost_tree>"},{"1":"0.001","2":"6","3":"5","4":"1.00","5":"<S3: boost_tree>"},{"1":"0.001","2":"6","3":"10","4":"0.00","5":"<S3: boost_tree>"},{"1":"0.001","2":"6","3":"10","4":"0.01","5":"<S3: boost_tree>"},{"1":"0.001","2":"6","3":"10","4":"0.10","5":"<S3: boost_tree>"},{"1":"0.001","2":"6","3":"10","4":"1.00","5":"<S3: boost_tree>"},{"1":"0.001","2":"6","3":"20","4":"0.00","5":"<S3: boost_tree>"},{"1":"0.001","2":"6","3":"20","4":"0.01","5":"<S3: boost_tree>"},{"1":"0.001","2":"6","3":"20","4":"0.10","5":"<S3: boost_tree>"},{"1":"0.001","2":"6","3":"20","4":"1.00","5":"<S3: boost_tree>"},{"1":"0.001","2":"8","3":"2","4":"0.00","5":"<S3: boost_tree>"},{"1":"0.001","2":"8","3":"2","4":"0.01","5":"<S3: boost_tree>"},{"1":"0.001","2":"8","3":"2","4":"0.10","5":"<S3: boost_tree>"},{"1":"0.001","2":"8","3":"2","4":"1.00","5":"<S3: boost_tree>"},{"1":"0.001","2":"8","3":"5","4":"0.00","5":"<S3: boost_tree>"},{"1":"0.001","2":"8","3":"5","4":"0.01","5":"<S3: boost_tree>"},{"1":"0.001","2":"8","3":"5","4":"0.10","5":"<S3: boost_tree>"},{"1":"0.001","2":"8","3":"5","4":"1.00","5":"<S3: boost_tree>"},{"1":"0.001","2":"8","3":"10","4":"0.00","5":"<S3: boost_tree>"},{"1":"0.001","2":"8","3":"10","4":"0.01","5":"<S3: boost_tree>"},{"1":"0.001","2":"8","3":"10","4":"0.10","5":"<S3: boost_tree>"},{"1":"0.001","2":"8","3":"10","4":"1.00","5":"<S3: boost_tree>"},{"1":"0.001","2":"8","3":"20","4":"0.00","5":"<S3: boost_tree>"},{"1":"0.001","2":"8","3":"20","4":"0.01","5":"<S3: boost_tree>"},{"1":"0.001","2":"8","3":"20","4":"0.10","5":"<S3: boost_tree>"},{"1":"0.001","2":"8","3":"20","4":"1.00","5":"<S3: boost_tree>"},{"1":"0.010","2":"2","3":"2","4":"0.00","5":"<S3: boost_tree>"},{"1":"0.010","2":"2","3":"2","4":"0.01","5":"<S3: boost_tree>"},{"1":"0.010","2":"2","3":"2","4":"0.10","5":"<S3: boost_tree>"},{"1":"0.010","2":"2","3":"2","4":"1.00","5":"<S3: boost_tree>"},{"1":"0.010","2":"2","3":"5","4":"0.00","5":"<S3: boost_tree>"},{"1":"0.010","2":"2","3":"5","4":"0.01","5":"<S3: boost_tree>"},{"1":"0.010","2":"2","3":"5","4":"0.10","5":"<S3: boost_tree>"},{"1":"0.010","2":"2","3":"5","4":"1.00","5":"<S3: boost_tree>"},{"1":"0.010","2":"2","3":"10","4":"0.00","5":"<S3: boost_tree>"},{"1":"0.010","2":"2","3":"10","4":"0.01","5":"<S3: boost_tree>"},{"1":"0.010","2":"2","3":"10","4":"0.10","5":"<S3: boost_tree>"},{"1":"0.010","2":"2","3":"10","4":"1.00","5":"<S3: boost_tree>"},{"1":"0.010","2":"2","3":"20","4":"0.00","5":"<S3: boost_tree>"},{"1":"0.010","2":"2","3":"20","4":"0.01","5":"<S3: boost_tree>"},{"1":"0.010","2":"2","3":"20","4":"0.10","5":"<S3: boost_tree>"},{"1":"0.010","2":"2","3":"20","4":"1.00","5":"<S3: boost_tree>"},{"1":"0.010","2":"4","3":"2","4":"0.00","5":"<S3: boost_tree>"},{"1":"0.010","2":"4","3":"2","4":"0.01","5":"<S3: boost_tree>"},{"1":"0.010","2":"4","3":"2","4":"0.10","5":"<S3: boost_tree>"},{"1":"0.010","2":"4","3":"2","4":"1.00","5":"<S3: boost_tree>"},{"1":"0.010","2":"4","3":"5","4":"0.00","5":"<S3: boost_tree>"},{"1":"0.010","2":"4","3":"5","4":"0.01","5":"<S3: boost_tree>"},{"1":"0.010","2":"4","3":"5","4":"0.10","5":"<S3: boost_tree>"},{"1":"0.010","2":"4","3":"5","4":"1.00","5":"<S3: boost_tree>"},{"1":"0.010","2":"4","3":"10","4":"0.00","5":"<S3: boost_tree>"},{"1":"0.010","2":"4","3":"10","4":"0.01","5":"<S3: boost_tree>"},{"1":"0.010","2":"4","3":"10","4":"0.10","5":"<S3: boost_tree>"},{"1":"0.010","2":"4","3":"10","4":"1.00","5":"<S3: boost_tree>"},{"1":"0.010","2":"4","3":"20","4":"0.00","5":"<S3: boost_tree>"},{"1":"0.010","2":"4","3":"20","4":"0.01","5":"<S3: boost_tree>"},{"1":"0.010","2":"4","3":"20","4":"0.10","5":"<S3: boost_tree>"},{"1":"0.010","2":"4","3":"20","4":"1.00","5":"<S3: boost_tree>"},{"1":"0.010","2":"6","3":"2","4":"0.00","5":"<S3: boost_tree>"},{"1":"0.010","2":"6","3":"2","4":"0.01","5":"<S3: boost_tree>"},{"1":"0.010","2":"6","3":"2","4":"0.10","5":"<S3: boost_tree>"},{"1":"0.010","2":"6","3":"2","4":"1.00","5":"<S3: boost_tree>"},{"1":"0.010","2":"6","3":"5","4":"0.00","5":"<S3: boost_tree>"},{"1":"0.010","2":"6","3":"5","4":"0.01","5":"<S3: boost_tree>"},{"1":"0.010","2":"6","3":"5","4":"0.10","5":"<S3: boost_tree>"},{"1":"0.010","2":"6","3":"5","4":"1.00","5":"<S3: boost_tree>"},{"1":"0.010","2":"6","3":"10","4":"0.00","5":"<S3: boost_tree>"},{"1":"0.010","2":"6","3":"10","4":"0.01","5":"<S3: boost_tree>"},{"1":"0.010","2":"6","3":"10","4":"0.10","5":"<S3: boost_tree>"},{"1":"0.010","2":"6","3":"10","4":"1.00","5":"<S3: boost_tree>"},{"1":"0.010","2":"6","3":"20","4":"0.00","5":"<S3: boost_tree>"},{"1":"0.010","2":"6","3":"20","4":"0.01","5":"<S3: boost_tree>"},{"1":"0.010","2":"6","3":"20","4":"0.10","5":"<S3: boost_tree>"},{"1":"0.010","2":"6","3":"20","4":"1.00","5":"<S3: boost_tree>"},{"1":"0.010","2":"8","3":"2","4":"0.00","5":"<S3: boost_tree>"},{"1":"0.010","2":"8","3":"2","4":"0.01","5":"<S3: boost_tree>"},{"1":"0.010","2":"8","3":"2","4":"0.10","5":"<S3: boost_tree>"},{"1":"0.010","2":"8","3":"2","4":"1.00","5":"<S3: boost_tree>"},{"1":"0.010","2":"8","3":"5","4":"0.00","5":"<S3: boost_tree>"},{"1":"0.010","2":"8","3":"5","4":"0.01","5":"<S3: boost_tree>"},{"1":"0.010","2":"8","3":"5","4":"0.10","5":"<S3: boost_tree>"},{"1":"0.010","2":"8","3":"5","4":"1.00","5":"<S3: boost_tree>"},{"1":"0.010","2":"8","3":"10","4":"0.00","5":"<S3: boost_tree>"},{"1":"0.010","2":"8","3":"10","4":"0.01","5":"<S3: boost_tree>"},{"1":"0.010","2":"8","3":"10","4":"0.10","5":"<S3: boost_tree>"},{"1":"0.010","2":"8","3":"10","4":"1.00","5":"<S3: boost_tree>"},{"1":"0.010","2":"8","3":"20","4":"0.00","5":"<S3: boost_tree>"},{"1":"0.010","2":"8","3":"20","4":"0.01","5":"<S3: boost_tree>"},{"1":"0.010","2":"8","3":"20","4":"0.10","5":"<S3: boost_tree>"},{"1":"0.010","2":"8","3":"20","4":"1.00","5":"<S3: boost_tree>"},{"1":"0.100","2":"2","3":"2","4":"0.00","5":"<S3: boost_tree>"},{"1":"0.100","2":"2","3":"2","4":"0.01","5":"<S3: boost_tree>"},{"1":"0.100","2":"2","3":"2","4":"0.10","5":"<S3: boost_tree>"},{"1":"0.100","2":"2","3":"2","4":"1.00","5":"<S3: boost_tree>"},{"1":"0.100","2":"2","3":"5","4":"0.00","5":"<S3: boost_tree>"},{"1":"0.100","2":"2","3":"5","4":"0.01","5":"<S3: boost_tree>"},{"1":"0.100","2":"2","3":"5","4":"0.10","5":"<S3: boost_tree>"},{"1":"0.100","2":"2","3":"5","4":"1.00","5":"<S3: boost_tree>"},{"1":"0.100","2":"2","3":"10","4":"0.00","5":"<S3: boost_tree>"},{"1":"0.100","2":"2","3":"10","4":"0.01","5":"<S3: boost_tree>"},{"1":"0.100","2":"2","3":"10","4":"0.10","5":"<S3: boost_tree>"},{"1":"0.100","2":"2","3":"10","4":"1.00","5":"<S3: boost_tree>"},{"1":"0.100","2":"2","3":"20","4":"0.00","5":"<S3: boost_tree>"},{"1":"0.100","2":"2","3":"20","4":"0.01","5":"<S3: boost_tree>"},{"1":"0.100","2":"2","3":"20","4":"0.10","5":"<S3: boost_tree>"},{"1":"0.100","2":"2","3":"20","4":"1.00","5":"<S3: boost_tree>"},{"1":"0.100","2":"4","3":"2","4":"0.00","5":"<S3: boost_tree>"},{"1":"0.100","2":"4","3":"2","4":"0.01","5":"<S3: boost_tree>"},{"1":"0.100","2":"4","3":"2","4":"0.10","5":"<S3: boost_tree>"},{"1":"0.100","2":"4","3":"2","4":"1.00","5":"<S3: boost_tree>"},{"1":"0.100","2":"4","3":"5","4":"0.00","5":"<S3: boost_tree>"},{"1":"0.100","2":"4","3":"5","4":"0.01","5":"<S3: boost_tree>"},{"1":"0.100","2":"4","3":"5","4":"0.10","5":"<S3: boost_tree>"},{"1":"0.100","2":"4","3":"5","4":"1.00","5":"<S3: boost_tree>"},{"1":"0.100","2":"4","3":"10","4":"0.00","5":"<S3: boost_tree>"},{"1":"0.100","2":"4","3":"10","4":"0.01","5":"<S3: boost_tree>"},{"1":"0.100","2":"4","3":"10","4":"0.10","5":"<S3: boost_tree>"},{"1":"0.100","2":"4","3":"10","4":"1.00","5":"<S3: boost_tree>"},{"1":"0.100","2":"4","3":"20","4":"0.00","5":"<S3: boost_tree>"},{"1":"0.100","2":"4","3":"20","4":"0.01","5":"<S3: boost_tree>"},{"1":"0.100","2":"4","3":"20","4":"0.10","5":"<S3: boost_tree>"},{"1":"0.100","2":"4","3":"20","4":"1.00","5":"<S3: boost_tree>"},{"1":"0.100","2":"6","3":"2","4":"0.00","5":"<S3: boost_tree>"},{"1":"0.100","2":"6","3":"2","4":"0.01","5":"<S3: boost_tree>"},{"1":"0.100","2":"6","3":"2","4":"0.10","5":"<S3: boost_tree>"},{"1":"0.100","2":"6","3":"2","4":"1.00","5":"<S3: boost_tree>"},{"1":"0.100","2":"6","3":"5","4":"0.00","5":"<S3: boost_tree>"},{"1":"0.100","2":"6","3":"5","4":"0.01","5":"<S3: boost_tree>"},{"1":"0.100","2":"6","3":"5","4":"0.10","5":"<S3: boost_tree>"},{"1":"0.100","2":"6","3":"5","4":"1.00","5":"<S3: boost_tree>"},{"1":"0.100","2":"6","3":"10","4":"0.00","5":"<S3: boost_tree>"},{"1":"0.100","2":"6","3":"10","4":"0.01","5":"<S3: boost_tree>"},{"1":"0.100","2":"6","3":"10","4":"0.10","5":"<S3: boost_tree>"},{"1":"0.100","2":"6","3":"10","4":"1.00","5":"<S3: boost_tree>"},{"1":"0.100","2":"6","3":"20","4":"0.00","5":"<S3: boost_tree>"},{"1":"0.100","2":"6","3":"20","4":"0.01","5":"<S3: boost_tree>"},{"1":"0.100","2":"6","3":"20","4":"0.10","5":"<S3: boost_tree>"},{"1":"0.100","2":"6","3":"20","4":"1.00","5":"<S3: boost_tree>"},{"1":"0.100","2":"8","3":"2","4":"0.00","5":"<S3: boost_tree>"},{"1":"0.100","2":"8","3":"2","4":"0.01","5":"<S3: boost_tree>"},{"1":"0.100","2":"8","3":"2","4":"0.10","5":"<S3: boost_tree>"},{"1":"0.100","2":"8","3":"2","4":"1.00","5":"<S3: boost_tree>"},{"1":"0.100","2":"8","3":"5","4":"0.00","5":"<S3: boost_tree>"},{"1":"0.100","2":"8","3":"5","4":"0.01","5":"<S3: boost_tree>"},{"1":"0.100","2":"8","3":"5","4":"0.10","5":"<S3: boost_tree>"},{"1":"0.100","2":"8","3":"5","4":"1.00","5":"<S3: boost_tree>"},{"1":"0.100","2":"8","3":"10","4":"0.00","5":"<S3: boost_tree>"},{"1":"0.100","2":"8","3":"10","4":"0.01","5":"<S3: boost_tree>"},{"1":"0.100","2":"8","3":"10","4":"0.10","5":"<S3: boost_tree>"},{"1":"0.100","2":"8","3":"10","4":"1.00","5":"<S3: boost_tree>"},{"1":"0.100","2":"8","3":"20","4":"0.00","5":"<S3: boost_tree>"},{"1":"0.100","2":"8","3":"20","4":"0.01","5":"<S3: boost_tree>"},{"1":"0.100","2":"8","3":"20","4":"0.10","5":"<S3: boost_tree>"},{"1":"0.100","2":"8","3":"20","4":"1.00","5":"<S3: boost_tree>"},{"1":"0.200","2":"2","3":"2","4":"0.00","5":"<S3: boost_tree>"},{"1":"0.200","2":"2","3":"2","4":"0.01","5":"<S3: boost_tree>"},{"1":"0.200","2":"2","3":"2","4":"0.10","5":"<S3: boost_tree>"},{"1":"0.200","2":"2","3":"2","4":"1.00","5":"<S3: boost_tree>"},{"1":"0.200","2":"2","3":"5","4":"0.00","5":"<S3: boost_tree>"},{"1":"0.200","2":"2","3":"5","4":"0.01","5":"<S3: boost_tree>"},{"1":"0.200","2":"2","3":"5","4":"0.10","5":"<S3: boost_tree>"},{"1":"0.200","2":"2","3":"5","4":"1.00","5":"<S3: boost_tree>"},{"1":"0.200","2":"2","3":"10","4":"0.00","5":"<S3: boost_tree>"},{"1":"0.200","2":"2","3":"10","4":"0.01","5":"<S3: boost_tree>"},{"1":"0.200","2":"2","3":"10","4":"0.10","5":"<S3: boost_tree>"},{"1":"0.200","2":"2","3":"10","4":"1.00","5":"<S3: boost_tree>"},{"1":"0.200","2":"2","3":"20","4":"0.00","5":"<S3: boost_tree>"},{"1":"0.200","2":"2","3":"20","4":"0.01","5":"<S3: boost_tree>"},{"1":"0.200","2":"2","3":"20","4":"0.10","5":"<S3: boost_tree>"},{"1":"0.200","2":"2","3":"20","4":"1.00","5":"<S3: boost_tree>"},{"1":"0.200","2":"4","3":"2","4":"0.00","5":"<S3: boost_tree>"},{"1":"0.200","2":"4","3":"2","4":"0.01","5":"<S3: boost_tree>"},{"1":"0.200","2":"4","3":"2","4":"0.10","5":"<S3: boost_tree>"},{"1":"0.200","2":"4","3":"2","4":"1.00","5":"<S3: boost_tree>"},{"1":"0.200","2":"4","3":"5","4":"0.00","5":"<S3: boost_tree>"},{"1":"0.200","2":"4","3":"5","4":"0.01","5":"<S3: boost_tree>"},{"1":"0.200","2":"4","3":"5","4":"0.10","5":"<S3: boost_tree>"},{"1":"0.200","2":"4","3":"5","4":"1.00","5":"<S3: boost_tree>"},{"1":"0.200","2":"4","3":"10","4":"0.00","5":"<S3: boost_tree>"},{"1":"0.200","2":"4","3":"10","4":"0.01","5":"<S3: boost_tree>"},{"1":"0.200","2":"4","3":"10","4":"0.10","5":"<S3: boost_tree>"},{"1":"0.200","2":"4","3":"10","4":"1.00","5":"<S3: boost_tree>"},{"1":"0.200","2":"4","3":"20","4":"0.00","5":"<S3: boost_tree>"},{"1":"0.200","2":"4","3":"20","4":"0.01","5":"<S3: boost_tree>"},{"1":"0.200","2":"4","3":"20","4":"0.10","5":"<S3: boost_tree>"},{"1":"0.200","2":"4","3":"20","4":"1.00","5":"<S3: boost_tree>"},{"1":"0.200","2":"6","3":"2","4":"0.00","5":"<S3: boost_tree>"},{"1":"0.200","2":"6","3":"2","4":"0.01","5":"<S3: boost_tree>"},{"1":"0.200","2":"6","3":"2","4":"0.10","5":"<S3: boost_tree>"},{"1":"0.200","2":"6","3":"2","4":"1.00","5":"<S3: boost_tree>"},{"1":"0.200","2":"6","3":"5","4":"0.00","5":"<S3: boost_tree>"},{"1":"0.200","2":"6","3":"5","4":"0.01","5":"<S3: boost_tree>"},{"1":"0.200","2":"6","3":"5","4":"0.10","5":"<S3: boost_tree>"},{"1":"0.200","2":"6","3":"5","4":"1.00","5":"<S3: boost_tree>"},{"1":"0.200","2":"6","3":"10","4":"0.00","5":"<S3: boost_tree>"},{"1":"0.200","2":"6","3":"10","4":"0.01","5":"<S3: boost_tree>"},{"1":"0.200","2":"6","3":"10","4":"0.10","5":"<S3: boost_tree>"},{"1":"0.200","2":"6","3":"10","4":"1.00","5":"<S3: boost_tree>"},{"1":"0.200","2":"6","3":"20","4":"0.00","5":"<S3: boost_tree>"},{"1":"0.200","2":"6","3":"20","4":"0.01","5":"<S3: boost_tree>"},{"1":"0.200","2":"6","3":"20","4":"0.10","5":"<S3: boost_tree>"},{"1":"0.200","2":"6","3":"20","4":"1.00","5":"<S3: boost_tree>"},{"1":"0.200","2":"8","3":"2","4":"0.00","5":"<S3: boost_tree>"},{"1":"0.200","2":"8","3":"2","4":"0.01","5":"<S3: boost_tree>"},{"1":"0.200","2":"8","3":"2","4":"0.10","5":"<S3: boost_tree>"},{"1":"0.200","2":"8","3":"2","4":"1.00","5":"<S3: boost_tree>"},{"1":"0.200","2":"8","3":"5","4":"0.00","5":"<S3: boost_tree>"},{"1":"0.200","2":"8","3":"5","4":"0.01","5":"<S3: boost_tree>"},{"1":"0.200","2":"8","3":"5","4":"0.10","5":"<S3: boost_tree>"},{"1":"0.200","2":"8","3":"5","4":"1.00","5":"<S3: boost_tree>"},{"1":"0.200","2":"8","3":"10","4":"0.00","5":"<S3: boost_tree>"},{"1":"0.200","2":"8","3":"10","4":"0.01","5":"<S3: boost_tree>"},{"1":"0.200","2":"8","3":"10","4":"0.10","5":"<S3: boost_tree>"},{"1":"0.200","2":"8","3":"10","4":"1.00","5":"<S3: boost_tree>"},{"1":"0.200","2":"8","3":"20","4":"0.00","5":"<S3: boost_tree>"},{"1":"0.200","2":"8","3":"20","4":"0.01","5":"<S3: boost_tree>"},{"1":"0.200","2":"8","3":"20","4":"0.10","5":"<S3: boost_tree>"},{"1":"0.200","2":"8","3":"20","4":"1.00","5":"<S3: boost_tree>"},{"1":"0.350","2":"2","3":"2","4":"0.00","5":"<S3: boost_tree>"},{"1":"0.350","2":"2","3":"2","4":"0.01","5":"<S3: boost_tree>"},{"1":"0.350","2":"2","3":"2","4":"0.10","5":"<S3: boost_tree>"},{"1":"0.350","2":"2","3":"2","4":"1.00","5":"<S3: boost_tree>"},{"1":"0.350","2":"2","3":"5","4":"0.00","5":"<S3: boost_tree>"},{"1":"0.350","2":"2","3":"5","4":"0.01","5":"<S3: boost_tree>"},{"1":"0.350","2":"2","3":"5","4":"0.10","5":"<S3: boost_tree>"},{"1":"0.350","2":"2","3":"5","4":"1.00","5":"<S3: boost_tree>"},{"1":"0.350","2":"2","3":"10","4":"0.00","5":"<S3: boost_tree>"},{"1":"0.350","2":"2","3":"10","4":"0.01","5":"<S3: boost_tree>"},{"1":"0.350","2":"2","3":"10","4":"0.10","5":"<S3: boost_tree>"},{"1":"0.350","2":"2","3":"10","4":"1.00","5":"<S3: boost_tree>"},{"1":"0.350","2":"2","3":"20","4":"0.00","5":"<S3: boost_tree>"},{"1":"0.350","2":"2","3":"20","4":"0.01","5":"<S3: boost_tree>"},{"1":"0.350","2":"2","3":"20","4":"0.10","5":"<S3: boost_tree>"},{"1":"0.350","2":"2","3":"20","4":"1.00","5":"<S3: boost_tree>"},{"1":"0.350","2":"4","3":"2","4":"0.00","5":"<S3: boost_tree>"},{"1":"0.350","2":"4","3":"2","4":"0.01","5":"<S3: boost_tree>"},{"1":"0.350","2":"4","3":"2","4":"0.10","5":"<S3: boost_tree>"},{"1":"0.350","2":"4","3":"2","4":"1.00","5":"<S3: boost_tree>"},{"1":"0.350","2":"4","3":"5","4":"0.00","5":"<S3: boost_tree>"},{"1":"0.350","2":"4","3":"5","4":"0.01","5":"<S3: boost_tree>"},{"1":"0.350","2":"4","3":"5","4":"0.10","5":"<S3: boost_tree>"},{"1":"0.350","2":"4","3":"5","4":"1.00","5":"<S3: boost_tree>"},{"1":"0.350","2":"4","3":"10","4":"0.00","5":"<S3: boost_tree>"},{"1":"0.350","2":"4","3":"10","4":"0.01","5":"<S3: boost_tree>"},{"1":"0.350","2":"4","3":"10","4":"0.10","5":"<S3: boost_tree>"},{"1":"0.350","2":"4","3":"10","4":"1.00","5":"<S3: boost_tree>"},{"1":"0.350","2":"4","3":"20","4":"0.00","5":"<S3: boost_tree>"},{"1":"0.350","2":"4","3":"20","4":"0.01","5":"<S3: boost_tree>"},{"1":"0.350","2":"4","3":"20","4":"0.10","5":"<S3: boost_tree>"},{"1":"0.350","2":"4","3":"20","4":"1.00","5":"<S3: boost_tree>"},{"1":"0.350","2":"6","3":"2","4":"0.00","5":"<S3: boost_tree>"},{"1":"0.350","2":"6","3":"2","4":"0.01","5":"<S3: boost_tree>"},{"1":"0.350","2":"6","3":"2","4":"0.10","5":"<S3: boost_tree>"},{"1":"0.350","2":"6","3":"2","4":"1.00","5":"<S3: boost_tree>"},{"1":"0.350","2":"6","3":"5","4":"0.00","5":"<S3: boost_tree>"},{"1":"0.350","2":"6","3":"5","4":"0.01","5":"<S3: boost_tree>"},{"1":"0.350","2":"6","3":"5","4":"0.10","5":"<S3: boost_tree>"},{"1":"0.350","2":"6","3":"5","4":"1.00","5":"<S3: boost_tree>"},{"1":"0.350","2":"6","3":"10","4":"0.00","5":"<S3: boost_tree>"},{"1":"0.350","2":"6","3":"10","4":"0.01","5":"<S3: boost_tree>"},{"1":"0.350","2":"6","3":"10","4":"0.10","5":"<S3: boost_tree>"},{"1":"0.350","2":"6","3":"10","4":"1.00","5":"<S3: boost_tree>"},{"1":"0.350","2":"6","3":"20","4":"0.00","5":"<S3: boost_tree>"},{"1":"0.350","2":"6","3":"20","4":"0.01","5":"<S3: boost_tree>"},{"1":"0.350","2":"6","3":"20","4":"0.10","5":"<S3: boost_tree>"},{"1":"0.350","2":"6","3":"20","4":"1.00","5":"<S3: boost_tree>"},{"1":"0.350","2":"8","3":"2","4":"0.00","5":"<S3: boost_tree>"},{"1":"0.350","2":"8","3":"2","4":"0.01","5":"<S3: boost_tree>"},{"1":"0.350","2":"8","3":"2","4":"0.10","5":"<S3: boost_tree>"},{"1":"0.350","2":"8","3":"2","4":"1.00","5":"<S3: boost_tree>"},{"1":"0.350","2":"8","3":"5","4":"0.00","5":"<S3: boost_tree>"},{"1":"0.350","2":"8","3":"5","4":"0.01","5":"<S3: boost_tree>"},{"1":"0.350","2":"8","3":"5","4":"0.10","5":"<S3: boost_tree>"},{"1":"0.350","2":"8","3":"5","4":"1.00","5":"<S3: boost_tree>"},{"1":"0.350","2":"8","3":"10","4":"0.00","5":"<S3: boost_tree>"},{"1":"0.350","2":"8","3":"10","4":"0.01","5":"<S3: boost_tree>"},{"1":"0.350","2":"8","3":"10","4":"0.10","5":"<S3: boost_tree>"},{"1":"0.350","2":"8","3":"10","4":"1.00","5":"<S3: boost_tree>"},{"1":"0.350","2":"8","3":"20","4":"0.00","5":"<S3: boost_tree>"},{"1":"0.350","2":"8","3":"20","4":"0.01","5":"<S3: boost_tree>"},{"1":"0.350","2":"8","3":"20","4":"0.10","5":"<S3: boost_tree>"},{"1":"0.350","2":"8","3":"20","4":"1.00","5":"<S3: boost_tree>"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract the list of parsnip model specifications (useful for workflowsets)</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>xgb_model_list <span class="ot">&lt;-</span> xgb_spec_tbl<span class="sc">$</span>.models</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Preview first 2 specs</span></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>xgb_model_list[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
Boosted Tree Model Specification (regression)

Main Arguments:
  min_n = 2
  tree_depth = 2
  learn_rate = 0.001
  loss_reduction = 0

Computational engine: xgboost 


[[2]]
Boosted Tree Model Specification (regression)

Main Arguments:
  min_n = 2
  tree_depth = 2
  learn_rate = 0.001
  loss_reduction = 0.01

Computational engine: xgboost </code></pre>
</div>
</div>
<hr>
</section>
<section id="workflow-sets" class="level2" data-number="8">
<h2 data-number="8" class="anchored" data-anchor-id="workflow-sets"><span class="header-section-number">8</span> Workflow sets</h2>
<p>Workflow sets allow us to systematically <strong>combine preprocessing recipes and model specifications into comparable modeling pipelines</strong>. In this case, we pair a single time-series recipe with multiple XGBoost configurations, creating a collection of untrained workflows that can be fit and evaluated consistently.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------------------------------------------------------------------</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Workflow sets</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a><span class="co"># - Combine the preprocessing recipe with multiple XGBoost model specifications</span></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a><span class="co"># - Each workflow represents one unique recipe–model combination</span></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a><span class="co"># - Workflows are created unfitted and will be trained during evaluation</span></span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------------------------------------------------------------------</span></span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a>sales_workflow_set <span class="ot">&lt;-</span> <span class="fu">workflow_set</span>(</span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">preproc =</span> <span class="fu">list</span>(<span class="at">sales_recipe =</span> sales_recipe),</span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">models  =</span> xgb_model_list,</span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">cross   =</span> <span class="cn">TRUE</span></span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb30-13"><a href="#cb30-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-14"><a href="#cb30-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Inspect the workflow set</span></span>
<span id="cb30-15"><a href="#cb30-15" aria-hidden="true" tabindex="-1"></a>sales_workflow_set</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["wflow_id"],"name":[1],"type":["chr"],"align":["left"]},{"label":["info"],"name":[2],"type":["list"],"align":["right"]},{"label":["option"],"name":[3],"type":["list"],"align":["right"]},{"label":["result"],"name":[4],"type":["list"],"align":["right"]}],"data":[{"1":"sales_recipe_boost_tree_1","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_2","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_3","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_4","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_5","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_6","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_7","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_8","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_9","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_10","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_11","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_12","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_13","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_14","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_15","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_16","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_17","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_18","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_19","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_20","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_21","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_22","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_23","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_24","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_25","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_26","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_27","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_28","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_29","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_30","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_31","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_32","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_33","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_34","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_35","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_36","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_37","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_38","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_39","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_40","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_41","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_42","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_43","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_44","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_45","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_46","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_47","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_48","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_49","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_50","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_51","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_52","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_53","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_54","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_55","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_56","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_57","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_58","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_59","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_60","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_61","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_62","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_63","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_64","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_65","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_66","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_67","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_68","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_69","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_70","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_71","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_72","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_73","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_74","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_75","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_76","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_77","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_78","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_79","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_80","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_81","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_82","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_83","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_84","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_85","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_86","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_87","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_88","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_89","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_90","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_91","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_92","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_93","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_94","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_95","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_96","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_97","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_98","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_99","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_100","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_101","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_102","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_103","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_104","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_105","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_106","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_107","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_108","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_109","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_110","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_111","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_112","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_113","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_114","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_115","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_116","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_117","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_118","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_119","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_120","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_121","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_122","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_123","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_124","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_125","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_126","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_127","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_128","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_129","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_130","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_131","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_132","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_133","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_134","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_135","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_136","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_137","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_138","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_139","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_140","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_141","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_142","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_143","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_144","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_145","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_146","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_147","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_148","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_149","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_150","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_151","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_152","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_153","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_154","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_155","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_156","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_157","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_158","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_159","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_160","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_161","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_162","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_163","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_164","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_165","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_166","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_167","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_168","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_169","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_170","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_171","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_172","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_173","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_174","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_175","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_176","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_177","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_178","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_179","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_180","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_181","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_182","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_183","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_184","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_185","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_186","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_187","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_188","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_189","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_190","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_191","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_192","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_193","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_194","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_195","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_196","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_197","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_198","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_199","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_200","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_201","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_202","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_203","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_204","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_205","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_206","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_207","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_208","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_209","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_210","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_211","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_212","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_213","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_214","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_215","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_216","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_217","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_218","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_219","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_220","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_221","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_222","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_223","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_224","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_225","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_226","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_227","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_228","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_229","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_230","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_231","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_232","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_233","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_234","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_235","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_236","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_237","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_238","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_239","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_240","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_241","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_242","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_243","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_244","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_245","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_246","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_247","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_248","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_249","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_250","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_251","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_252","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_253","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_254","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_255","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_256","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_257","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_258","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_259","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_260","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_261","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_262","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_263","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_264","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_265","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_266","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_267","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_268","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_269","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_270","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_271","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_272","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_273","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_274","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_275","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_276","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_277","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_278","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_279","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_280","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_281","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_282","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_283","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_284","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_285","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_286","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_287","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_288","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_289","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_290","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_291","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_292","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_293","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_294","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_295","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_296","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_297","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_298","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_299","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_300","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_301","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_302","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_303","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_304","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_305","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_306","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_307","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_308","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_309","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_310","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_311","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_312","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_313","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_314","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_315","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_316","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_317","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_318","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_319","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"},{"1":"sales_recipe_boost_tree_320","2":"<tibble[,4]>","3":"<wrkflw__>","4":"<list [0]>"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<hr>
</section>
<section id="fitting-using-parallel-backend" class="level2" data-number="9">
<h2 data-number="9" class="anchored" data-anchor-id="fitting-using-parallel-backend"><span class="header-section-number">9</span> Fitting Using Parallel Backend</h2>
<p>We will now train all recipe–model combinations by fitting the workflow set on the training portion of the time series. By enabling parallel execution, each workflow is trained concurrently across multiple CPU cores, significantly reducing total runtime while providing clear progress feedback during the fitting process.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------------------------------------------------------------------</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Parallel model training (workflow set fitting)</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a><span class="co"># - Fit all workflows on the training data</span></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a><span class="co"># - Enable parallel processing to speed up computation</span></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a><span class="co"># - Verbose output shows progress for each workflow</span></span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------------------------------------------------------------------</span></span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a>fitted_models_tbl <span class="ot">&lt;-</span> sales_workflow_set <span class="sc">|&gt;</span></span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">modeltime_fit_workflowset</span>(</span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> <span class="fu">training</span>(sales_split),</span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">control =</span> <span class="fu">control_fit_workflowset</span>(</span>
<span id="cb31-12"><a href="#cb31-12" aria-hidden="true" tabindex="-1"></a>      <span class="at">verbose   =</span> <span class="cn">TRUE</span>,  <span class="co"># Display progress during fitting</span></span>
<span id="cb31-13"><a href="#cb31-13" aria-hidden="true" tabindex="-1"></a>      <span class="at">allow_par =</span> <span class="cn">TRUE</span>   <span class="co"># Use the active parallel backend</span></span>
<span id="cb31-14"><a href="#cb31-14" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb31-15"><a href="#cb31-15" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Using existing parallel backend with 2 workers...</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code> Beginning Parallel Loop | 0.008 seconds</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code> Finishing parallel backend. Clusters are remaining open. | 7.514 seconds</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code> Close clusters by running: `parallel_stop()`.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code> Total time | 7.514 seconds</code></pre>
</div>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Inspect fitted workflows</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>fitted_models_tbl</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":[".model_id"],"name":[1],"type":["int"],"align":["right"]},{"label":[".model"],"name":[2],"type":["list"],"align":["right"]},{"label":[".model_desc"],"name":[3],"type":["chr"],"align":["left"]}],"data":[{"1":"1","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_1"},{"1":"2","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_2"},{"1":"3","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_3"},{"1":"4","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_4"},{"1":"5","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_5"},{"1":"6","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_6"},{"1":"7","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_7"},{"1":"8","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_8"},{"1":"9","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_9"},{"1":"10","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_10"},{"1":"11","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_11"},{"1":"12","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_12"},{"1":"13","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_13"},{"1":"14","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_14"},{"1":"15","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_15"},{"1":"16","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_16"},{"1":"17","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_17"},{"1":"18","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_18"},{"1":"19","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_19"},{"1":"20","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_20"},{"1":"21","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_21"},{"1":"22","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_22"},{"1":"23","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_23"},{"1":"24","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_24"},{"1":"25","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_25"},{"1":"26","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_26"},{"1":"27","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_27"},{"1":"28","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_28"},{"1":"29","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_29"},{"1":"30","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_30"},{"1":"31","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_31"},{"1":"32","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_32"},{"1":"33","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_33"},{"1":"34","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_34"},{"1":"35","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_35"},{"1":"36","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_36"},{"1":"37","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_37"},{"1":"38","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_38"},{"1":"39","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_39"},{"1":"40","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_40"},{"1":"41","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_41"},{"1":"42","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_42"},{"1":"43","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_43"},{"1":"44","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_44"},{"1":"45","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_45"},{"1":"46","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_46"},{"1":"47","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_47"},{"1":"48","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_48"},{"1":"49","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_49"},{"1":"50","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_50"},{"1":"51","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_51"},{"1":"52","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_52"},{"1":"53","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_53"},{"1":"54","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_54"},{"1":"55","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_55"},{"1":"56","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_56"},{"1":"57","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_57"},{"1":"58","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_58"},{"1":"59","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_59"},{"1":"60","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_60"},{"1":"61","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_61"},{"1":"62","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_62"},{"1":"63","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_63"},{"1":"64","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_64"},{"1":"65","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_65"},{"1":"66","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_66"},{"1":"67","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_67"},{"1":"68","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_68"},{"1":"69","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_69"},{"1":"70","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_70"},{"1":"71","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_71"},{"1":"72","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_72"},{"1":"73","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_73"},{"1":"74","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_74"},{"1":"75","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_75"},{"1":"76","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_76"},{"1":"77","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_77"},{"1":"78","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_78"},{"1":"79","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_79"},{"1":"80","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_80"},{"1":"81","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_81"},{"1":"82","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_82"},{"1":"83","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_83"},{"1":"84","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_84"},{"1":"85","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_85"},{"1":"86","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_86"},{"1":"87","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_87"},{"1":"88","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_88"},{"1":"89","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_89"},{"1":"90","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_90"},{"1":"91","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_91"},{"1":"92","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_92"},{"1":"93","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_93"},{"1":"94","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_94"},{"1":"95","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_95"},{"1":"96","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_96"},{"1":"97","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_97"},{"1":"98","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_98"},{"1":"99","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_99"},{"1":"100","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_100"},{"1":"101","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_101"},{"1":"102","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_102"},{"1":"103","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_103"},{"1":"104","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_104"},{"1":"105","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_105"},{"1":"106","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_106"},{"1":"107","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_107"},{"1":"108","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_108"},{"1":"109","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_109"},{"1":"110","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_110"},{"1":"111","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_111"},{"1":"112","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_112"},{"1":"113","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_113"},{"1":"114","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_114"},{"1":"115","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_115"},{"1":"116","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_116"},{"1":"117","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_117"},{"1":"118","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_118"},{"1":"119","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_119"},{"1":"120","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_120"},{"1":"121","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_121"},{"1":"122","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_122"},{"1":"123","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_123"},{"1":"124","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_124"},{"1":"125","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_125"},{"1":"126","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_126"},{"1":"127","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_127"},{"1":"128","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_128"},{"1":"129","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_129"},{"1":"130","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_130"},{"1":"131","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_131"},{"1":"132","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_132"},{"1":"133","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_133"},{"1":"134","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_134"},{"1":"135","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_135"},{"1":"136","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_136"},{"1":"137","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_137"},{"1":"138","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_138"},{"1":"139","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_139"},{"1":"140","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_140"},{"1":"141","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_141"},{"1":"142","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_142"},{"1":"143","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_143"},{"1":"144","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_144"},{"1":"145","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_145"},{"1":"146","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_146"},{"1":"147","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_147"},{"1":"148","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_148"},{"1":"149","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_149"},{"1":"150","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_150"},{"1":"151","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_151"},{"1":"152","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_152"},{"1":"153","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_153"},{"1":"154","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_154"},{"1":"155","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_155"},{"1":"156","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_156"},{"1":"157","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_157"},{"1":"158","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_158"},{"1":"159","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_159"},{"1":"160","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_160"},{"1":"161","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_161"},{"1":"162","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_162"},{"1":"163","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_163"},{"1":"164","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_164"},{"1":"165","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_165"},{"1":"166","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_166"},{"1":"167","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_167"},{"1":"168","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_168"},{"1":"169","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_169"},{"1":"170","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_170"},{"1":"171","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_171"},{"1":"172","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_172"},{"1":"173","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_173"},{"1":"174","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_174"},{"1":"175","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_175"},{"1":"176","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_176"},{"1":"177","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_177"},{"1":"178","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_178"},{"1":"179","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_179"},{"1":"180","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_180"},{"1":"181","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_181"},{"1":"182","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_182"},{"1":"183","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_183"},{"1":"184","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_184"},{"1":"185","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_185"},{"1":"186","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_186"},{"1":"187","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_187"},{"1":"188","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_188"},{"1":"189","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_189"},{"1":"190","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_190"},{"1":"191","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_191"},{"1":"192","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_192"},{"1":"193","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_193"},{"1":"194","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_194"},{"1":"195","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_195"},{"1":"196","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_196"},{"1":"197","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_197"},{"1":"198","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_198"},{"1":"199","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_199"},{"1":"200","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_200"},{"1":"201","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_201"},{"1":"202","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_202"},{"1":"203","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_203"},{"1":"204","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_204"},{"1":"205","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_205"},{"1":"206","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_206"},{"1":"207","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_207"},{"1":"208","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_208"},{"1":"209","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_209"},{"1":"210","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_210"},{"1":"211","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_211"},{"1":"212","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_212"},{"1":"213","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_213"},{"1":"214","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_214"},{"1":"215","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_215"},{"1":"216","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_216"},{"1":"217","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_217"},{"1":"218","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_218"},{"1":"219","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_219"},{"1":"220","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_220"},{"1":"221","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_221"},{"1":"222","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_222"},{"1":"223","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_223"},{"1":"224","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_224"},{"1":"225","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_225"},{"1":"226","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_226"},{"1":"227","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_227"},{"1":"228","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_228"},{"1":"229","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_229"},{"1":"230","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_230"},{"1":"231","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_231"},{"1":"232","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_232"},{"1":"233","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_233"},{"1":"234","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_234"},{"1":"235","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_235"},{"1":"236","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_236"},{"1":"237","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_237"},{"1":"238","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_238"},{"1":"239","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_239"},{"1":"240","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_240"},{"1":"241","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_241"},{"1":"242","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_242"},{"1":"243","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_243"},{"1":"244","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_244"},{"1":"245","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_245"},{"1":"246","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_246"},{"1":"247","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_247"},{"1":"248","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_248"},{"1":"249","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_249"},{"1":"250","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_250"},{"1":"251","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_251"},{"1":"252","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_252"},{"1":"253","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_253"},{"1":"254","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_254"},{"1":"255","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_255"},{"1":"256","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_256"},{"1":"257","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_257"},{"1":"258","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_258"},{"1":"259","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_259"},{"1":"260","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_260"},{"1":"261","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_261"},{"1":"262","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_262"},{"1":"263","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_263"},{"1":"264","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_264"},{"1":"265","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_265"},{"1":"266","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_266"},{"1":"267","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_267"},{"1":"268","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_268"},{"1":"269","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_269"},{"1":"270","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_270"},{"1":"271","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_271"},{"1":"272","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_272"},{"1":"273","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_273"},{"1":"274","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_274"},{"1":"275","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_275"},{"1":"276","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_276"},{"1":"277","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_277"},{"1":"278","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_278"},{"1":"279","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_279"},{"1":"280","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_280"},{"1":"281","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_281"},{"1":"282","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_282"},{"1":"283","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_283"},{"1":"284","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_284"},{"1":"285","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_285"},{"1":"286","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_286"},{"1":"287","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_287"},{"1":"288","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_288"},{"1":"289","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_289"},{"1":"290","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_290"},{"1":"291","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_291"},{"1":"292","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_292"},{"1":"293","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_293"},{"1":"294","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_294"},{"1":"295","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_295"},{"1":"296","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_296"},{"1":"297","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_297"},{"1":"298","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_298"},{"1":"299","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_299"},{"1":"300","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_300"},{"1":"301","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_301"},{"1":"302","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_302"},{"1":"303","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_303"},{"1":"304","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_304"},{"1":"305","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_305"},{"1":"306","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_306"},{"1":"307","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_307"},{"1":"308","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_308"},{"1":"309","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_309"},{"1":"310","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_310"},{"1":"311","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_311"},{"1":"312","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_312"},{"1":"313","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_313"},{"1":"314","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_314"},{"1":"315","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_315"},{"1":"316","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_316"},{"1":"317","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_317"},{"1":"318","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_318"},{"1":"319","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_319"},{"1":"320","2":"<S3: workflow>","3":"SALES_RECIPE_BOOST_TREE_320"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<hr>
</section>
<section id="accuracy-assessment" class="level2" data-number="10">
<h2 data-number="10" class="anchored" data-anchor-id="accuracy-assessment"><span class="header-section-number">10</span> Accuracy assessment</h2>
<p>After fitting the models, we evaluate their out-of-sample performance by calibrating each workflow on the test set and computing standard forecast accuracy metrics. Comparing these results allows us to identify the best-performing configuration, with <strong>Model 277 achieving the lowest Mean Absolute Error (MAE)</strong> and therefore providing the most accurate forecasts on unseen data.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------------------------------------------------------------------</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Model evaluation and accuracy comparison</span></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a><span class="co"># - Calibrate fitted models on the test set</span></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a><span class="co"># - Compute standard forecast accuracy metrics</span></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a><span class="co"># - Rank models to identify the best performer</span></span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------------------------------------------------------------------</span></span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a>calibration_tbl <span class="ot">&lt;-</span> fitted_models_tbl <span class="sc">|&gt;</span></span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">modeltime_calibrate</span>(<span class="at">new_data =</span> <span class="fu">testing</span>(sales_split))</span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-11"><a href="#cb38-11" aria-hidden="true" tabindex="-1"></a>model_accuracy_tbl <span class="ot">&lt;-</span> calibration_tbl <span class="sc">|&gt;</span></span>
<span id="cb38-12"><a href="#cb38-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">modeltime_accuracy</span>() <span class="sc">|&gt;</span></span>
<span id="cb38-13"><a href="#cb38-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(mae) <span class="sc">|&gt;</span> </span>
<span id="cb38-14"><a href="#cb38-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_min</span>(mae, <span class="at">n =</span><span class="dv">10</span>)</span>
<span id="cb38-15"><a href="#cb38-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-16"><a href="#cb38-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Display accuracy results in a readable table</span></span>
<span id="cb38-17"><a href="#cb38-17" aria-hidden="true" tabindex="-1"></a><span class="fu">table_modeltime_accuracy</span>(</span>
<span id="cb38-18"><a href="#cb38-18" aria-hidden="true" tabindex="-1"></a>  model_accuracy_tbl,</span>
<span id="cb38-19"><a href="#cb38-19" aria-hidden="true" tabindex="-1"></a>  <span class="at">.interactive =</span> <span class="cn">FALSE</span></span>
<span id="cb38-20"><a href="#cb38-20" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="hnlmlhvdad" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#hnlmlhvdad table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#hnlmlhvdad thead, #hnlmlhvdad tbody, #hnlmlhvdad tfoot, #hnlmlhvdad tr, #hnlmlhvdad td, #hnlmlhvdad th {
  border-style: none;
}

#hnlmlhvdad p {
  margin: 0;
  padding: 0;
}

#hnlmlhvdad .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#hnlmlhvdad .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#hnlmlhvdad .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#hnlmlhvdad .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#hnlmlhvdad .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#hnlmlhvdad .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#hnlmlhvdad .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#hnlmlhvdad .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#hnlmlhvdad .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#hnlmlhvdad .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#hnlmlhvdad .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#hnlmlhvdad .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#hnlmlhvdad .gt_spanner_row {
  border-bottom-style: hidden;
}

#hnlmlhvdad .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#hnlmlhvdad .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#hnlmlhvdad .gt_from_md > :first-child {
  margin-top: 0;
}

#hnlmlhvdad .gt_from_md > :last-child {
  margin-bottom: 0;
}

#hnlmlhvdad .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#hnlmlhvdad .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#hnlmlhvdad .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#hnlmlhvdad .gt_row_group_first td {
  border-top-width: 2px;
}

#hnlmlhvdad .gt_row_group_first th {
  border-top-width: 2px;
}

#hnlmlhvdad .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#hnlmlhvdad .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#hnlmlhvdad .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#hnlmlhvdad .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#hnlmlhvdad .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#hnlmlhvdad .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#hnlmlhvdad .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#hnlmlhvdad .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#hnlmlhvdad .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#hnlmlhvdad .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#hnlmlhvdad .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#hnlmlhvdad .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#hnlmlhvdad .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#hnlmlhvdad .gt_left {
  text-align: left;
}

#hnlmlhvdad .gt_center {
  text-align: center;
}

#hnlmlhvdad .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#hnlmlhvdad .gt_font_normal {
  font-weight: normal;
}

#hnlmlhvdad .gt_font_bold {
  font-weight: bold;
}

#hnlmlhvdad .gt_font_italic {
  font-style: italic;
}

#hnlmlhvdad .gt_super {
  font-size: 65%;
}

#hnlmlhvdad .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#hnlmlhvdad .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#hnlmlhvdad .gt_indent_1 {
  text-indent: 5px;
}

#hnlmlhvdad .gt_indent_2 {
  text-indent: 10px;
}

#hnlmlhvdad .gt_indent_3 {
  text-indent: 15px;
}

#hnlmlhvdad .gt_indent_4 {
  text-indent: 20px;
}

#hnlmlhvdad .gt_indent_5 {
  text-indent: 25px;
}

#hnlmlhvdad .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#hnlmlhvdad div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="gt_heading header">
<th colspan="9" class="gt_heading gt_title gt_font_normal gt_bottom_border">Accuracy Table</th>
</tr>
<tr class="gt_col_headings even">
<th id="a.model_id" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">.model_id</th>
<th id="a.model_desc" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">.model_desc</th>
<th id="a.type" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">.type</th>
<th id="mae" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">mae</th>
<th id="mape" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">mape</th>
<th id="mase" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">mase</th>
<th id="smape" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">smape</th>
<th id="rmse" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">rmse</th>
<th id="rsq" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">rsq</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_right" headers=".model_id">277</td>
<td class="gt_row gt_left" headers=".model_desc">SALES_RECIPE_BOOST_TREE_277</td>
<td class="gt_row gt_left" headers=".type">Test</td>
<td class="gt_row gt_right" headers="mae">43447.35</td>
<td class="gt_row gt_right" headers="mape">18.21</td>
<td class="gt_row gt_right" headers="mase">0.65</td>
<td class="gt_row gt_right" headers="smape">18.77</td>
<td class="gt_row gt_right" headers="rmse">53267.77</td>
<td class="gt_row gt_right" headers="rsq">0.36</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers=".model_id">278</td>
<td class="gt_row gt_left" headers=".model_desc">SALES_RECIPE_BOOST_TREE_278</td>
<td class="gt_row gt_left" headers=".type">Test</td>
<td class="gt_row gt_right" headers="mae">43447.35</td>
<td class="gt_row gt_right" headers="mape">18.21</td>
<td class="gt_row gt_right" headers="mase">0.65</td>
<td class="gt_row gt_right" headers="smape">18.77</td>
<td class="gt_row gt_right" headers="rmse">53267.77</td>
<td class="gt_row gt_right" headers="rsq">0.36</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers=".model_id">279</td>
<td class="gt_row gt_left" headers=".model_desc">SALES_RECIPE_BOOST_TREE_279</td>
<td class="gt_row gt_left" headers=".type">Test</td>
<td class="gt_row gt_right" headers="mae">43447.35</td>
<td class="gt_row gt_right" headers="mape">18.21</td>
<td class="gt_row gt_right" headers="mase">0.65</td>
<td class="gt_row gt_right" headers="smape">18.77</td>
<td class="gt_row gt_right" headers="rmse">53267.77</td>
<td class="gt_row gt_right" headers="rsq">0.36</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers=".model_id">280</td>
<td class="gt_row gt_left" headers=".model_desc">SALES_RECIPE_BOOST_TREE_280</td>
<td class="gt_row gt_left" headers=".type">Test</td>
<td class="gt_row gt_right" headers="mae">43447.35</td>
<td class="gt_row gt_right" headers="mape">18.21</td>
<td class="gt_row gt_right" headers="mase">0.65</td>
<td class="gt_row gt_right" headers="smape">18.77</td>
<td class="gt_row gt_right" headers="rmse">53267.77</td>
<td class="gt_row gt_right" headers="rsq">0.36</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers=".model_id">261</td>
<td class="gt_row gt_left" headers=".model_desc">SALES_RECIPE_BOOST_TREE_261</td>
<td class="gt_row gt_left" headers=".type">Test</td>
<td class="gt_row gt_right" headers="mae">43564.50</td>
<td class="gt_row gt_right" headers="mape">18.25</td>
<td class="gt_row gt_right" headers="mase">0.65</td>
<td class="gt_row gt_right" headers="smape">18.68</td>
<td class="gt_row gt_right" headers="rmse">54005.01</td>
<td class="gt_row gt_right" headers="rsq">0.32</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers=".model_id">262</td>
<td class="gt_row gt_left" headers=".model_desc">SALES_RECIPE_BOOST_TREE_262</td>
<td class="gt_row gt_left" headers=".type">Test</td>
<td class="gt_row gt_right" headers="mae">43564.50</td>
<td class="gt_row gt_right" headers="mape">18.25</td>
<td class="gt_row gt_right" headers="mase">0.65</td>
<td class="gt_row gt_right" headers="smape">18.68</td>
<td class="gt_row gt_right" headers="rmse">54005.01</td>
<td class="gt_row gt_right" headers="rsq">0.32</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers=".model_id">263</td>
<td class="gt_row gt_left" headers=".model_desc">SALES_RECIPE_BOOST_TREE_263</td>
<td class="gt_row gt_left" headers=".type">Test</td>
<td class="gt_row gt_right" headers="mae">43564.50</td>
<td class="gt_row gt_right" headers="mape">18.25</td>
<td class="gt_row gt_right" headers="mase">0.65</td>
<td class="gt_row gt_right" headers="smape">18.68</td>
<td class="gt_row gt_right" headers="rmse">54005.01</td>
<td class="gt_row gt_right" headers="rsq">0.32</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers=".model_id">264</td>
<td class="gt_row gt_left" headers=".model_desc">SALES_RECIPE_BOOST_TREE_264</td>
<td class="gt_row gt_left" headers=".type">Test</td>
<td class="gt_row gt_right" headers="mae">43564.50</td>
<td class="gt_row gt_right" headers="mape">18.25</td>
<td class="gt_row gt_right" headers="mase">0.65</td>
<td class="gt_row gt_right" headers="smape">18.68</td>
<td class="gt_row gt_right" headers="rmse">54005.01</td>
<td class="gt_row gt_right" headers="rsq">0.32</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers=".model_id">257</td>
<td class="gt_row gt_left" headers=".model_desc">SALES_RECIPE_BOOST_TREE_257</td>
<td class="gt_row gt_left" headers=".type">Test</td>
<td class="gt_row gt_right" headers="mae">44264.16</td>
<td class="gt_row gt_right" headers="mape">18.58</td>
<td class="gt_row gt_right" headers="mase">0.66</td>
<td class="gt_row gt_right" headers="smape">19.17</td>
<td class="gt_row gt_right" headers="rmse">55486.98</td>
<td class="gt_row gt_right" headers="rsq">0.28</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers=".model_id">258</td>
<td class="gt_row gt_left" headers=".model_desc">SALES_RECIPE_BOOST_TREE_258</td>
<td class="gt_row gt_left" headers=".type">Test</td>
<td class="gt_row gt_right" headers="mae">44264.16</td>
<td class="gt_row gt_right" headers="mape">18.58</td>
<td class="gt_row gt_right" headers="mase">0.66</td>
<td class="gt_row gt_right" headers="smape">19.17</td>
<td class="gt_row gt_right" headers="rmse">55486.98</td>
<td class="gt_row gt_right" headers="rsq">0.28</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers=".model_id">259</td>
<td class="gt_row gt_left" headers=".model_desc">SALES_RECIPE_BOOST_TREE_259</td>
<td class="gt_row gt_left" headers=".type">Test</td>
<td class="gt_row gt_right" headers="mae">44264.16</td>
<td class="gt_row gt_right" headers="mape">18.58</td>
<td class="gt_row gt_right" headers="mase">0.66</td>
<td class="gt_row gt_right" headers="smape">19.17</td>
<td class="gt_row gt_right" headers="rmse">55486.98</td>
<td class="gt_row gt_right" headers="rsq">0.28</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers=".model_id">260</td>
<td class="gt_row gt_left" headers=".model_desc">SALES_RECIPE_BOOST_TREE_260</td>
<td class="gt_row gt_left" headers=".type">Test</td>
<td class="gt_row gt_right" headers="mae">44264.16</td>
<td class="gt_row gt_right" headers="mape">18.58</td>
<td class="gt_row gt_right" headers="mase">0.66</td>
<td class="gt_row gt_right" headers="smape">19.17</td>
<td class="gt_row gt_right" headers="rmse">55486.98</td>
<td class="gt_row gt_right" headers="rsq">0.28</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<hr>
</section>
<section id="forecast-assessment" class="level2" data-number="11">
<h2 data-number="11" class="anchored" data-anchor-id="forecast-assessment"><span class="header-section-number">11</span> Forecast Assessment</h2>
<p>To complement the numerical accuracy metrics, we visually assess how each model’s forecasts compare against the actual sales during the testing period. This side-by-side visualization helps reveal differences in trend capture, responsiveness to changes, and overall forecast stability that may not be fully apparent from error metrics alone.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------------------------------------------------------------------</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Forecast assessment (visual comparison on test set)</span></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a><span class="co"># - Generate forecasts for each fitted model on the test period</span></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a><span class="co"># - Overlay predictions with actual historical sales</span></span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a><span class="co"># - Retain underlying data for further inspection if needed</span></span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------------------------------------------------------------------</span></span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a>forecast_comparison_tbl <span class="ot">&lt;-</span> calibration_tbl <span class="sc">|&gt;</span></span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># filter for the 10 best models </span></span>
<span id="cb39-10"><a href="#cb39-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(.model_id <span class="sc">%in%</span> model_accuracy_tbl<span class="sc">$</span>.model_id) <span class="sc">|&gt;</span> </span>
<span id="cb39-11"><a href="#cb39-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">modeltime_forecast</span>(</span>
<span id="cb39-12"><a href="#cb39-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">new_data    =</span> <span class="fu">testing</span>(sales_split),</span>
<span id="cb39-13"><a href="#cb39-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">actual_data =</span> cleaned_sales_df,</span>
<span id="cb39-14"><a href="#cb39-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_data   =</span> <span class="cn">TRUE</span></span>
<span id="cb39-15"><a href="#cb39-15" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb39-16"><a href="#cb39-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-17"><a href="#cb39-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot forecasts vs actuals for visual evaluation</span></span>
<span id="cb39-18"><a href="#cb39-18" aria-hidden="true" tabindex="-1"></a>forecast_comparison_tbl <span class="sc">|&gt;</span></span>
<span id="cb39-19"><a href="#cb39-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_modeltime_forecast</span>(</span>
<span id="cb39-20"><a href="#cb39-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">.legend_max_width =</span> <span class="dv">10</span>, <span class="co"># For mobile screens</span></span>
<span id="cb39-21"><a href="#cb39-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">.conf_interval_show =</span> <span class="cn">FALSE</span>,</span>
<span id="cb39-22"><a href="#cb39-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">.title =</span> <span class="st">"Model Forecasts vs Actual Sales (Test Set)"</span></span>
<span id="cb39-23"><a href="#cb39-23" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-7c14583198c50d397c9c" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-7c14583198c50d397c9c">{"x":{"data":[{"x":["2018-01-01","2018-02-01","2018-03-01","2018-04-01","2018-05-01","2018-06-01","2018-07-01","2018-08-01","2018-09-01","2018-10-01","2018-11-01","2018-12-01","2019-01-01","2019-02-01","2019-03-01","2019-04-01","2019-05-01","2019-06-01","2019-07-01","2019-08-01","2019-09-01","2019-10-01","2019-11-01","2019-12-01","2020-01-01","2020-02-01","2020-03-01","2020-04-01","2020-05-01","2020-06-01","2020-07-01","2020-08-01","2020-09-01","2020-10-01","2020-11-01","2020-12-01","2021-01-01","2021-02-01","2021-03-01","2021-04-01","2021-05-01","2021-06-01","2021-07-01","2021-08-01","2021-09-01","2021-10-01","2021-11-01","2021-12-01","2022-01-01","2022-02-01","2022-03-01","2022-04-01","2022-05-01","2022-06-01","2022-07-01","2022-08-01","2022-09-01","2022-10-01","2022-11-01","2022-12-01","2023-01-01","2023-02-01","2023-03-01","2023-04-01","2023-05-01","2023-06-01","2023-07-01","2023-08-01","2023-09-01","2023-10-01","2023-11-01","2023-12-01","2024-01-01"],"y":[132001,103489,116015,69447,100724,92142,76744.118397692204,119214,98478,81370,155923,153946,173323,109364,172609,24693.000000000007,79815,53377,158612,106772,157821,73594,66863.807531436003,121287,145652,144640.30327087396,83426.916425788324,49230,88628,70484,146170,110401,185050,182977,223930,182977,121287,133210,227041,199672.29019490481,131655,147726,223231,188161,188161,225486,186606,223930,291841,228078,243111.00000000003,200084,119786.32692020304,149279,273178,195418,175201,232743,244666,240519,227676,151873,303764,229633,147207,185196,233780,262292,229633,175201,320383.38865746366,321930,243165],"text":[".index: 2018-01-01<br />.value: 132001.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2018-02-01<br />.value: 103489.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2018-03-01<br />.value: 116015.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2018-04-01<br />.value:  69447.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2018-05-01<br />.value: 100724.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2018-06-01<br />.value:  92142.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2018-07-01<br />.value:  76744.12<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2018-08-01<br />.value: 119214.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2018-09-01<br />.value:  98478.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2018-10-01<br />.value:  81370.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2018-11-01<br />.value: 155923.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2018-12-01<br />.value: 153946.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2019-01-01<br />.value: 173323.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2019-02-01<br />.value: 109364.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2019-03-01<br />.value: 172609.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2019-04-01<br />.value:  24693.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2019-05-01<br />.value:  79815.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2019-06-01<br />.value:  53377.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2019-07-01<br />.value: 158612.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2019-08-01<br />.value: 106772.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2019-09-01<br />.value: 157821.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2019-10-01<br />.value:  73594.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2019-11-01<br />.value:  66863.81<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2019-12-01<br />.value: 121287.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2020-01-01<br />.value: 145652.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2020-02-01<br />.value: 144640.30<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2020-03-01<br />.value:  83426.92<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2020-04-01<br />.value:  49230.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2020-05-01<br />.value:  88628.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2020-06-01<br />.value:  70484.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2020-07-01<br />.value: 146170.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2020-08-01<br />.value: 110401.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2020-09-01<br />.value: 185050.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2020-10-01<br />.value: 182977.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2020-11-01<br />.value: 223930.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2020-12-01<br />.value: 182977.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2021-01-01<br />.value: 121287.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2021-02-01<br />.value: 133210.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2021-03-01<br />.value: 227041.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2021-04-01<br />.value: 199672.29<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2021-05-01<br />.value: 131655.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2021-06-01<br />.value: 147726.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2021-07-01<br />.value: 223231.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2021-08-01<br />.value: 188161.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2021-09-01<br />.value: 188161.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2021-10-01<br />.value: 225486.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2021-11-01<br />.value: 186606.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2021-12-01<br />.value: 223930.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2022-01-01<br />.value: 291841.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2022-02-01<br />.value: 228078.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2022-03-01<br />.value: 243111.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2022-04-01<br />.value: 200084.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2022-05-01<br />.value: 119786.33<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2022-06-01<br />.value: 149279.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2022-07-01<br />.value: 273178.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2022-08-01<br />.value: 195418.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2022-09-01<br />.value: 175201.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2022-10-01<br />.value: 232743.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2022-11-01<br />.value: 244666.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2022-12-01<br />.value: 240519.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2023-01-01<br />.value: 227676.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2023-02-01<br />.value: 151873.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2023-03-01<br />.value: 303764.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2023-04-01<br />.value: 229633.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2023-05-01<br />.value: 147207.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2023-06-01<br />.value: 185196.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2023-07-01<br />.value: 233780.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2023-08-01<br />.value: 262292.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2023-09-01<br />.value: 229633.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2023-10-01<br />.value: 175201.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2023-11-01<br />.value: 320383.39<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2023-12-01<br />.value: 321930.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2024-01-01<br />.value: 243165.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(44,62,80,1)","dash":"solid"},"hoveron":"points","name":"ACTUAL","legendgroup":"ACTUAL","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":["2023-02-01","2023-03-01","2023-04-01","2023-05-01","2023-06-01","2023-07-01","2023-08-01","2023-09-01","2023-10-01","2023-11-01","2023-12-01","2024-01-01"],"y":[223617.5625,232822.484375,208316.953125,132867.8125,172119.953125,235264.828125,201360.546875,204413.59375,221471.8125,218036.9375,227683.265625,233912.125],"text":[".index: 2023-02-01<br />.value: 223617.56<br />.color_mod: 257_SAL...<br />.color_mod: 257_SAL...",".index: 2023-03-01<br />.value: 232822.48<br />.color_mod: 257_SAL...<br />.color_mod: 257_SAL...",".index: 2023-04-01<br />.value: 208316.95<br />.color_mod: 257_SAL...<br />.color_mod: 257_SAL...",".index: 2023-05-01<br />.value: 132867.81<br />.color_mod: 257_SAL...<br />.color_mod: 257_SAL...",".index: 2023-06-01<br />.value: 172119.95<br />.color_mod: 257_SAL...<br />.color_mod: 257_SAL...",".index: 2023-07-01<br />.value: 235264.83<br />.color_mod: 257_SAL...<br />.color_mod: 257_SAL...",".index: 2023-08-01<br />.value: 201360.55<br />.color_mod: 257_SAL...<br />.color_mod: 257_SAL...",".index: 2023-09-01<br />.value: 204413.59<br />.color_mod: 257_SAL...<br />.color_mod: 257_SAL...",".index: 2023-10-01<br />.value: 221471.81<br />.color_mod: 257_SAL...<br />.color_mod: 257_SAL...",".index: 2023-11-01<br />.value: 218036.94<br />.color_mod: 257_SAL...<br />.color_mod: 257_SAL...",".index: 2023-12-01<br />.value: 227683.27<br />.color_mod: 257_SAL...<br />.color_mod: 257_SAL...",".index: 2024-01-01<br />.value: 233912.12<br />.color_mod: 257_SAL...<br />.color_mod: 257_SAL..."],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(227,26,28,1)","dash":"solid"},"hoveron":"points","name":"257_SAL...","legendgroup":"257_SAL...","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":["2023-02-01","2023-03-01","2023-04-01","2023-05-01","2023-06-01","2023-07-01","2023-08-01","2023-09-01","2023-10-01","2023-11-01","2023-12-01","2024-01-01"],"y":[223617.5625,232822.484375,208316.953125,132867.8125,172119.953125,235264.828125,201360.546875,204413.59375,221471.8125,218036.9375,227683.265625,233912.125],"text":[".index: 2023-02-01<br />.value: 223617.56<br />.color_mod: 258_SAL...<br />.color_mod: 258_SAL...",".index: 2023-03-01<br />.value: 232822.48<br />.color_mod: 258_SAL...<br />.color_mod: 258_SAL...",".index: 2023-04-01<br />.value: 208316.95<br />.color_mod: 258_SAL...<br />.color_mod: 258_SAL...",".index: 2023-05-01<br />.value: 132867.81<br />.color_mod: 258_SAL...<br />.color_mod: 258_SAL...",".index: 2023-06-01<br />.value: 172119.95<br />.color_mod: 258_SAL...<br />.color_mod: 258_SAL...",".index: 2023-07-01<br />.value: 235264.83<br />.color_mod: 258_SAL...<br />.color_mod: 258_SAL...",".index: 2023-08-01<br />.value: 201360.55<br />.color_mod: 258_SAL...<br />.color_mod: 258_SAL...",".index: 2023-09-01<br />.value: 204413.59<br />.color_mod: 258_SAL...<br />.color_mod: 258_SAL...",".index: 2023-10-01<br />.value: 221471.81<br />.color_mod: 258_SAL...<br />.color_mod: 258_SAL...",".index: 2023-11-01<br />.value: 218036.94<br />.color_mod: 258_SAL...<br />.color_mod: 258_SAL...",".index: 2023-12-01<br />.value: 227683.27<br />.color_mod: 258_SAL...<br />.color_mod: 258_SAL...",".index: 2024-01-01<br />.value: 233912.12<br />.color_mod: 258_SAL...<br />.color_mod: 258_SAL..."],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(24,188,156,1)","dash":"solid"},"hoveron":"points","name":"258_SAL...","legendgroup":"258_SAL...","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":["2023-02-01","2023-03-01","2023-04-01","2023-05-01","2023-06-01","2023-07-01","2023-08-01","2023-09-01","2023-10-01","2023-11-01","2023-12-01","2024-01-01"],"y":[223617.5625,232822.484375,208316.953125,132867.8125,172119.953125,235264.828125,201360.546875,204413.59375,221471.8125,218036.9375,227683.265625,233912.125],"text":[".index: 2023-02-01<br />.value: 223617.56<br />.color_mod: 259_SAL...<br />.color_mod: 259_SAL...",".index: 2023-03-01<br />.value: 232822.48<br />.color_mod: 259_SAL...<br />.color_mod: 259_SAL...",".index: 2023-04-01<br />.value: 208316.95<br />.color_mod: 259_SAL...<br />.color_mod: 259_SAL...",".index: 2023-05-01<br />.value: 132867.81<br />.color_mod: 259_SAL...<br />.color_mod: 259_SAL...",".index: 2023-06-01<br />.value: 172119.95<br />.color_mod: 259_SAL...<br />.color_mod: 259_SAL...",".index: 2023-07-01<br />.value: 235264.83<br />.color_mod: 259_SAL...<br />.color_mod: 259_SAL...",".index: 2023-08-01<br />.value: 201360.55<br />.color_mod: 259_SAL...<br />.color_mod: 259_SAL...",".index: 2023-09-01<br />.value: 204413.59<br />.color_mod: 259_SAL...<br />.color_mod: 259_SAL...",".index: 2023-10-01<br />.value: 221471.81<br />.color_mod: 259_SAL...<br />.color_mod: 259_SAL...",".index: 2023-11-01<br />.value: 218036.94<br />.color_mod: 259_SAL...<br />.color_mod: 259_SAL...",".index: 2023-12-01<br />.value: 227683.27<br />.color_mod: 259_SAL...<br />.color_mod: 259_SAL...",".index: 2024-01-01<br />.value: 233912.12<br />.color_mod: 259_SAL...<br />.color_mod: 259_SAL..."],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(204,190,147,1)","dash":"solid"},"hoveron":"points","name":"259_SAL...","legendgroup":"259_SAL...","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":["2023-02-01","2023-03-01","2023-04-01","2023-05-01","2023-06-01","2023-07-01","2023-08-01","2023-09-01","2023-10-01","2023-11-01","2023-12-01","2024-01-01"],"y":[223617.5625,232822.484375,208316.953125,132867.8125,172119.953125,235264.828125,201360.546875,204413.59375,221471.8125,218036.9375,227683.265625,233912.125],"text":[".index: 2023-02-01<br />.value: 223617.56<br />.color_mod: 260_SAL...<br />.color_mod: 260_SAL...",".index: 2023-03-01<br />.value: 232822.48<br />.color_mod: 260_SAL...<br />.color_mod: 260_SAL...",".index: 2023-04-01<br />.value: 208316.95<br />.color_mod: 260_SAL...<br />.color_mod: 260_SAL...",".index: 2023-05-01<br />.value: 132867.81<br />.color_mod: 260_SAL...<br />.color_mod: 260_SAL...",".index: 2023-06-01<br />.value: 172119.95<br />.color_mod: 260_SAL...<br />.color_mod: 260_SAL...",".index: 2023-07-01<br />.value: 235264.83<br />.color_mod: 260_SAL...<br />.color_mod: 260_SAL...",".index: 2023-08-01<br />.value: 201360.55<br />.color_mod: 260_SAL...<br />.color_mod: 260_SAL...",".index: 2023-09-01<br />.value: 204413.59<br />.color_mod: 260_SAL...<br />.color_mod: 260_SAL...",".index: 2023-10-01<br />.value: 221471.81<br />.color_mod: 260_SAL...<br />.color_mod: 260_SAL...",".index: 2023-11-01<br />.value: 218036.94<br />.color_mod: 260_SAL...<br />.color_mod: 260_SAL...",".index: 2023-12-01<br />.value: 227683.27<br />.color_mod: 260_SAL...<br />.color_mod: 260_SAL...",".index: 2024-01-01<br />.value: 233912.12<br />.color_mod: 260_SAL...<br />.color_mod: 260_SAL..."],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(166,206,227,1)","dash":"solid"},"hoveron":"points","name":"260_SAL...","legendgroup":"260_SAL...","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":["2023-02-01","2023-03-01","2023-04-01","2023-05-01","2023-06-01","2023-07-01","2023-08-01","2023-09-01","2023-10-01","2023-11-01","2023-12-01","2024-01-01"],"y":[218867.296875,233965.40625,211213.71875,158461.265625,176081.28125,227102.96875,203712.078125,203712.078125,228054.203125,219720.421875,233519.96875,229076.265625],"text":[".index: 2023-02-01<br />.value: 218867.30<br />.color_mod: 261_SAL...<br />.color_mod: 261_SAL...",".index: 2023-03-01<br />.value: 233965.41<br />.color_mod: 261_SAL...<br />.color_mod: 261_SAL...",".index: 2023-04-01<br />.value: 211213.72<br />.color_mod: 261_SAL...<br />.color_mod: 261_SAL...",".index: 2023-05-01<br />.value: 158461.27<br />.color_mod: 261_SAL...<br />.color_mod: 261_SAL...",".index: 2023-06-01<br />.value: 176081.28<br />.color_mod: 261_SAL...<br />.color_mod: 261_SAL...",".index: 2023-07-01<br />.value: 227102.97<br />.color_mod: 261_SAL...<br />.color_mod: 261_SAL...",".index: 2023-08-01<br />.value: 203712.08<br />.color_mod: 261_SAL...<br />.color_mod: 261_SAL...",".index: 2023-09-01<br />.value: 203712.08<br />.color_mod: 261_SAL...<br />.color_mod: 261_SAL...",".index: 2023-10-01<br />.value: 228054.20<br />.color_mod: 261_SAL...<br />.color_mod: 261_SAL...",".index: 2023-11-01<br />.value: 219720.42<br />.color_mod: 261_SAL...<br />.color_mod: 261_SAL...",".index: 2023-12-01<br />.value: 233519.97<br />.color_mod: 261_SAL...<br />.color_mod: 261_SAL...",".index: 2024-01-01<br />.value: 229076.27<br />.color_mod: 261_SAL...<br />.color_mod: 261_SAL..."],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(31,120,180,1)","dash":"solid"},"hoveron":"points","name":"261_SAL...","legendgroup":"261_SAL...","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":["2023-02-01","2023-03-01","2023-04-01","2023-05-01","2023-06-01","2023-07-01","2023-08-01","2023-09-01","2023-10-01","2023-11-01","2023-12-01","2024-01-01"],"y":[218867.296875,233965.40625,211213.71875,158461.265625,176081.28125,227102.96875,203712.078125,203712.078125,228054.203125,219720.421875,233519.96875,229076.265625],"text":[".index: 2023-02-01<br />.value: 218867.30<br />.color_mod: 262_SAL...<br />.color_mod: 262_SAL...",".index: 2023-03-01<br />.value: 233965.41<br />.color_mod: 262_SAL...<br />.color_mod: 262_SAL...",".index: 2023-04-01<br />.value: 211213.72<br />.color_mod: 262_SAL...<br />.color_mod: 262_SAL...",".index: 2023-05-01<br />.value: 158461.27<br />.color_mod: 262_SAL...<br />.color_mod: 262_SAL...",".index: 2023-06-01<br />.value: 176081.28<br />.color_mod: 262_SAL...<br />.color_mod: 262_SAL...",".index: 2023-07-01<br />.value: 227102.97<br />.color_mod: 262_SAL...<br />.color_mod: 262_SAL...",".index: 2023-08-01<br />.value: 203712.08<br />.color_mod: 262_SAL...<br />.color_mod: 262_SAL...",".index: 2023-09-01<br />.value: 203712.08<br />.color_mod: 262_SAL...<br />.color_mod: 262_SAL...",".index: 2023-10-01<br />.value: 228054.20<br />.color_mod: 262_SAL...<br />.color_mod: 262_SAL...",".index: 2023-11-01<br />.value: 219720.42<br />.color_mod: 262_SAL...<br />.color_mod: 262_SAL...",".index: 2023-12-01<br />.value: 233519.97<br />.color_mod: 262_SAL...<br />.color_mod: 262_SAL...",".index: 2024-01-01<br />.value: 229076.27<br />.color_mod: 262_SAL...<br />.color_mod: 262_SAL..."],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(178,223,138,1)","dash":"solid"},"hoveron":"points","name":"262_SAL...","legendgroup":"262_SAL...","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":["2023-02-01","2023-03-01","2023-04-01","2023-05-01","2023-06-01","2023-07-01","2023-08-01","2023-09-01","2023-10-01","2023-11-01","2023-12-01","2024-01-01"],"y":[218867.296875,233965.40625,211213.71875,158461.265625,176081.28125,227102.96875,203712.078125,203712.078125,228054.203125,219720.421875,233519.96875,229076.265625],"text":[".index: 2023-02-01<br />.value: 218867.30<br />.color_mod: 263_SAL...<br />.color_mod: 263_SAL...",".index: 2023-03-01<br />.value: 233965.41<br />.color_mod: 263_SAL...<br />.color_mod: 263_SAL...",".index: 2023-04-01<br />.value: 211213.72<br />.color_mod: 263_SAL...<br />.color_mod: 263_SAL...",".index: 2023-05-01<br />.value: 158461.27<br />.color_mod: 263_SAL...<br />.color_mod: 263_SAL...",".index: 2023-06-01<br />.value: 176081.28<br />.color_mod: 263_SAL...<br />.color_mod: 263_SAL...",".index: 2023-07-01<br />.value: 227102.97<br />.color_mod: 263_SAL...<br />.color_mod: 263_SAL...",".index: 2023-08-01<br />.value: 203712.08<br />.color_mod: 263_SAL...<br />.color_mod: 263_SAL...",".index: 2023-09-01<br />.value: 203712.08<br />.color_mod: 263_SAL...<br />.color_mod: 263_SAL...",".index: 2023-10-01<br />.value: 228054.20<br />.color_mod: 263_SAL...<br />.color_mod: 263_SAL...",".index: 2023-11-01<br />.value: 219720.42<br />.color_mod: 263_SAL...<br />.color_mod: 263_SAL...",".index: 2023-12-01<br />.value: 233519.97<br />.color_mod: 263_SAL...<br />.color_mod: 263_SAL...",".index: 2024-01-01<br />.value: 229076.27<br />.color_mod: 263_SAL...<br />.color_mod: 263_SAL..."],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(251,154,153,1)","dash":"solid"},"hoveron":"points","name":"263_SAL...","legendgroup":"263_SAL...","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":["2023-02-01","2023-03-01","2023-04-01","2023-05-01","2023-06-01","2023-07-01","2023-08-01","2023-09-01","2023-10-01","2023-11-01","2023-12-01","2024-01-01"],"y":[218867.296875,233965.40625,211213.71875,158461.265625,176081.28125,227102.96875,203712.078125,203712.078125,228054.203125,219720.421875,233519.96875,229076.265625],"text":[".index: 2023-02-01<br />.value: 218867.30<br />.color_mod: 264_SAL...<br />.color_mod: 264_SAL...",".index: 2023-03-01<br />.value: 233965.41<br />.color_mod: 264_SAL...<br />.color_mod: 264_SAL...",".index: 2023-04-01<br />.value: 211213.72<br />.color_mod: 264_SAL...<br />.color_mod: 264_SAL...",".index: 2023-05-01<br />.value: 158461.27<br />.color_mod: 264_SAL...<br />.color_mod: 264_SAL...",".index: 2023-06-01<br />.value: 176081.28<br />.color_mod: 264_SAL...<br />.color_mod: 264_SAL...",".index: 2023-07-01<br />.value: 227102.97<br />.color_mod: 264_SAL...<br />.color_mod: 264_SAL...",".index: 2023-08-01<br />.value: 203712.08<br />.color_mod: 264_SAL...<br />.color_mod: 264_SAL...",".index: 2023-09-01<br />.value: 203712.08<br />.color_mod: 264_SAL...<br />.color_mod: 264_SAL...",".index: 2023-10-01<br />.value: 228054.20<br />.color_mod: 264_SAL...<br />.color_mod: 264_SAL...",".index: 2023-11-01<br />.value: 219720.42<br />.color_mod: 264_SAL...<br />.color_mod: 264_SAL...",".index: 2023-12-01<br />.value: 233519.97<br />.color_mod: 264_SAL...<br />.color_mod: 264_SAL...",".index: 2024-01-01<br />.value: 229076.27<br />.color_mod: 264_SAL...<br />.color_mod: 264_SAL..."],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(253,191,111,1)","dash":"solid"},"hoveron":"points","name":"264_SAL...","legendgroup":"264_SAL...","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":["2023-02-01","2023-03-01","2023-04-01","2023-05-01","2023-06-01","2023-07-01","2023-08-01","2023-09-01","2023-10-01","2023-11-01","2023-12-01","2024-01-01"],"y":[223150.890625,237387.6875,209623.0625,143538.390625,162508.8125,232693.9375,196968.25,193766.28125,215905.03125,224644.1875,238024.21875,228442.25],"text":[".index: 2023-02-01<br />.value: 223150.89<br />.color_mod: 277_SAL...<br />.color_mod: 277_SAL...",".index: 2023-03-01<br />.value: 237387.69<br />.color_mod: 277_SAL...<br />.color_mod: 277_SAL...",".index: 2023-04-01<br />.value: 209623.06<br />.color_mod: 277_SAL...<br />.color_mod: 277_SAL...",".index: 2023-05-01<br />.value: 143538.39<br />.color_mod: 277_SAL...<br />.color_mod: 277_SAL...",".index: 2023-06-01<br />.value: 162508.81<br />.color_mod: 277_SAL...<br />.color_mod: 277_SAL...",".index: 2023-07-01<br />.value: 232693.94<br />.color_mod: 277_SAL...<br />.color_mod: 277_SAL...",".index: 2023-08-01<br />.value: 196968.25<br />.color_mod: 277_SAL...<br />.color_mod: 277_SAL...",".index: 2023-09-01<br />.value: 193766.28<br />.color_mod: 277_SAL...<br />.color_mod: 277_SAL...",".index: 2023-10-01<br />.value: 215905.03<br />.color_mod: 277_SAL...<br />.color_mod: 277_SAL...",".index: 2023-11-01<br />.value: 224644.19<br />.color_mod: 277_SAL...<br />.color_mod: 277_SAL...",".index: 2023-12-01<br />.value: 238024.22<br />.color_mod: 277_SAL...<br />.color_mod: 277_SAL...",".index: 2024-01-01<br />.value: 228442.25<br />.color_mod: 277_SAL...<br />.color_mod: 277_SAL..."],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(255,127,0,1)","dash":"solid"},"hoveron":"points","name":"277_SAL...","legendgroup":"277_SAL...","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":["2023-02-01","2023-03-01","2023-04-01","2023-05-01","2023-06-01","2023-07-01","2023-08-01","2023-09-01","2023-10-01","2023-11-01","2023-12-01","2024-01-01"],"y":[223150.890625,237387.6875,209623.0625,143538.390625,162508.8125,232693.9375,196968.25,193766.28125,215905.03125,224644.1875,238024.21875,228442.25],"text":[".index: 2023-02-01<br />.value: 223150.89<br />.color_mod: 278_SAL...<br />.color_mod: 278_SAL...",".index: 2023-03-01<br />.value: 237387.69<br />.color_mod: 278_SAL...<br />.color_mod: 278_SAL...",".index: 2023-04-01<br />.value: 209623.06<br />.color_mod: 278_SAL...<br />.color_mod: 278_SAL...",".index: 2023-05-01<br />.value: 143538.39<br />.color_mod: 278_SAL...<br />.color_mod: 278_SAL...",".index: 2023-06-01<br />.value: 162508.81<br />.color_mod: 278_SAL...<br />.color_mod: 278_SAL...",".index: 2023-07-01<br />.value: 232693.94<br />.color_mod: 278_SAL...<br />.color_mod: 278_SAL...",".index: 2023-08-01<br />.value: 196968.25<br />.color_mod: 278_SAL...<br />.color_mod: 278_SAL...",".index: 2023-09-01<br />.value: 193766.28<br />.color_mod: 278_SAL...<br />.color_mod: 278_SAL...",".index: 2023-10-01<br />.value: 215905.03<br />.color_mod: 278_SAL...<br />.color_mod: 278_SAL...",".index: 2023-11-01<br />.value: 224644.19<br />.color_mod: 278_SAL...<br />.color_mod: 278_SAL...",".index: 2023-12-01<br />.value: 238024.22<br />.color_mod: 278_SAL...<br />.color_mod: 278_SAL...",".index: 2024-01-01<br />.value: 228442.25<br />.color_mod: 278_SAL...<br />.color_mod: 278_SAL..."],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(202,178,214,1)","dash":"solid"},"hoveron":"points","name":"278_SAL...","legendgroup":"278_SAL...","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":["2023-02-01","2023-03-01","2023-04-01","2023-05-01","2023-06-01","2023-07-01","2023-08-01","2023-09-01","2023-10-01","2023-11-01","2023-12-01","2024-01-01"],"y":[223150.890625,237387.6875,209623.0625,143538.390625,162508.8125,232693.9375,196968.25,193766.28125,215905.03125,224644.1875,238024.21875,228442.25],"text":[".index: 2023-02-01<br />.value: 223150.89<br />.color_mod: 279_SAL...<br />.color_mod: 279_SAL...",".index: 2023-03-01<br />.value: 237387.69<br />.color_mod: 279_SAL...<br />.color_mod: 279_SAL...",".index: 2023-04-01<br />.value: 209623.06<br />.color_mod: 279_SAL...<br />.color_mod: 279_SAL...",".index: 2023-05-01<br />.value: 143538.39<br />.color_mod: 279_SAL...<br />.color_mod: 279_SAL...",".index: 2023-06-01<br />.value: 162508.81<br />.color_mod: 279_SAL...<br />.color_mod: 279_SAL...",".index: 2023-07-01<br />.value: 232693.94<br />.color_mod: 279_SAL...<br />.color_mod: 279_SAL...",".index: 2023-08-01<br />.value: 196968.25<br />.color_mod: 279_SAL...<br />.color_mod: 279_SAL...",".index: 2023-09-01<br />.value: 193766.28<br />.color_mod: 279_SAL...<br />.color_mod: 279_SAL...",".index: 2023-10-01<br />.value: 215905.03<br />.color_mod: 279_SAL...<br />.color_mod: 279_SAL...",".index: 2023-11-01<br />.value: 224644.19<br />.color_mod: 279_SAL...<br />.color_mod: 279_SAL...",".index: 2023-12-01<br />.value: 238024.22<br />.color_mod: 279_SAL...<br />.color_mod: 279_SAL...",".index: 2024-01-01<br />.value: 228442.25<br />.color_mod: 279_SAL...<br />.color_mod: 279_SAL..."],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(106,61,154,1)","dash":"solid"},"hoveron":"points","name":"279_SAL...","legendgroup":"279_SAL...","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":["2023-02-01","2023-03-01","2023-04-01","2023-05-01","2023-06-01","2023-07-01","2023-08-01","2023-09-01","2023-10-01","2023-11-01","2023-12-01","2024-01-01"],"y":[223150.890625,237387.6875,209623.0625,143538.390625,162508.8125,232693.9375,196968.25,193766.28125,215905.03125,224644.1875,238024.21875,228442.25],"text":[".index: 2023-02-01<br />.value: 223150.89<br />.color_mod: 280_SAL...<br />.color_mod: 280_SAL...",".index: 2023-03-01<br />.value: 237387.69<br />.color_mod: 280_SAL...<br />.color_mod: 280_SAL...",".index: 2023-04-01<br />.value: 209623.06<br />.color_mod: 280_SAL...<br />.color_mod: 280_SAL...",".index: 2023-05-01<br />.value: 143538.39<br />.color_mod: 280_SAL...<br />.color_mod: 280_SAL...",".index: 2023-06-01<br />.value: 162508.81<br />.color_mod: 280_SAL...<br />.color_mod: 280_SAL...",".index: 2023-07-01<br />.value: 232693.94<br />.color_mod: 280_SAL...<br />.color_mod: 280_SAL...",".index: 2023-08-01<br />.value: 196968.25<br />.color_mod: 280_SAL...<br />.color_mod: 280_SAL...",".index: 2023-09-01<br />.value: 193766.28<br />.color_mod: 280_SAL...<br />.color_mod: 280_SAL...",".index: 2023-10-01<br />.value: 215905.03<br />.color_mod: 280_SAL...<br />.color_mod: 280_SAL...",".index: 2023-11-01<br />.value: 224644.19<br />.color_mod: 280_SAL...<br />.color_mod: 280_SAL...",".index: 2023-12-01<br />.value: 238024.22<br />.color_mod: 280_SAL...<br />.color_mod: 280_SAL...",".index: 2024-01-01<br />.value: 228442.25<br />.color_mod: 280_SAL...<br />.color_mod: 280_SAL..."],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(44,62,80,1)","dash":"solid"},"hoveron":"points","name":"280_SAL...","legendgroup":"280_SAL...","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":43.762557077625573,"r":7.3059360730593621,"b":25.57077625570777,"l":46.027397260273986},"plot_bgcolor":"rgba(255,255,255,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(44,62,80,1)","family":"","size":14.611872146118724},"title":{"text":"Model Forecasts vs Actual Sales (Test Set)","font":{"color":"rgba(44,62,80,1)","family":"","size":17.534246575342465},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"date","autorange":true,"range":["2017-09-13","2024-04-19"],"tickmode":"auto","ticktext":["2018","2020","2022","2024"],"tickvals":[17532,18262,18993,19723],"categoryorder":"array","categoryarray":["2018","2020","2022","2024"],"nticks":null,"ticks":"outside","tickcolor":"rgba(204,204,204,1)","ticklen":3.6529680365296811,"tickwidth":0.22139200221392005,"showticklabels":true,"tickfont":{"color":"rgba(44,62,80,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(204,204,204,1)","gridwidth":0.22139200221392005,"zeroline":false,"anchor":"y","title":{"text":"","font":{"color":"rgba(44,62,80,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":true,"range":[9831.1500000000069,336791.84999999998],"tickmode":"auto","ticktext":["100000","200000","300000"],"tickvals":[100000,200000,300000],"categoryorder":"array","categoryarray":["100000","200000","300000"],"nticks":null,"ticks":"outside","tickcolor":"rgba(204,204,204,1)","ticklen":3.6529680365296811,"tickwidth":0.22139200221392005,"showticklabels":true,"tickfont":{"color":"rgba(44,62,80,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(204,204,204,1)","gridwidth":0.22139200221392005,"zeroline":false,"anchor":"x","title":{"text":"","font":{"color":"rgba(44,62,80,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(44,62,80,1)","width":0.33208800332088001,"linetype":"solid"},"yref":"paper","xref":"paper","layer":"below","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.8897637795275593,"font":{"color":"rgba(44,62,80,1)","family":"","size":11.68949771689498},"title":{"text":"Legend","font":{"color":"rgba(44,62,80,1)","family":"","size":14.611872146118724}}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"260f7b557bd7":{"x":{},"y":{},"colour":{},"type":"scatter"}},"cur_data":"260f7b557bd7","visdat":{"260f7b557bd7":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<hr>
</section>
<section id="refit-to-full-dataset-forecast-forward" class="level2" data-number="12">
<h2 data-number="12" class="anchored" data-anchor-id="refit-to-full-dataset-forecast-forward"><span class="header-section-number">12</span> Refit to Full Dataset &amp; Forecast Forward</h2>
<p>After ranking models on the test set, we select the top performer (lowest MAE) and then <strong>refit it using the full cleaned dataset</strong> so it can learn from all available history. Finally, we generate a <strong>24-month ahead forecast</strong> and plot it alongside the historical sales to visualize the expected future trajectory.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------------------------------------------------------------------</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Select the best model (lowest MAE)</span></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a><span class="co"># - slice_min() can return ties, so we break ties deterministically with_mae then</span></span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a><span class="co">#   take the first row.</span></span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------------------------------------------------------------------</span></span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a>best_model_id <span class="ot">&lt;-</span> model_accuracy_tbl <span class="sc">|&gt;</span></span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(mae, .model_id) <span class="sc">|&gt;</span></span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">1</span>) <span class="sc">|&gt;</span></span>
<span id="cb40-10"><a href="#cb40-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(.model_id)</span>
<span id="cb40-11"><a href="#cb40-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-12"><a href="#cb40-12" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------------------------------------------------------------------</span></span>
<span id="cb40-13"><a href="#cb40-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Refit the winning model on the full dataset</span></span>
<span id="cb40-14"><a href="#cb40-14" aria-hidden="true" tabindex="-1"></a><span class="co"># - Re-training on all history improves the final model before forecasting</span></span>
<span id="cb40-15"><a href="#cb40-15" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------------------------------------------------------------------</span></span>
<span id="cb40-16"><a href="#cb40-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-17"><a href="#cb40-17" aria-hidden="true" tabindex="-1"></a>final_xgb_tbl <span class="ot">&lt;-</span> calibration_tbl <span class="sc">|&gt;</span></span>
<span id="cb40-18"><a href="#cb40-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(.model_id <span class="sc">==</span> best_model_id) <span class="sc">|&gt;</span></span>
<span id="cb40-19"><a href="#cb40-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">modeltime_refit</span>(<span class="at">data =</span> cleaned_sales_df)</span>
<span id="cb40-20"><a href="#cb40-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-21"><a href="#cb40-21" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------------------------------------------------------------------</span></span>
<span id="cb40-22"><a href="#cb40-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Forecast the next 24 months and visualize</span></span>
<span id="cb40-23"><a href="#cb40-23" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------------------------------------------------------------------</span></span>
<span id="cb40-24"><a href="#cb40-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-25"><a href="#cb40-25" aria-hidden="true" tabindex="-1"></a>future_forecast_tbl <span class="ot">&lt;-</span> final_xgb_tbl <span class="sc">|&gt;</span></span>
<span id="cb40-26"><a href="#cb40-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">modeltime_forecast</span>(</span>
<span id="cb40-27"><a href="#cb40-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">h =</span> <span class="st">"24 months"</span>,</span>
<span id="cb40-28"><a href="#cb40-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">actual_data =</span> cleaned_sales_df</span>
<span id="cb40-29"><a href="#cb40-29" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb40-30"><a href="#cb40-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-31"><a href="#cb40-31" aria-hidden="true" tabindex="-1"></a>future_forecast_tbl <span class="sc">|&gt;</span></span>
<span id="cb40-32"><a href="#cb40-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_modeltime_forecast</span>(</span>
<span id="cb40-33"><a href="#cb40-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">.legend_show =</span> <span class="cn">FALSE</span>,</span>
<span id="cb40-34"><a href="#cb40-34" aria-hidden="true" tabindex="-1"></a>    <span class="at">.title =</span> <span class="st">"Final XGBoost Sales Forecast for Product Y (24-Month Horizon)"</span>,</span>
<span id="cb40-35"><a href="#cb40-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">.y_lab =</span> <span class="st">"Sales in USD"</span></span>
<span id="cb40-36"><a href="#cb40-36" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-257a23645e5b022ad93c" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-257a23645e5b022ad93c">{"x":{"data":[{"x":["2018-01-01","2018-02-01","2018-03-01","2018-04-01","2018-05-01","2018-06-01","2018-07-01","2018-08-01","2018-09-01","2018-10-01","2018-11-01","2018-12-01","2019-01-01","2019-02-01","2019-03-01","2019-04-01","2019-05-01","2019-06-01","2019-07-01","2019-08-01","2019-09-01","2019-10-01","2019-11-01","2019-12-01","2020-01-01","2020-02-01","2020-03-01","2020-04-01","2020-05-01","2020-06-01","2020-07-01","2020-08-01","2020-09-01","2020-10-01","2020-11-01","2020-12-01","2021-01-01","2021-02-01","2021-03-01","2021-04-01","2021-05-01","2021-06-01","2021-07-01","2021-08-01","2021-09-01","2021-10-01","2021-11-01","2021-12-01","2022-01-01","2022-02-01","2022-03-01","2022-04-01","2022-05-01","2022-06-01","2022-07-01","2022-08-01","2022-09-01","2022-10-01","2022-11-01","2022-12-01","2023-01-01","2023-02-01","2023-03-01","2023-04-01","2023-05-01","2023-06-01","2023-07-01","2023-08-01","2023-09-01","2023-10-01","2023-11-01","2023-12-01","2024-01-01","2024-01-01","2023-12-01","2023-11-01","2023-10-01","2023-09-01","2023-08-01","2023-07-01","2023-06-01","2023-05-01","2023-04-01","2023-03-01","2023-02-01","2023-01-01","2022-12-01","2022-11-01","2022-10-01","2022-09-01","2022-08-01","2022-07-01","2022-06-01","2022-05-01","2022-04-01","2022-03-01","2022-02-01","2022-01-01","2021-12-01","2021-11-01","2021-10-01","2021-09-01","2021-08-01","2021-07-01","2021-06-01","2021-05-01","2021-04-01","2021-03-01","2021-02-01","2021-01-01","2020-12-01","2020-11-01","2020-10-01","2020-09-01","2020-08-01","2020-07-01","2020-06-01","2020-05-01","2020-04-01","2020-03-01","2020-02-01","2020-01-01","2019-12-01","2019-11-01","2019-10-01","2019-09-01","2019-08-01","2019-07-01","2019-06-01","2019-05-01","2019-04-01","2019-03-01","2019-02-01","2019-01-01","2018-12-01","2018-11-01","2018-10-01","2018-09-01","2018-08-01","2018-07-01","2018-06-01","2018-05-01","2018-04-01","2018-03-01","2018-02-01","2018-01-01","2018-01-01"],"y":[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],"text":[".index: 2018-01-01<br />.value: 132001.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2018-02-01<br />.value: 103489.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2018-03-01<br />.value: 116015.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2018-04-01<br />.value:  69447.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2018-05-01<br />.value: 100724.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2018-06-01<br />.value:  92142.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2018-07-01<br />.value:  76744.12<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2018-08-01<br />.value: 119214.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2018-09-01<br />.value:  98478.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2018-10-01<br />.value:  81370.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2018-11-01<br />.value: 155923.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2018-12-01<br />.value: 153946.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2019-01-01<br />.value: 173323.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2019-02-01<br />.value: 109364.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2019-03-01<br />.value: 172609.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2019-04-01<br />.value:  24693.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2019-05-01<br />.value:  79815.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2019-06-01<br />.value:  53377.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2019-07-01<br />.value: 158612.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2019-08-01<br />.value: 106772.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2019-09-01<br />.value: 157821.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2019-10-01<br />.value:  73594.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2019-11-01<br />.value:  66863.81<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2019-12-01<br />.value: 121287.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2020-01-01<br />.value: 145652.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2020-02-01<br />.value: 144640.30<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2020-03-01<br />.value:  83426.92<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2020-04-01<br />.value:  49230.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2020-05-01<br />.value:  88628.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2020-06-01<br />.value:  70484.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2020-07-01<br />.value: 146170.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2020-08-01<br />.value: 110401.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2020-09-01<br />.value: 185050.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2020-10-01<br />.value: 182977.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2020-11-01<br />.value: 223930.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2020-12-01<br />.value: 182977.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2021-01-01<br />.value: 121287.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2021-02-01<br />.value: 133210.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2021-03-01<br />.value: 227041.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2021-04-01<br />.value: 199672.29<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2021-05-01<br />.value: 131655.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2021-06-01<br />.value: 147726.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2021-07-01<br />.value: 223231.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2021-08-01<br />.value: 188161.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2021-09-01<br />.value: 188161.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2021-10-01<br />.value: 225486.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2021-11-01<br />.value: 186606.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2021-12-01<br />.value: 223930.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2022-01-01<br />.value: 291841.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2022-02-01<br />.value: 228078.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2022-03-01<br />.value: 243111.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2022-04-01<br />.value: 200084.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2022-05-01<br />.value: 119786.33<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2022-06-01<br />.value: 149279.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2022-07-01<br />.value: 273178.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2022-08-01<br />.value: 195418.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2022-09-01<br />.value: 175201.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2022-10-01<br />.value: 232743.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2022-11-01<br />.value: 244666.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2022-12-01<br />.value: 240519.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2023-01-01<br />.value: 227676.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2023-02-01<br />.value: 151873.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2023-03-01<br />.value: 303764.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2023-04-01<br />.value: 229633.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2023-05-01<br />.value: 147207.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2023-06-01<br />.value: 185196.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2023-07-01<br />.value: 233780.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2023-08-01<br />.value: 262292.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2023-09-01<br />.value: 229633.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2023-10-01<br />.value: 175201.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2023-11-01<br />.value: 320383.39<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2023-12-01<br />.value: 321930.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2024-01-01<br />.value: 243165.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2024-01-01<br />.value: 243165.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2023-12-01<br />.value: 321930.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2023-11-01<br />.value: 320383.39<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2023-10-01<br />.value: 175201.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2023-09-01<br />.value: 229633.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2023-08-01<br />.value: 262292.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2023-07-01<br />.value: 233780.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2023-06-01<br />.value: 185196.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2023-05-01<br />.value: 147207.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2023-04-01<br />.value: 229633.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2023-03-01<br />.value: 303764.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2023-02-01<br />.value: 151873.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2023-01-01<br />.value: 227676.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2022-12-01<br />.value: 240519.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2022-11-01<br />.value: 244666.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2022-10-01<br />.value: 232743.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2022-09-01<br />.value: 175201.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2022-08-01<br />.value: 195418.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2022-07-01<br />.value: 273178.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2022-06-01<br />.value: 149279.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2022-05-01<br />.value: 119786.33<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2022-04-01<br />.value: 200084.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2022-03-01<br />.value: 243111.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2022-02-01<br />.value: 228078.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2022-01-01<br />.value: 291841.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2021-12-01<br />.value: 223930.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2021-11-01<br />.value: 186606.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2021-10-01<br />.value: 225486.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2021-09-01<br />.value: 188161.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2021-08-01<br />.value: 188161.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2021-07-01<br />.value: 223231.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2021-06-01<br />.value: 147726.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2021-05-01<br />.value: 131655.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2021-04-01<br />.value: 199672.29<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2021-03-01<br />.value: 227041.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2021-02-01<br />.value: 133210.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2021-01-01<br />.value: 121287.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2020-12-01<br />.value: 182977.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2020-11-01<br />.value: 223930.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2020-10-01<br />.value: 182977.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2020-09-01<br />.value: 185050.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2020-08-01<br />.value: 110401.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2020-07-01<br />.value: 146170.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2020-06-01<br />.value:  70484.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2020-05-01<br />.value:  88628.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2020-04-01<br />.value:  49230.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2020-03-01<br />.value:  83426.92<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2020-02-01<br />.value: 144640.30<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2020-01-01<br />.value: 145652.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2019-12-01<br />.value: 121287.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2019-11-01<br />.value:  66863.81<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2019-10-01<br />.value:  73594.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2019-09-01<br />.value: 157821.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2019-08-01<br />.value: 106772.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2019-07-01<br />.value: 158612.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2019-06-01<br />.value:  53377.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2019-05-01<br />.value:  79815.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2019-04-01<br />.value:  24693.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2019-03-01<br />.value: 172609.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2019-02-01<br />.value: 109364.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2019-01-01<br />.value: 173323.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2018-12-01<br />.value: 153946.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2018-11-01<br />.value: 155923.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2018-10-01<br />.value:  81370.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2018-09-01<br />.value:  98478.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2018-08-01<br />.value: 119214.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2018-07-01<br />.value:  76744.12<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2018-06-01<br />.value:  92142.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2018-05-01<br />.value: 100724.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2018-04-01<br />.value:  69447.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2018-03-01<br />.value: 116015.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2018-02-01<br />.value: 103489.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2018-01-01<br />.value: 132001.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL",".index: 2018-01-01<br />.value: 132001.00<br />.conf_lo:        NA<br />.conf_hi:       NA<br />.model_desc: ACTUAL"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(44,62,80,0.2)","dash":"none"},"fill":"toself","fillcolor":"rgba(51,51,51,0.2)","hoveron":"points","name":"ACTUAL","legendgroup":"ACTUAL","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":["2024-02-01","2024-03-01","2024-04-01","2024-05-01","2024-06-01","2024-07-01","2024-08-01","2024-09-01","2024-10-01","2024-11-01","2024-12-01","2025-01-01","2025-02-01","2025-03-01","2025-04-01","2025-05-01","2025-06-01","2025-07-01","2025-08-01","2025-09-01","2025-10-01","2025-11-01","2025-12-01","2026-01-01","2026-01-01","2026-01-01","2025-12-01","2025-11-01","2025-10-01","2025-09-01","2025-08-01","2025-07-01","2025-06-01","2025-05-01","2025-04-01","2025-03-01","2025-02-01","2025-01-01","2024-12-01","2024-11-01","2024-10-01","2024-09-01","2024-08-01","2024-07-01","2024-06-01","2024-05-01","2024-04-01","2024-03-01","2024-02-01","2024-02-01"],"y":[149443.92235387125,156169.04735387125,73593.062978871269,100684.57860387127,116518.73485387127,99226.781728871269,139888.51610387125,117181.29735387127,135762.95360387125,191742.79735387125,165780.39110387125,155220.82860387125,153217.28172887125,179801.98485387125,137584.14110387125,96911.219228871269,97195.906728871269,128528.90672887127,149950.04735387125,117181.29735387127,127177.14110387127,189474.79735387125,165780.39110387125,151447.46922887125,151447.46922887125,364744.24952112872,379077.17139612872,402771.57764612872,340473.92139612872,330478.07764612872,363246.82764612872,341825.68702112872,310492.68702112872,310207.99952112872,350880.92139612872,393098.76514612872,366514.06202112872,368517.60889612872,379077.17139612872,405039.57764612872,349059.73389612872,330478.07764612872,353185.29639612872,312523.56202112872,329815.51514612872,313981.35889612872,286889.84327112872,369465.82764612872,362740.70264612872,149443.92235387125],"text":[".index: 2024-02-01<br />.value: 256092.31<br />.conf_lo: 149443.92<br />.conf_hi: 362740.7<br />.model_desc: 277_SALES_RECIPE_BOOST_TREE_277",".index: 2024-03-01<br />.value: 262817.44<br />.conf_lo: 156169.05<br />.conf_hi: 369465.8<br />.model_desc: 277_SALES_RECIPE_BOOST_TREE_277",".index: 2024-04-01<br />.value: 180241.45<br />.conf_lo:  73593.06<br />.conf_hi: 286889.8<br />.model_desc: 277_SALES_RECIPE_BOOST_TREE_277",".index: 2024-05-01<br />.value: 207332.97<br />.conf_lo: 100684.58<br />.conf_hi: 313981.4<br />.model_desc: 277_SALES_RECIPE_BOOST_TREE_277",".index: 2024-06-01<br />.value: 223167.12<br />.conf_lo: 116518.73<br />.conf_hi: 329815.5<br />.model_desc: 277_SALES_RECIPE_BOOST_TREE_277",".index: 2024-07-01<br />.value: 205875.17<br />.conf_lo:  99226.78<br />.conf_hi: 312523.6<br />.model_desc: 277_SALES_RECIPE_BOOST_TREE_277",".index: 2024-08-01<br />.value: 246536.91<br />.conf_lo: 139888.52<br />.conf_hi: 353185.3<br />.model_desc: 277_SALES_RECIPE_BOOST_TREE_277",".index: 2024-09-01<br />.value: 223829.69<br />.conf_lo: 117181.30<br />.conf_hi: 330478.1<br />.model_desc: 277_SALES_RECIPE_BOOST_TREE_277",".index: 2024-10-01<br />.value: 242411.34<br />.conf_lo: 135762.95<br />.conf_hi: 349059.7<br />.model_desc: 277_SALES_RECIPE_BOOST_TREE_277",".index: 2024-11-01<br />.value: 298391.19<br />.conf_lo: 191742.80<br />.conf_hi: 405039.6<br />.model_desc: 277_SALES_RECIPE_BOOST_TREE_277",".index: 2024-12-01<br />.value: 272428.78<br />.conf_lo: 165780.39<br />.conf_hi: 379077.2<br />.model_desc: 277_SALES_RECIPE_BOOST_TREE_277",".index: 2025-01-01<br />.value: 261869.22<br />.conf_lo: 155220.83<br />.conf_hi: 368517.6<br />.model_desc: 277_SALES_RECIPE_BOOST_TREE_277",".index: 2025-02-01<br />.value: 259865.67<br />.conf_lo: 153217.28<br />.conf_hi: 366514.1<br />.model_desc: 277_SALES_RECIPE_BOOST_TREE_277",".index: 2025-03-01<br />.value: 286450.38<br />.conf_lo: 179801.98<br />.conf_hi: 393098.8<br />.model_desc: 277_SALES_RECIPE_BOOST_TREE_277",".index: 2025-04-01<br />.value: 244232.53<br />.conf_lo: 137584.14<br />.conf_hi: 350880.9<br />.model_desc: 277_SALES_RECIPE_BOOST_TREE_277",".index: 2025-05-01<br />.value: 203559.61<br />.conf_lo:  96911.22<br />.conf_hi: 310208.0<br />.model_desc: 277_SALES_RECIPE_BOOST_TREE_277",".index: 2025-06-01<br />.value: 203844.30<br />.conf_lo:  97195.91<br />.conf_hi: 310492.7<br />.model_desc: 277_SALES_RECIPE_BOOST_TREE_277",".index: 2025-07-01<br />.value: 235177.30<br />.conf_lo: 128528.91<br />.conf_hi: 341825.7<br />.model_desc: 277_SALES_RECIPE_BOOST_TREE_277",".index: 2025-08-01<br />.value: 256598.44<br />.conf_lo: 149950.05<br />.conf_hi: 363246.8<br />.model_desc: 277_SALES_RECIPE_BOOST_TREE_277",".index: 2025-09-01<br />.value: 223829.69<br />.conf_lo: 117181.30<br />.conf_hi: 330478.1<br />.model_desc: 277_SALES_RECIPE_BOOST_TREE_277",".index: 2025-10-01<br />.value: 233825.53<br />.conf_lo: 127177.14<br />.conf_hi: 340473.9<br />.model_desc: 277_SALES_RECIPE_BOOST_TREE_277",".index: 2025-11-01<br />.value: 296123.19<br />.conf_lo: 189474.80<br />.conf_hi: 402771.6<br />.model_desc: 277_SALES_RECIPE_BOOST_TREE_277",".index: 2025-12-01<br />.value: 272428.78<br />.conf_lo: 165780.39<br />.conf_hi: 379077.2<br />.model_desc: 277_SALES_RECIPE_BOOST_TREE_277",".index: 2026-01-01<br />.value: 258095.86<br />.conf_lo: 151447.47<br />.conf_hi: 364744.2<br />.model_desc: 277_SALES_RECIPE_BOOST_TREE_277",".index: 2026-01-01<br />.value: 258095.86<br />.conf_lo: 151447.47<br />.conf_hi: 364744.2<br />.model_desc: 277_SALES_RECIPE_BOOST_TREE_277",".index: 2026-01-01<br />.value: 258095.86<br />.conf_lo: 151447.47<br />.conf_hi: 364744.2<br />.model_desc: 277_SALES_RECIPE_BOOST_TREE_277",".index: 2025-12-01<br />.value: 272428.78<br />.conf_lo: 165780.39<br />.conf_hi: 379077.2<br />.model_desc: 277_SALES_RECIPE_BOOST_TREE_277",".index: 2025-11-01<br />.value: 296123.19<br />.conf_lo: 189474.80<br />.conf_hi: 402771.6<br />.model_desc: 277_SALES_RECIPE_BOOST_TREE_277",".index: 2025-10-01<br />.value: 233825.53<br />.conf_lo: 127177.14<br />.conf_hi: 340473.9<br />.model_desc: 277_SALES_RECIPE_BOOST_TREE_277",".index: 2025-09-01<br />.value: 223829.69<br />.conf_lo: 117181.30<br />.conf_hi: 330478.1<br />.model_desc: 277_SALES_RECIPE_BOOST_TREE_277",".index: 2025-08-01<br />.value: 256598.44<br />.conf_lo: 149950.05<br />.conf_hi: 363246.8<br />.model_desc: 277_SALES_RECIPE_BOOST_TREE_277",".index: 2025-07-01<br />.value: 235177.30<br />.conf_lo: 128528.91<br />.conf_hi: 341825.7<br />.model_desc: 277_SALES_RECIPE_BOOST_TREE_277",".index: 2025-06-01<br />.value: 203844.30<br />.conf_lo:  97195.91<br />.conf_hi: 310492.7<br />.model_desc: 277_SALES_RECIPE_BOOST_TREE_277",".index: 2025-05-01<br />.value: 203559.61<br />.conf_lo:  96911.22<br />.conf_hi: 310208.0<br />.model_desc: 277_SALES_RECIPE_BOOST_TREE_277",".index: 2025-04-01<br />.value: 244232.53<br />.conf_lo: 137584.14<br />.conf_hi: 350880.9<br />.model_desc: 277_SALES_RECIPE_BOOST_TREE_277",".index: 2025-03-01<br />.value: 286450.38<br />.conf_lo: 179801.98<br />.conf_hi: 393098.8<br />.model_desc: 277_SALES_RECIPE_BOOST_TREE_277",".index: 2025-02-01<br />.value: 259865.67<br />.conf_lo: 153217.28<br />.conf_hi: 366514.1<br />.model_desc: 277_SALES_RECIPE_BOOST_TREE_277",".index: 2025-01-01<br />.value: 261869.22<br />.conf_lo: 155220.83<br />.conf_hi: 368517.6<br />.model_desc: 277_SALES_RECIPE_BOOST_TREE_277",".index: 2024-12-01<br />.value: 272428.78<br />.conf_lo: 165780.39<br />.conf_hi: 379077.2<br />.model_desc: 277_SALES_RECIPE_BOOST_TREE_277",".index: 2024-11-01<br />.value: 298391.19<br />.conf_lo: 191742.80<br />.conf_hi: 405039.6<br />.model_desc: 277_SALES_RECIPE_BOOST_TREE_277",".index: 2024-10-01<br />.value: 242411.34<br />.conf_lo: 135762.95<br />.conf_hi: 349059.7<br />.model_desc: 277_SALES_RECIPE_BOOST_TREE_277",".index: 2024-09-01<br />.value: 223829.69<br />.conf_lo: 117181.30<br />.conf_hi: 330478.1<br />.model_desc: 277_SALES_RECIPE_BOOST_TREE_277",".index: 2024-08-01<br />.value: 246536.91<br />.conf_lo: 139888.52<br />.conf_hi: 353185.3<br />.model_desc: 277_SALES_RECIPE_BOOST_TREE_277",".index: 2024-07-01<br />.value: 205875.17<br />.conf_lo:  99226.78<br />.conf_hi: 312523.6<br />.model_desc: 277_SALES_RECIPE_BOOST_TREE_277",".index: 2024-06-01<br />.value: 223167.12<br />.conf_lo: 116518.73<br />.conf_hi: 329815.5<br />.model_desc: 277_SALES_RECIPE_BOOST_TREE_277",".index: 2024-05-01<br />.value: 207332.97<br />.conf_lo: 100684.58<br />.conf_hi: 313981.4<br />.model_desc: 277_SALES_RECIPE_BOOST_TREE_277",".index: 2024-04-01<br />.value: 180241.45<br />.conf_lo:  73593.06<br />.conf_hi: 286889.8<br />.model_desc: 277_SALES_RECIPE_BOOST_TREE_277",".index: 2024-03-01<br />.value: 262817.44<br />.conf_lo: 156169.05<br />.conf_hi: 369465.8<br />.model_desc: 277_SALES_RECIPE_BOOST_TREE_277",".index: 2024-02-01<br />.value: 256092.31<br />.conf_lo: 149443.92<br />.conf_hi: 362740.7<br />.model_desc: 277_SALES_RECIPE_BOOST_TREE_277",".index: 2024-02-01<br />.value: 256092.31<br />.conf_lo: 149443.92<br />.conf_hi: 362740.7<br />.model_desc: 277_SALES_RECIPE_BOOST_TREE_277"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(227,26,28,0.2)","dash":"none"},"fill":"toself","fillcolor":"rgba(51,51,51,0.2)","hoveron":"points","name":"277_SALES_RECIPE_BOOST_TREE_277","legendgroup":"277_SALES_RECIPE_BOOST_TREE_277","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":["2018-01-01","2018-02-01","2018-03-01","2018-04-01","2018-05-01","2018-06-01","2018-07-01","2018-08-01","2018-09-01","2018-10-01","2018-11-01","2018-12-01","2019-01-01","2019-02-01","2019-03-01","2019-04-01","2019-05-01","2019-06-01","2019-07-01","2019-08-01","2019-09-01","2019-10-01","2019-11-01","2019-12-01","2020-01-01","2020-02-01","2020-03-01","2020-04-01","2020-05-01","2020-06-01","2020-07-01","2020-08-01","2020-09-01","2020-10-01","2020-11-01","2020-12-01","2021-01-01","2021-02-01","2021-03-01","2021-04-01","2021-05-01","2021-06-01","2021-07-01","2021-08-01","2021-09-01","2021-10-01","2021-11-01","2021-12-01","2022-01-01","2022-02-01","2022-03-01","2022-04-01","2022-05-01","2022-06-01","2022-07-01","2022-08-01","2022-09-01","2022-10-01","2022-11-01","2022-12-01","2023-01-01","2023-02-01","2023-03-01","2023-04-01","2023-05-01","2023-06-01","2023-07-01","2023-08-01","2023-09-01","2023-10-01","2023-11-01","2023-12-01","2024-01-01"],"y":[132001,103489,116015,69447,100724,92142,76744.118397692204,119214,98478,81370,155923,153946,173323,109364,172609,24693.000000000007,79815,53377,158612,106772,157821,73594,66863.807531436003,121287,145652,144640.30327087396,83426.916425788324,49230,88628,70484,146170,110401,185050,182977,223930,182977,121287,133210,227041,199672.29019490481,131655,147726,223231,188161,188161,225486,186606,223930,291841,228078,243111.00000000003,200084,119786.32692020304,149279,273178,195418,175201,232743,244666,240519,227676,151873,303764,229633,147207,185196,233780,262292,229633,175201,320383.38865746366,321930,243165],"text":[".index: 2018-01-01<br />.value: 132001.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2018-02-01<br />.value: 103489.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2018-03-01<br />.value: 116015.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2018-04-01<br />.value:  69447.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2018-05-01<br />.value: 100724.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2018-06-01<br />.value:  92142.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2018-07-01<br />.value:  76744.12<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2018-08-01<br />.value: 119214.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2018-09-01<br />.value:  98478.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2018-10-01<br />.value:  81370.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2018-11-01<br />.value: 155923.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2018-12-01<br />.value: 153946.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2019-01-01<br />.value: 173323.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2019-02-01<br />.value: 109364.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2019-03-01<br />.value: 172609.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2019-04-01<br />.value:  24693.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2019-05-01<br />.value:  79815.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2019-06-01<br />.value:  53377.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2019-07-01<br />.value: 158612.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2019-08-01<br />.value: 106772.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2019-09-01<br />.value: 157821.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2019-10-01<br />.value:  73594.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2019-11-01<br />.value:  66863.81<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2019-12-01<br />.value: 121287.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2020-01-01<br />.value: 145652.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2020-02-01<br />.value: 144640.30<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2020-03-01<br />.value:  83426.92<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2020-04-01<br />.value:  49230.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2020-05-01<br />.value:  88628.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2020-06-01<br />.value:  70484.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2020-07-01<br />.value: 146170.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2020-08-01<br />.value: 110401.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2020-09-01<br />.value: 185050.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2020-10-01<br />.value: 182977.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2020-11-01<br />.value: 223930.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2020-12-01<br />.value: 182977.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2021-01-01<br />.value: 121287.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2021-02-01<br />.value: 133210.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2021-03-01<br />.value: 227041.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2021-04-01<br />.value: 199672.29<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2021-05-01<br />.value: 131655.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2021-06-01<br />.value: 147726.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2021-07-01<br />.value: 223231.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2021-08-01<br />.value: 188161.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2021-09-01<br />.value: 188161.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2021-10-01<br />.value: 225486.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2021-11-01<br />.value: 186606.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2021-12-01<br />.value: 223930.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2022-01-01<br />.value: 291841.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2022-02-01<br />.value: 228078.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2022-03-01<br />.value: 243111.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2022-04-01<br />.value: 200084.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2022-05-01<br />.value: 119786.33<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2022-06-01<br />.value: 149279.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2022-07-01<br />.value: 273178.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2022-08-01<br />.value: 195418.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2022-09-01<br />.value: 175201.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2022-10-01<br />.value: 232743.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2022-11-01<br />.value: 244666.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2022-12-01<br />.value: 240519.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2023-01-01<br />.value: 227676.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2023-02-01<br />.value: 151873.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2023-03-01<br />.value: 303764.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2023-04-01<br />.value: 229633.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2023-05-01<br />.value: 147207.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2023-06-01<br />.value: 185196.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2023-07-01<br />.value: 233780.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2023-08-01<br />.value: 262292.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2023-09-01<br />.value: 229633.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2023-10-01<br />.value: 175201.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2023-11-01<br />.value: 320383.39<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2023-12-01<br />.value: 321930.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL",".index: 2024-01-01<br />.value: 243165.00<br />.color_mod: ACTUAL<br />.color_mod: ACTUAL"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(44,62,80,1)","dash":"solid"},"hoveron":"points","name":"ACTUAL","legendgroup":"ACTUAL","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":["2024-02-01","2024-03-01","2024-04-01","2024-05-01","2024-06-01","2024-07-01","2024-08-01","2024-09-01","2024-10-01","2024-11-01","2024-12-01","2025-01-01","2025-02-01","2025-03-01","2025-04-01","2025-05-01","2025-06-01","2025-07-01","2025-08-01","2025-09-01","2025-10-01","2025-11-01","2025-12-01","2026-01-01"],"y":[256092.3125,262817.4375,180241.453125,207332.96875,223167.125,205875.171875,246536.90625,223829.6875,242411.34375,298391.1875,272428.78125,261869.21875,259865.671875,286450.375,244232.53125,203559.609375,203844.296875,235177.296875,256598.4375,223829.6875,233825.53125,296123.1875,272428.78125,258095.859375],"text":[".index: 2024-02-01<br />.value: 256092.31<br />.color_mod: 277_SALES_RECIPE_BOOST_TREE_277<br />.color_mod: 277_SALES_RECIPE_BOOST_TREE_277",".index: 2024-03-01<br />.value: 262817.44<br />.color_mod: 277_SALES_RECIPE_BOOST_TREE_277<br />.color_mod: 277_SALES_RECIPE_BOOST_TREE_277",".index: 2024-04-01<br />.value: 180241.45<br />.color_mod: 277_SALES_RECIPE_BOOST_TREE_277<br />.color_mod: 277_SALES_RECIPE_BOOST_TREE_277",".index: 2024-05-01<br />.value: 207332.97<br />.color_mod: 277_SALES_RECIPE_BOOST_TREE_277<br />.color_mod: 277_SALES_RECIPE_BOOST_TREE_277",".index: 2024-06-01<br />.value: 223167.12<br />.color_mod: 277_SALES_RECIPE_BOOST_TREE_277<br />.color_mod: 277_SALES_RECIPE_BOOST_TREE_277",".index: 2024-07-01<br />.value: 205875.17<br />.color_mod: 277_SALES_RECIPE_BOOST_TREE_277<br />.color_mod: 277_SALES_RECIPE_BOOST_TREE_277",".index: 2024-08-01<br />.value: 246536.91<br />.color_mod: 277_SALES_RECIPE_BOOST_TREE_277<br />.color_mod: 277_SALES_RECIPE_BOOST_TREE_277",".index: 2024-09-01<br />.value: 223829.69<br />.color_mod: 277_SALES_RECIPE_BOOST_TREE_277<br />.color_mod: 277_SALES_RECIPE_BOOST_TREE_277",".index: 2024-10-01<br />.value: 242411.34<br />.color_mod: 277_SALES_RECIPE_BOOST_TREE_277<br />.color_mod: 277_SALES_RECIPE_BOOST_TREE_277",".index: 2024-11-01<br />.value: 298391.19<br />.color_mod: 277_SALES_RECIPE_BOOST_TREE_277<br />.color_mod: 277_SALES_RECIPE_BOOST_TREE_277",".index: 2024-12-01<br />.value: 272428.78<br />.color_mod: 277_SALES_RECIPE_BOOST_TREE_277<br />.color_mod: 277_SALES_RECIPE_BOOST_TREE_277",".index: 2025-01-01<br />.value: 261869.22<br />.color_mod: 277_SALES_RECIPE_BOOST_TREE_277<br />.color_mod: 277_SALES_RECIPE_BOOST_TREE_277",".index: 2025-02-01<br />.value: 259865.67<br />.color_mod: 277_SALES_RECIPE_BOOST_TREE_277<br />.color_mod: 277_SALES_RECIPE_BOOST_TREE_277",".index: 2025-03-01<br />.value: 286450.38<br />.color_mod: 277_SALES_RECIPE_BOOST_TREE_277<br />.color_mod: 277_SALES_RECIPE_BOOST_TREE_277",".index: 2025-04-01<br />.value: 244232.53<br />.color_mod: 277_SALES_RECIPE_BOOST_TREE_277<br />.color_mod: 277_SALES_RECIPE_BOOST_TREE_277",".index: 2025-05-01<br />.value: 203559.61<br />.color_mod: 277_SALES_RECIPE_BOOST_TREE_277<br />.color_mod: 277_SALES_RECIPE_BOOST_TREE_277",".index: 2025-06-01<br />.value: 203844.30<br />.color_mod: 277_SALES_RECIPE_BOOST_TREE_277<br />.color_mod: 277_SALES_RECIPE_BOOST_TREE_277",".index: 2025-07-01<br />.value: 235177.30<br />.color_mod: 277_SALES_RECIPE_BOOST_TREE_277<br />.color_mod: 277_SALES_RECIPE_BOOST_TREE_277",".index: 2025-08-01<br />.value: 256598.44<br />.color_mod: 277_SALES_RECIPE_BOOST_TREE_277<br />.color_mod: 277_SALES_RECIPE_BOOST_TREE_277",".index: 2025-09-01<br />.value: 223829.69<br />.color_mod: 277_SALES_RECIPE_BOOST_TREE_277<br />.color_mod: 277_SALES_RECIPE_BOOST_TREE_277",".index: 2025-10-01<br />.value: 233825.53<br />.color_mod: 277_SALES_RECIPE_BOOST_TREE_277<br />.color_mod: 277_SALES_RECIPE_BOOST_TREE_277",".index: 2025-11-01<br />.value: 296123.19<br />.color_mod: 277_SALES_RECIPE_BOOST_TREE_277<br />.color_mod: 277_SALES_RECIPE_BOOST_TREE_277",".index: 2025-12-01<br />.value: 272428.78<br />.color_mod: 277_SALES_RECIPE_BOOST_TREE_277<br />.color_mod: 277_SALES_RECIPE_BOOST_TREE_277",".index: 2026-01-01<br />.value: 258095.86<br />.color_mod: 277_SALES_RECIPE_BOOST_TREE_277<br />.color_mod: 277_SALES_RECIPE_BOOST_TREE_277"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(227,26,28,1)","dash":"solid"},"hoveron":"points","name":"277_SALES_RECIPE_BOOST_TREE_277","legendgroup":"277_SALES_RECIPE_BOOST_TREE_277","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":43.762557077625573,"r":7.3059360730593621,"b":25.57077625570777,"l":60.639269406392714},"plot_bgcolor":"rgba(255,255,255,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(44,62,80,1)","family":"","size":14.611872146118724},"title":{"text":"Final XGBoost Sales Forecast for Product Y (24-Month Horizon)","font":{"color":"rgba(44,62,80,1)","family":"","size":17.534246575342465},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"date","autorange":true,"range":["2017-08-07","2026-05-27"],"tickmode":"auto","ticktext":["2018","2020","2022","2024","2026"],"tickvals":[17532,18262,18993,19723,20454],"categoryorder":"array","categoryarray":["2018","2020","2022","2024","2026"],"nticks":null,"ticks":"outside","tickcolor":"rgba(204,204,204,1)","ticklen":3.6529680365296811,"tickwidth":0.22139200221392005,"showticklabels":true,"tickfont":{"color":"rgba(44,62,80,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(204,204,204,1)","gridwidth":0.22139200221392005,"zeroline":false,"anchor":"y","title":{"text":"","font":{"color":"rgba(44,62,80,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":true,"range":[5675.6711176935714,424056.90652843518],"tickmode":"auto","ticktext":["100000","200000","300000","400000"],"tickvals":[100000,200000,300000,400000],"categoryorder":"array","categoryarray":["100000","200000","300000","400000"],"nticks":null,"ticks":"outside","tickcolor":"rgba(204,204,204,1)","ticklen":3.6529680365296811,"tickwidth":0.22139200221392005,"showticklabels":true,"tickfont":{"color":"rgba(44,62,80,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(204,204,204,1)","gridwidth":0.22139200221392005,"zeroline":false,"anchor":"x","title":{"text":"Sales in USD","font":{"color":"rgba(44,62,80,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(44,62,80,1)","width":0.33208800332088001,"linetype":"solid"},"yref":"paper","xref":"paper","layer":"below","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.8897637795275593,"font":{"color":"rgba(44,62,80,1)","family":"","size":11.68949771689498}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"260f2c4923df":{"x":{},"y":{},"ymin":{},"ymax":{},"colour":{},"type":"scatter"},"260f75d21c2f":{"x":{},"y":{},"colour":{}}},"cur_data":"260f2c4923df","visdat":{"260f2c4923df":["function (y) ","x"],"260f75d21c2f":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Forecasts dataset</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>future_forecast_tbl <span class="sc">|&gt;</span> </span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(.key <span class="sc">==</span> <span class="st">"prediction"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(</span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">date =</span> .index, </span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">lower_limit =</span> .conf_lo,</span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">point_estimate =</span> .value,</span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">upper_limit =</span> .conf_hi</span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["date"],"name":[1],"type":["date"],"align":["right"]},{"label":["lower_limit"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["point_estimate"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["upper_limit"],"name":[4],"type":["dbl"],"align":["right"]}],"data":[{"1":"2024-02-01","2":"149443.92","3":"256092.3","4":"362740.7"},{"1":"2024-03-01","2":"156169.05","3":"262817.4","4":"369465.8"},{"1":"2024-04-01","2":"73593.06","3":"180241.5","4":"286889.8"},{"1":"2024-05-01","2":"100684.58","3":"207333.0","4":"313981.4"},{"1":"2024-06-01","2":"116518.73","3":"223167.1","4":"329815.5"},{"1":"2024-07-01","2":"99226.78","3":"205875.2","4":"312523.6"},{"1":"2024-08-01","2":"139888.52","3":"246536.9","4":"353185.3"},{"1":"2024-09-01","2":"117181.30","3":"223829.7","4":"330478.1"},{"1":"2024-10-01","2":"135762.95","3":"242411.3","4":"349059.7"},{"1":"2024-11-01","2":"191742.80","3":"298391.2","4":"405039.6"},{"1":"2024-12-01","2":"165780.39","3":"272428.8","4":"379077.2"},{"1":"2025-01-01","2":"155220.83","3":"261869.2","4":"368517.6"},{"1":"2025-02-01","2":"153217.28","3":"259865.7","4":"366514.1"},{"1":"2025-03-01","2":"179801.98","3":"286450.4","4":"393098.8"},{"1":"2025-04-01","2":"137584.14","3":"244232.5","4":"350880.9"},{"1":"2025-05-01","2":"96911.22","3":"203559.6","4":"310208.0"},{"1":"2025-06-01","2":"97195.91","3":"203844.3","4":"310492.7"},{"1":"2025-07-01","2":"128528.91","3":"235177.3","4":"341825.7"},{"1":"2025-08-01","2":"149950.05","3":"256598.4","4":"363246.8"},{"1":"2025-09-01","2":"117181.30","3":"223829.7","4":"330478.1"},{"1":"2025-10-01","2":"127177.14","3":"233825.5","4":"340473.9"},{"1":"2025-11-01","2":"189474.80","3":"296123.2","4":"402771.6"},{"1":"2025-12-01","2":"165780.39","3":"272428.8","4":"379077.2"},{"1":"2026-01-01","2":"151447.47","3":"258095.9","4":"364744.2"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">parallel_stop</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
</section>
<section id="conclusion" class="level2" data-number="13">
<h2 data-number="13" class="anchored" data-anchor-id="conclusion"><span class="header-section-number">13</span> Conclusion</h2>
<p>In this post, we walked through an end-to-end machine learning workflow for sales forecasting in R, starting from data exploration and anomaly detection, through feature engineering, model specification, parallel training, evaluation, and finally producing a forward-looking forecast using XGBoost. This approach offers clear benefits: it leverages rich time-based features, uses a robust validation strategy, and produces forecasts that are both data-driven and reproducible. At the same time, it’s important to recognize the limitations, machine learning models like XGBoost can be sensitive to hyperparameter choices, require careful feature engineering, and may not always generalize best across all datasets or business contexts.</p>
<p>For Metricon, these forecasts can directly inform decisions such as inventory planning, budgeting, production scheduling, and scenario analysis by providing a clearer view of expected future demand. However, no single model is universally optimal. In the next post, we’ll broaden the analysis by training and comparing multiple forecasting algorithms on the same sales data to assess whether alternative models can outperform XGBoost and under what conditions, bringing us closer to a truly model-agnostic, decision-ready forecasting strategy.</p>
<p><strong><em>Written by</em></strong></p>
<p><a href="https://github.com/mwangi-george"><strong>George Mwangi</strong></a> is a software engineer and data professional specializing in machine learning, data analytics, and digital health systems design &amp; development. His work focuses on building practical, production-ready solutions for forecasting, decision support, and data-driven planning. He is particularly interested in applying modern data science tools to solve real-world business and public health sector problems.</p>
<p><a href="https://www.linkedin.com/in/georgemwangikenya/"><img src="img/author.jpeg" class="img-fluid" width="200"></a></p>
<p><em>You can connect with George on:</em></p>
<ul>
<li><p>LinkedIn: <a href="https://www.linkedin.com/in/georgemwangikenya/">https://www.linkedin.com/in/georgemwangikenya</a></p></li>
<li><p>GitHub: <a href="https://github.com/mwangi-george" class="uri">https://github.com/mwangi-george</a></p></li>
</ul>
<hr>
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne">
<p>Session Information</p>
</button>
<div id="collapseOne" class="accordion-collapse collapse">
<div>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sessionInfo</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>R version 4.5.2 (2025-10-31)
Platform: aarch64-apple-darwin20
Running under: macOS Tahoe 26.2

Matrix products: default
BLAS:   /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libBLAS.dylib 
LAPACK: /Library/Frameworks/R.framework/Versions/4.5-arm64/Resources/lib/libRlapack.dylib;  LAPACK version 3.12.1

locale:
[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8

time zone: Africa/Nairobi
tzcode source: internal

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
 [1] lubridate_1.9.4    timetk_2.9.0       modeltime_1.3.2    yardstick_1.3.2   
 [5] workflowsets_1.1.1 workflows_1.3.0    tune_2.0.0         tidyr_1.3.1       
 [9] tailor_0.1.0       rsample_1.3.1      recipes_1.3.1      purrr_1.1.0       
[13] parsnip_1.3.3      modeldata_1.5.1    infer_1.0.9        ggplot2_3.5.2     
[17] dplyr_1.1.4        dials_1.4.2        scales_1.4.0       broom_1.0.10      
[21] tidymodels_1.4.1  

loaded via a namespace (and not attached):
 [1] rlang_1.1.6         magrittr_2.0.3      furrr_0.3.1        
 [4] compiler_4.5.2      vctrs_0.6.5         lhs_1.2.0          
 [7] stringr_1.5.1       pkgconfig_2.0.3     fastmap_1.2.0      
[10] backports_1.5.0     labeling_0.4.3      rmarkdown_2.29     
[13] prodlim_2025.04.28  xfun_0.52           jsonlite_2.0.0     
[16] parallel_4.5.2      R6_2.6.1            stringi_1.8.7      
[19] RColorBrewer_1.1-3  StanHeaders_2.32.10 parallelly_1.45.0  
[22] rpart_4.1.24        xgboost_1.7.11.1    Rcpp_1.0.14        
[25] iterators_1.0.14    knitr_1.50          future.apply_1.20.0
[28] zoo_1.8-14          Matrix_1.7-4        splines_4.5.2      
[31] nnet_7.3-20         timechange_0.3.0    tidyselect_1.2.1   
[34] rstudioapi_0.17.1   yaml_2.3.10         timeDate_4041.110  
[37] doParallel_1.0.17   codetools_0.2-20    listenv_0.9.1      
[40] lattice_0.22-7      tibble_3.3.0        withr_3.0.2        
[43] evaluate_1.0.4      future_1.58.0       survival_3.8-3     
[46] RcppParallel_5.1.10 xml2_1.3.8          xts_0.14.1         
[49] pillar_1.10.2       foreach_1.5.2       plotly_4.11.0      
[52] generics_0.1.4      globals_0.18.0      class_7.3-23       
[55] glue_1.8.0          lazyeval_0.2.2      tools_4.5.2        
[58] data.table_1.17.6   gower_1.0.2         forcats_1.0.0      
[61] fs_1.6.6            grid_4.5.2          crosstalk_1.2.1    
[64] ipred_0.9-15        cli_3.6.5           DiceDesign_1.10    
[67] viridisLite_0.4.2   lava_1.8.1          gt_1.1.0           
[70] gtable_0.3.6        GPfit_1.0-9         sass_0.4.10        
[73] digest_0.6.37       htmlwidgets_1.6.4   farver_2.1.2       
[76] htmltools_0.5.8.1   lifecycle_1.0.4     hardhat_1.4.2      
[79] httr_1.4.7          MASS_7.3-65         sparsevctrs_0.3.4  </code></pre>
</div>
</div>
</div>
</div>


<!-- -->

</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
    const viewSource = window.document.getElementById('quarto-view-source') ||
                       window.document.getElementById('quarto-code-tools-source');
    if (viewSource) {
      const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
      viewSource.addEventListener("click", function(e) {
        if (sourceUrl) {
          // rstudio viewer pane
          if (/\bcapabilities=\b/.test(window.location)) {
            window.open(sourceUrl);
          } else {
            window.location.href = sourceUrl;
          }
        } else {
          const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
          modal.show();
        }
        return false;
      });
    }
    function toggleCodeHandler(show) {
      return function(e) {
        const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
        for (let i=0; i<detailsSrc.length; i++) {
          const details = detailsSrc[i].parentElement;
          if (show) {
            details.open = true;
          } else {
            details.removeAttribute("open");
          }
        }
        const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
        const fromCls = show ? "hidden" : "unhidden";
        const toCls = show ? "unhidden" : "hidden";
        for (let i=0; i<cellCodeDivs.length; i++) {
          const codeDiv = cellCodeDivs[i];
          if (codeDiv.classList.contains(fromCls)) {
            codeDiv.classList.remove(fromCls);
            codeDiv.classList.add(toCls);
          } 
        }
        return false;
      }
    }
    const hideAllCode = window.document.getElementById("quarto-hide-all-code");
    if (hideAllCode) {
      hideAllCode.addEventListener("click", toggleCodeHandler(false));
    }
    const showAllCode = window.document.getElementById("quarto-show-all-code");
    if (showAllCode) {
      showAllCode.addEventListener("click", toggleCodeHandler(true));
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
            // target, if specified
            link.setAttribute("target", "_blank");
            if (link.getAttribute("rel") === null) {
              link.setAttribute("rel", "noopener");
            }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb45" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "Sales Forecasting with Machine Learning in R"</span></span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a><span class="an">subtitle:</span><span class="co"> "An end-to-end, practical workflow using Modeltime, Tidymodels, and XGBoost"</span></span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a><span class="an">author:</span></span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a><span class="co">  - name: "George N. Mwangi"</span></span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a><span class="co">    url: "https://github.com/mwangi-george"</span></span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a><span class="co">    affiliation: "inSupply Health"</span></span>
<span id="cb45-8"><a href="#cb45-8" aria-hidden="true" tabindex="-1"></a><span class="co">    email: "mwangigeorge648@gmail.com"</span></span>
<span id="cb45-9"><a href="#cb45-9" aria-hidden="true" tabindex="-1"></a><span class="an">date:</span><span class="co"> today</span></span>
<span id="cb45-10"><a href="#cb45-10" aria-hidden="true" tabindex="-1"></a><span class="an">description:</span><span class="co"> "A practical walkthrough for forecasting monthly sales using Modeltime, Tidymodels, and XGBoost in R."</span></span>
<span id="cb45-11"><a href="#cb45-11" aria-hidden="true" tabindex="-1"></a><span class="an">categories:</span><span class="co"> ["Forecasting", "Machine Learning", "R", "Time Series"]</span></span>
<span id="cb45-12"><a href="#cb45-12" aria-hidden="true" tabindex="-1"></a><span class="an">tags:</span><span class="co"> ["modeltime", "tidymodels", "xgboost", "workflowsets", "timetk", "sales forecasting"]</span></span>
<span id="cb45-13"><a href="#cb45-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-14"><a href="#cb45-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Title Banner Appearance </span></span>
<span id="cb45-15"><a href="#cb45-15" aria-hidden="true" tabindex="-1"></a><span class="an">title-block-banner:</span><span class="co"> "#2456ED"</span></span>
<span id="cb45-16"><a href="#cb45-16" aria-hidden="true" tabindex="-1"></a><span class="an">title-block-banner-color:</span><span class="co"> "white"</span></span>
<span id="cb45-17"><a href="#cb45-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-18"><a href="#cb45-18" aria-hidden="true" tabindex="-1"></a><span class="an">format:</span></span>
<span id="cb45-19"><a href="#cb45-19" aria-hidden="true" tabindex="-1"></a><span class="co">  html:</span></span>
<span id="cb45-20"><a href="#cb45-20" aria-hidden="true" tabindex="-1"></a><span class="co">    theme: cosmo</span></span>
<span id="cb45-21"><a href="#cb45-21" aria-hidden="true" tabindex="-1"></a><span class="co">    toc: true</span></span>
<span id="cb45-22"><a href="#cb45-22" aria-hidden="true" tabindex="-1"></a><span class="co">    toc-depth: 3</span></span>
<span id="cb45-23"><a href="#cb45-23" aria-hidden="true" tabindex="-1"></a><span class="co">    toc-location: right</span></span>
<span id="cb45-24"><a href="#cb45-24" aria-hidden="true" tabindex="-1"></a><span class="co">    toc-title: "On this page"</span></span>
<span id="cb45-25"><a href="#cb45-25" aria-hidden="true" tabindex="-1"></a><span class="co">    code-fold: false</span></span>
<span id="cb45-26"><a href="#cb45-26" aria-hidden="true" tabindex="-1"></a><span class="co">    code-tools: true</span></span>
<span id="cb45-27"><a href="#cb45-27" aria-hidden="true" tabindex="-1"></a><span class="co">    code-copy: true</span></span>
<span id="cb45-28"><a href="#cb45-28" aria-hidden="true" tabindex="-1"></a><span class="co">    number-sections: true</span></span>
<span id="cb45-29"><a href="#cb45-29" aria-hidden="true" tabindex="-1"></a><span class="co">    smooth-scroll: true</span></span>
<span id="cb45-30"><a href="#cb45-30" aria-hidden="true" tabindex="-1"></a><span class="co">    link-external-newwindow: true</span></span>
<span id="cb45-31"><a href="#cb45-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-32"><a href="#cb45-32" aria-hidden="true" tabindex="-1"></a><span class="co">    # Clean table rendering</span></span>
<span id="cb45-33"><a href="#cb45-33" aria-hidden="true" tabindex="-1"></a><span class="co">    df-print: paged</span></span>
<span id="cb45-34"><a href="#cb45-34" aria-hidden="true" tabindex="-1"></a><span class="co">    tbl-cap-location: top</span></span>
<span id="cb45-35"><a href="#cb45-35" aria-hidden="true" tabindex="-1"></a><span class="co">    grid:</span></span>
<span id="cb45-36"><a href="#cb45-36" aria-hidden="true" tabindex="-1"></a><span class="co">      body-width: 900px</span></span>
<span id="cb45-37"><a href="#cb45-37" aria-hidden="true" tabindex="-1"></a><span class="co">      margin-width: 260px</span></span>
<span id="cb45-38"><a href="#cb45-38" aria-hidden="true" tabindex="-1"></a><span class="co">      sidebar-width: 260px</span></span>
<span id="cb45-39"><a href="#cb45-39" aria-hidden="true" tabindex="-1"></a><span class="co">  </span></span>
<span id="cb45-40"><a href="#cb45-40" aria-hidden="true" tabindex="-1"></a><span class="an">editor:</span><span class="co"> visual</span></span>
<span id="cb45-41"><a href="#cb45-41" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb45-42"><a href="#cb45-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-43"><a href="#cb45-43" aria-hidden="true" tabindex="-1"></a><span class="al">![](img/cover.avif)</span></span>
<span id="cb45-44"><a href="#cb45-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-45"><a href="#cb45-45" aria-hidden="true" tabindex="-1"></a><span class="fu">## Introduction</span></span>
<span id="cb45-46"><a href="#cb45-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-47"><a href="#cb45-47" aria-hidden="true" tabindex="-1"></a>Sales forecasting used to be a game of spreadsheets, gut feeling, and crossed fingers. Today, machine learning lets us move beyond guesswork and start making predictions that actually learn from data.</span>
<span id="cb45-48"><a href="#cb45-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-49"><a href="#cb45-49" aria-hidden="true" tabindex="-1"></a>In this post, we’ll explore how to build practical sales forecasting models using **R**, a language loved for its statistical depth and elegant data tooling. Without drowning in theory, we’ll walk through how historical sales data can be transformed into forward-looking insights using modern machine learning techniques.</span>
<span id="cb45-50"><a href="#cb45-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-51"><a href="#cb45-51" aria-hidden="true" tabindex="-1"></a>Whether you’re an analyst trying to improve forecast accuracy, a data scientist working in R, or a business professional curious about how machine learning really works under the hood, this guide will show you how to turn past sales into smarter decisions about the future.</span>
<span id="cb45-52"><a href="#cb45-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-53"><a href="#cb45-53" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------</span>
<span id="cb45-54"><a href="#cb45-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-55"><a href="#cb45-55" aria-hidden="true" tabindex="-1"></a><span class="fu">## Workspace setup</span></span>
<span id="cb45-56"><a href="#cb45-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-57"><a href="#cb45-57" aria-hidden="true" tabindex="-1"></a>To build our forecasting models, we’ll work entirely within the **tidy modeling ecosystem in R**, which emphasizes readable code, reproducibility, and modular workflows. We’ll rely on three core machine learning libraries—**`modeltime`**, **`tidymodels`**, and **`workflowsets`**—alongside two essential data and time-series packages: `dplyr` and **`timetk`**.</span>
<span id="cb45-58"><a href="#cb45-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-59"><a href="#cb45-59" aria-hidden="true" tabindex="-1"></a>At the center of this workflow is the <span class="co">[</span><span class="ot">**Modeltime ecosystem**</span><span class="co">](https://business-science.github.io/modeltime/articles/getting-started-with-modeltime.html "See documentation")</span>, which extends <span class="in">`tidymodels`</span> with first-class support for time series forecasting. Modeltime provides a unified interface for fitting, calibrating, comparing, and evaluating both classical statistical models and modern machine learning approaches (such as boosted trees and neural networks) using tidy data principles. By integrating seamlessly with <span class="in">`timetk`</span>, it makes feature engineering for time-based data—lags, rolling statistics, and seasonal signatures—both intuitive and scalable.</span>
<span id="cb45-60"><a href="#cb45-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-61"><a href="#cb45-61" aria-hidden="true" tabindex="-1"></a><span class="in">`tidymodels`</span> gives us a consistent framework for preprocessing, model specification, and evaluation, while <span class="in">`workflowsets`</span> allows us to experiment with multiple models and feature combinations in a structured and repeatable way. Together with <span class="in">`dplyr`</span> for data manipulation and <span class="in">`timetk`</span> for time-series visualization and feature engineering, this setup lets us move cleanly from raw historical sales data to production-ready forecasts.</span>
<span id="cb45-62"><a href="#cb45-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-63"><a href="#cb45-63" aria-hidden="true" tabindex="-1"></a><span class="in">```{r message=FALSE}</span></span>
<span id="cb45-64"><a href="#cb45-64" aria-hidden="true" tabindex="-1"></a><span class="co"># Machine Learning</span></span>
<span id="cb45-65"><a href="#cb45-65" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidymodels)   <span class="co"># modeling framework</span></span>
<span id="cb45-66"><a href="#cb45-66" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(modeltime)    <span class="co"># time series forecasting workflows built on tidymodels</span></span>
<span id="cb45-67"><a href="#cb45-67" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(workflowsets) <span class="co"># manage and compare many model/preprocess workflows at once</span></span>
<span id="cb45-68"><a href="#cb45-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-69"><a href="#cb45-69" aria-hidden="true" tabindex="-1"></a><span class="co"># Core</span></span>
<span id="cb45-70"><a href="#cb45-70" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(timetk)       <span class="co"># time series plotting helpers, and feature engineering</span></span>
<span id="cb45-71"><a href="#cb45-71" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)        <span class="co"># core data manipulation</span></span>
<span id="cb45-72"><a href="#cb45-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-73"><a href="#cb45-73" aria-hidden="true" tabindex="-1"></a><span class="co"># Avoid scientific notation for large values (e.g., 250000 instead of 2.5e+05)</span></span>
<span id="cb45-74"><a href="#cb45-74" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">scipen =</span> <span class="dv">999</span>)</span>
<span id="cb45-75"><a href="#cb45-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-76"><a href="#cb45-76" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------------------------------------------------------------------</span></span>
<span id="cb45-77"><a href="#cb45-77" aria-hidden="true" tabindex="-1"></a><span class="co"># Enable parallel processing for model training</span></span>
<span id="cb45-78"><a href="#cb45-78" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------------------------------------------------------------------</span></span>
<span id="cb45-79"><a href="#cb45-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-80"><a href="#cb45-80" aria-hidden="true" tabindex="-1"></a><span class="co"># Detect available physical CPU cores (optional)</span></span>
<span id="cb45-81"><a href="#cb45-81" aria-hidden="true" tabindex="-1"></a>parallel<span class="sc">::</span><span class="fu">detectCores</span>(<span class="at">logical =</span> <span class="cn">FALSE</span>)</span>
<span id="cb45-82"><a href="#cb45-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-83"><a href="#cb45-83" aria-hidden="true" tabindex="-1"></a><span class="co"># Start a parallel backend using 2 cores</span></span>
<span id="cb45-84"><a href="#cb45-84" aria-hidden="true" tabindex="-1"></a><span class="fu">parallel_start</span>(<span class="dv">2</span>, <span class="at">.method =</span> <span class="st">"parallel"</span>)</span>
<span id="cb45-85"><a href="#cb45-85" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb45-86"><a href="#cb45-86" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-87"><a href="#cb45-87" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------</span>
<span id="cb45-88"><a href="#cb45-88" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-89"><a href="#cb45-89" aria-hidden="true" tabindex="-1"></a><span class="fu">## Dataset overview</span></span>
<span id="cb45-90"><a href="#cb45-90" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-91"><a href="#cb45-91" aria-hidden="true" tabindex="-1"></a>The dataset used in this tutorial represents the **historical monthly sales of a single product (Product Y)** for a fictional company called **Metricon**. Each observation corresponds to the total sales recorded in a given month, making the data naturally suited for time series analysis and forecasting.</span>
<span id="cb45-92"><a href="#cb45-92" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-93"><a href="#cb45-93" aria-hidden="true" tabindex="-1"></a>The dataset contains **two columns**:</span>
<span id="cb45-94"><a href="#cb45-94" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-95"><a href="#cb45-95" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**`date`** – the first day of each month, representing the sales period</span>
<span id="cb45-96"><a href="#cb45-96" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-97"><a href="#cb45-97" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**`value`** – the total sales volume for Product Y in that month</span>
<span id="cb45-98"><a href="#cb45-98" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-99"><a href="#cb45-99" aria-hidden="true" tabindex="-1"></a>The data spans **multiple consecutive years**, providing enough history to observe long-term trends, seasonal patterns, and periods of growth or volatility. In the sections that follow, we’ll first explore the structure of the data by inspecting the first and last few records, then visualize the full time series to better understand its overall behavior before applying machine learning models for forecasting.</span>
<span id="cb45-100"><a href="#cb45-100" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-101"><a href="#cb45-101" aria-hidden="true" tabindex="-1"></a><span class="in">```{r message=FALSE}</span></span>
<span id="cb45-102"><a href="#cb45-102" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------------------------------------------------------------------</span></span>
<span id="cb45-103"><a href="#cb45-103" aria-hidden="true" tabindex="-1"></a><span class="co"># Load and prepare the sales dataset</span></span>
<span id="cb45-104"><a href="#cb45-104" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------------------------------------------------------------------</span></span>
<span id="cb45-105"><a href="#cb45-105" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-106"><a href="#cb45-106" aria-hidden="true" tabindex="-1"></a>raw_sales_df <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(</span>
<span id="cb45-107"><a href="#cb45-107" aria-hidden="true" tabindex="-1"></a>  <span class="st">"data/sales_timeseries_monthly.csv"</span>,</span>
<span id="cb45-108"><a href="#cb45-108" aria-hidden="true" tabindex="-1"></a>) <span class="sc">|&gt;</span></span>
<span id="cb45-109"><a href="#cb45-109" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb45-110"><a href="#cb45-110" aria-hidden="true" tabindex="-1"></a>    <span class="at">date =</span> lubridate<span class="sc">::</span><span class="fu">mdy</span>(date)  <span class="co"># Parse date column into Date type</span></span>
<span id="cb45-111"><a href="#cb45-111" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb45-112"><a href="#cb45-112" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-113"><a href="#cb45-113" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-114"><a href="#cb45-114" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------------------------------------------------------------------</span></span>
<span id="cb45-115"><a href="#cb45-115" aria-hidden="true" tabindex="-1"></a><span class="co"># Quick data inspection</span></span>
<span id="cb45-116"><a href="#cb45-116" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------------------------------------------------------------------</span></span>
<span id="cb45-117"><a href="#cb45-117" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-118"><a href="#cb45-118" aria-hidden="true" tabindex="-1"></a><span class="co"># Preview the first 3 observations</span></span>
<span id="cb45-119"><a href="#cb45-119" aria-hidden="true" tabindex="-1"></a>raw_sales_df <span class="sc">|&gt;</span></span>
<span id="cb45-120"><a href="#cb45-120" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">3</span>)</span>
<span id="cb45-121"><a href="#cb45-121" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-122"><a href="#cb45-122" aria-hidden="true" tabindex="-1"></a><span class="co"># Preview the last 3 observations</span></span>
<span id="cb45-123"><a href="#cb45-123" aria-hidden="true" tabindex="-1"></a>raw_sales_df <span class="sc">|&gt;</span></span>
<span id="cb45-124"><a href="#cb45-124" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_tail</span>(<span class="at">n =</span> <span class="dv">3</span>)</span>
<span id="cb45-125"><a href="#cb45-125" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-126"><a href="#cb45-126" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-127"><a href="#cb45-127" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------------------------------------------------------------------</span></span>
<span id="cb45-128"><a href="#cb45-128" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualize historical sales trend</span></span>
<span id="cb45-129"><a href="#cb45-129" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------------------------------------------------------------------</span></span>
<span id="cb45-130"><a href="#cb45-130" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-131"><a href="#cb45-131" aria-hidden="true" tabindex="-1"></a>raw_sales_df <span class="sc">|&gt;</span></span>
<span id="cb45-132"><a href="#cb45-132" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_time_series</span>(</span>
<span id="cb45-133"><a href="#cb45-133" aria-hidden="true" tabindex="-1"></a>    <span class="at">.date_var =</span> date,</span>
<span id="cb45-134"><a href="#cb45-134" aria-hidden="true" tabindex="-1"></a>    <span class="at">.value    =</span> value,</span>
<span id="cb45-135"><a href="#cb45-135" aria-hidden="true" tabindex="-1"></a>    <span class="at">.title    =</span> <span class="st">"Product Y Sales Trend over Time"</span>,</span>
<span id="cb45-136"><a href="#cb45-136" aria-hidden="true" tabindex="-1"></a>    <span class="at">.y_lab =</span> <span class="st">"Sales in USD"</span></span>
<span id="cb45-137"><a href="#cb45-137" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb45-138"><a href="#cb45-138" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb45-139"><a href="#cb45-139" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-140"><a href="#cb45-140" aria-hidden="true" tabindex="-1"></a>The historical sales trend for **Product Y at Metricon** shows a business that has steadily grown over time, but not without meaningful volatility along the way. In the earlier years of the series, sales fluctuate around a lower baseline, with noticeable month-to-month swings that suggest an immature or stabilizing market phase. From around **2020 onward**, a clear upward trajectory begins to emerge. By the most recent periods, sales reach their highest levels in the dataset, indicating strong momentum and increasing demand for Product Y.</span>
<span id="cb45-141"><a href="#cb45-141" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-142"><a href="#cb45-142" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------</span>
<span id="cb45-143"><a href="#cb45-143" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-144"><a href="#cb45-144" aria-hidden="true" tabindex="-1"></a><span class="fu">## Anomaly detection</span></span>
<span id="cb45-145"><a href="#cb45-145" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-146"><a href="#cb45-146" aria-hidden="true" tabindex="-1"></a>Before building forecasting models, it’s important to understand whether the historical data contains **unusual or unexpected behavior**. The anomaly diagnostics plot highlights periods where sales of Product Y significantly deviate from the expected range, flagging potential outliers caused by events such as promotions, supply disruptions, or reporting issues. Identifying these anomalies early helps ensure that forecasting models learn genuine patterns rather than noise, ultimately leading to more reliable and robust predictions.</span>
<span id="cb45-147"><a href="#cb45-147" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-148"><a href="#cb45-148" aria-hidden="true" tabindex="-1"></a><span class="in">```{r message=FALSE, warning=FALSE}</span></span>
<span id="cb45-149"><a href="#cb45-149" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-150"><a href="#cb45-150" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------------------------------------------------------------------</span></span>
<span id="cb45-151"><a href="#cb45-151" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualize anomaly diagnostics in the sales time series</span></span>
<span id="cb45-152"><a href="#cb45-152" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------------------------------------------------------------------</span></span>
<span id="cb45-153"><a href="#cb45-153" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-154"><a href="#cb45-154" aria-hidden="true" tabindex="-1"></a>raw_sales_df <span class="sc">|&gt;</span></span>
<span id="cb45-155"><a href="#cb45-155" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_anomaly_diagnostics</span>(</span>
<span id="cb45-156"><a href="#cb45-156" aria-hidden="true" tabindex="-1"></a>    <span class="at">.date_var    =</span> date,</span>
<span id="cb45-157"><a href="#cb45-157" aria-hidden="true" tabindex="-1"></a>    <span class="at">.value       =</span> value,</span>
<span id="cb45-158"><a href="#cb45-158" aria-hidden="true" tabindex="-1"></a>    <span class="at">.title       =</span> <span class="st">"Product Y Anomaly Diagnostics"</span>,</span>
<span id="cb45-159"><a href="#cb45-159" aria-hidden="true" tabindex="-1"></a>    <span class="at">.y_lab =</span> <span class="st">"Sales in USD"</span>,</span>
<span id="cb45-160"><a href="#cb45-160" aria-hidden="true" tabindex="-1"></a>    <span class="at">.alpha       =</span> <span class="fl">0.10</span>,   <span class="co"># Sensitivity level for anomaly detection</span></span>
<span id="cb45-161"><a href="#cb45-161" aria-hidden="true" tabindex="-1"></a>    <span class="at">.legend_show =</span> <span class="cn">FALSE</span>  <span class="co"># Hide legend for a cleaner visualization</span></span>
<span id="cb45-162"><a href="#cb45-162" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb45-163"><a href="#cb45-163" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-164"><a href="#cb45-164" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb45-165"><a href="#cb45-165" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-166"><a href="#cb45-166" aria-hidden="true" tabindex="-1"></a>The code chunk below focuses on **cleaning the historical sales data before forecasting**. Using anomaly detection, we identify months where Product Y’s sales significantly deviate from the expected pattern. Instead of removing these observations entirely, the workflow replaces anomalous values with a cleaned estimate that better reflects the underlying trend to preserve the continuity of the time series while preventing extreme values from distorting downstream machine learning models. Finally, the cleaned series is replotted to visually confirm that the long-term trend remains intact, but with reduced noise.</span>
<span id="cb45-167"><a href="#cb45-167" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-168"><a href="#cb45-168" aria-hidden="true" tabindex="-1"></a><span class="in">```{r message=FALSE}</span></span>
<span id="cb45-169"><a href="#cb45-169" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-170"><a href="#cb45-170" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------------------------------------------------------------------</span></span>
<span id="cb45-171"><a href="#cb45-171" aria-hidden="true" tabindex="-1"></a><span class="co"># Detect anomalies in the historical sales data</span></span>
<span id="cb45-172"><a href="#cb45-172" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------------------------------------------------------------------</span></span>
<span id="cb45-173"><a href="#cb45-173" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-174"><a href="#cb45-174" aria-hidden="true" tabindex="-1"></a>anomaly_results_df <span class="ot">&lt;-</span> raw_sales_df <span class="sc">|&gt;</span></span>
<span id="cb45-175"><a href="#cb45-175" aria-hidden="true" tabindex="-1"></a>  <span class="fu">anomalize</span>(</span>
<span id="cb45-176"><a href="#cb45-176" aria-hidden="true" tabindex="-1"></a>    <span class="at">.date_var  =</span> date,</span>
<span id="cb45-177"><a href="#cb45-177" aria-hidden="true" tabindex="-1"></a>    <span class="at">.value     =</span> value,</span>
<span id="cb45-178"><a href="#cb45-178" aria-hidden="true" tabindex="-1"></a>    <span class="at">.iqr_alpha =</span> <span class="fl">0.10</span>   <span class="co"># Sensitivity level for anomaly detection</span></span>
<span id="cb45-179"><a href="#cb45-179" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb45-180"><a href="#cb45-180" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-181"><a href="#cb45-181" aria-hidden="true" tabindex="-1"></a><span class="co"># Inspect a few records to understand the anomaly flags</span></span>
<span id="cb45-182"><a href="#cb45-182" aria-hidden="true" tabindex="-1"></a>anomaly_results_df <span class="sc">|&gt;</span></span>
<span id="cb45-183"><a href="#cb45-183" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">3</span>) <span class="sc">|&gt;</span></span>
<span id="cb45-184"><a href="#cb45-184" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(date, observed, anomaly, trend, observed_clean)</span>
<span id="cb45-185"><a href="#cb45-185" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-186"><a href="#cb45-186" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-187"><a href="#cb45-187" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------------------------------------------------------------------</span></span>
<span id="cb45-188"><a href="#cb45-188" aria-hidden="true" tabindex="-1"></a><span class="co"># Replace anomalous values with cleaned estimates</span></span>
<span id="cb45-189"><a href="#cb45-189" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------------------------------------------------------------------</span></span>
<span id="cb45-190"><a href="#cb45-190" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-191"><a href="#cb45-191" aria-hidden="true" tabindex="-1"></a>cleaned_sales_df <span class="ot">&lt;-</span> anomaly_results_df <span class="sc">|&gt;</span></span>
<span id="cb45-192"><a href="#cb45-192" aria-hidden="true" tabindex="-1"></a>  <span class="fu">transmute</span>(</span>
<span id="cb45-193"><a href="#cb45-193" aria-hidden="true" tabindex="-1"></a>    date,</span>
<span id="cb45-194"><a href="#cb45-194" aria-hidden="true" tabindex="-1"></a>    <span class="at">value =</span> <span class="fu">if_else</span>(</span>
<span id="cb45-195"><a href="#cb45-195" aria-hidden="true" tabindex="-1"></a>      anomaly <span class="sc">==</span> <span class="st">"Yes"</span>,</span>
<span id="cb45-196"><a href="#cb45-196" aria-hidden="true" tabindex="-1"></a>      observed_clean,  <span class="co"># Use cleaned value when anomaly is detected</span></span>
<span id="cb45-197"><a href="#cb45-197" aria-hidden="true" tabindex="-1"></a>      observed         <span class="co"># Otherwise keep the original observation</span></span>
<span id="cb45-198"><a href="#cb45-198" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb45-199"><a href="#cb45-199" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb45-200"><a href="#cb45-200" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-201"><a href="#cb45-201" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-202"><a href="#cb45-202" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------------------------------------------------------------------</span></span>
<span id="cb45-203"><a href="#cb45-203" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualize the cleaned time series</span></span>
<span id="cb45-204"><a href="#cb45-204" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------------------------------------------------------------------</span></span>
<span id="cb45-205"><a href="#cb45-205" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-206"><a href="#cb45-206" aria-hidden="true" tabindex="-1"></a>cleaned_sales_df <span class="sc">|&gt;</span></span>
<span id="cb45-207"><a href="#cb45-207" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_time_series</span>(</span>
<span id="cb45-208"><a href="#cb45-208" aria-hidden="true" tabindex="-1"></a>    <span class="at">.date_var =</span> date,</span>
<span id="cb45-209"><a href="#cb45-209" aria-hidden="true" tabindex="-1"></a>    <span class="at">.value    =</span> value,</span>
<span id="cb45-210"><a href="#cb45-210" aria-hidden="true" tabindex="-1"></a>    <span class="at">.title    =</span> <span class="st">"Product Y Sales Trend over Time (Anomalies Adjusted)"</span>,</span>
<span id="cb45-211"><a href="#cb45-211" aria-hidden="true" tabindex="-1"></a>    <span class="at">.y_lab =</span> <span class="st">"Sales in USD"</span></span>
<span id="cb45-212"><a href="#cb45-212" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb45-213"><a href="#cb45-213" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-214"><a href="#cb45-214" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb45-215"><a href="#cb45-215" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-216"><a href="#cb45-216" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------</span>
<span id="cb45-217"><a href="#cb45-217" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-218"><a href="#cb45-218" aria-hidden="true" tabindex="-1"></a><span class="fu">## Train–test splitting for time series</span></span>
<span id="cb45-219"><a href="#cb45-219" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-220"><a href="#cb45-220" aria-hidden="true" tabindex="-1"></a>Before training any forecasting models, we split the cleaned sales data into **training and testing sets using a temporal split**. Unlike random sampling, time series data must respect chronological order to avoid data leakage. In this setup, the model is trained on all historical observations up to a cutoff point and evaluated on the **most recent 12 months**, simulating a real-world forecasting scenario. The cumulative training window allows the model to learn from an expanding history over time, while the visualization of the cross-validation plan helps confirm that the split is both temporally sound and aligned with how forecasts will be used in practice.</span>
<span id="cb45-221"><a href="#cb45-221" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-224"><a href="#cb45-224" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb45-225"><a href="#cb45-225" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------------------------------------------------------------------</span></span>
<span id="cb45-226"><a href="#cb45-226" aria-hidden="true" tabindex="-1"></a><span class="co"># Train / test split (temporal holdout)</span></span>
<span id="cb45-227"><a href="#cb45-227" aria-hidden="true" tabindex="-1"></a><span class="co"># - We keep time order intact to avoid leakage.</span></span>
<span id="cb45-228"><a href="#cb45-228" aria-hidden="true" tabindex="-1"></a><span class="co"># - The last 12 months are held out for testing.</span></span>
<span id="cb45-229"><a href="#cb45-229" aria-hidden="true" tabindex="-1"></a><span class="co"># - cumulative = TRUE uses an expanding training window.</span></span>
<span id="cb45-230"><a href="#cb45-230" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------------------------------------------------------------------</span></span>
<span id="cb45-231"><a href="#cb45-231" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-232"><a href="#cb45-232" aria-hidden="true" tabindex="-1"></a>sales_split <span class="ot">&lt;-</span> cleaned_sales_df <span class="sc">|&gt;</span></span>
<span id="cb45-233"><a href="#cb45-233" aria-hidden="true" tabindex="-1"></a>  <span class="fu">time_series_split</span>(</span>
<span id="cb45-234"><a href="#cb45-234" aria-hidden="true" tabindex="-1"></a>    <span class="at">date_var    =</span> date,</span>
<span id="cb45-235"><a href="#cb45-235" aria-hidden="true" tabindex="-1"></a>    <span class="at">assess      =</span> <span class="st">"12 months"</span>,</span>
<span id="cb45-236"><a href="#cb45-236" aria-hidden="true" tabindex="-1"></a>    <span class="at">cumulative  =</span> <span class="cn">TRUE</span></span>
<span id="cb45-237"><a href="#cb45-237" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb45-238"><a href="#cb45-238" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-239"><a href="#cb45-239" aria-hidden="true" tabindex="-1"></a><span class="co"># View the split summary (prints the rsample split object)</span></span>
<span id="cb45-240"><a href="#cb45-240" aria-hidden="true" tabindex="-1"></a>sales_split</span>
<span id="cb45-241"><a href="#cb45-241" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-242"><a href="#cb45-242" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-243"><a href="#cb45-243" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------------------------------------------------------------------</span></span>
<span id="cb45-244"><a href="#cb45-244" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualize the split as a CV plan (train vs test over time)</span></span>
<span id="cb45-245"><a href="#cb45-245" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------------------------------------------------------------------</span></span>
<span id="cb45-246"><a href="#cb45-246" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-247"><a href="#cb45-247" aria-hidden="true" tabindex="-1"></a>sales_split <span class="sc">|&gt;</span></span>
<span id="cb45-248"><a href="#cb45-248" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tk_time_series_cv_plan</span>() <span class="sc">|&gt;</span></span>
<span id="cb45-249"><a href="#cb45-249" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_time_series_cv_plan</span>(</span>
<span id="cb45-250"><a href="#cb45-250" aria-hidden="true" tabindex="-1"></a>    <span class="at">.date_var =</span> date,</span>
<span id="cb45-251"><a href="#cb45-251" aria-hidden="true" tabindex="-1"></a>    <span class="at">.value    =</span> value,</span>
<span id="cb45-252"><a href="#cb45-252" aria-hidden="true" tabindex="-1"></a>    <span class="at">.y_lab    =</span> <span class="st">"Sales in USD"</span>,</span>
<span id="cb45-253"><a href="#cb45-253" aria-hidden="true" tabindex="-1"></a>    <span class="at">.title    =</span> <span class="st">"Train/Test Temporal Split (12-Month Holdout)"</span></span>
<span id="cb45-254"><a href="#cb45-254" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb45-255"><a href="#cb45-255" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-256"><a href="#cb45-256" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb45-257"><a href="#cb45-257" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-258"><a href="#cb45-258" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------</span>
<span id="cb45-259"><a href="#cb45-259" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-260"><a href="#cb45-260" aria-hidden="true" tabindex="-1"></a><span class="fu">## Feature engineering for time series modeling</span></span>
<span id="cb45-261"><a href="#cb45-261" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-262"><a href="#cb45-262" aria-hidden="true" tabindex="-1"></a>To enable machine learning models to learn from temporal patterns, we transform the raw date information into meaningful numerical features using a preprocessing recipe. The time series signature expands the date column into multiple components such as trend, seasonality, and calendar-based signals, which are then cleaned and standardized for modeling. Redundant and zero-variance features are removed to reduce noise, while categorical time features are one-hot encoded to ensure compatibility with most machine learning algorithms. This structured feature engineering step allows models to capture complex time-dependent behavior beyond what raw timestamps alone can provide.</span>
<span id="cb45-263"><a href="#cb45-263" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-266"><a href="#cb45-266" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb45-267"><a href="#cb45-267" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------------------------------------------------------------------</span></span>
<span id="cb45-268"><a href="#cb45-268" aria-hidden="true" tabindex="-1"></a><span class="co"># Feature engineering (tidymodels recipe)</span></span>
<span id="cb45-269"><a href="#cb45-269" aria-hidden="true" tabindex="-1"></a><span class="co"># - Convert the date into rich time-based features (trend + seasonality signals)</span></span>
<span id="cb45-270"><a href="#cb45-270" aria-hidden="true" tabindex="-1"></a><span class="co"># - Remove the original date column to avoid leakage / redundancy</span></span>
<span id="cb45-271"><a href="#cb45-271" aria-hidden="true" tabindex="-1"></a><span class="co"># - Normalize the numeric time index for ML models that benefit from scaling</span></span>
<span id="cb45-272"><a href="#cb45-272" aria-hidden="true" tabindex="-1"></a><span class="co"># - Drop zero-variance predictors (features that never change)</span></span>
<span id="cb45-273"><a href="#cb45-273" aria-hidden="true" tabindex="-1"></a><span class="co"># - One-hot encode categorical time features (month labels, weekdays, etc.)</span></span>
<span id="cb45-274"><a href="#cb45-274" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------------------------------------------------------------------</span></span>
<span id="cb45-275"><a href="#cb45-275" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-276"><a href="#cb45-276" aria-hidden="true" tabindex="-1"></a>sales_recipe <span class="ot">&lt;-</span> <span class="fu">recipe</span>(value <span class="sc">~</span> date, <span class="at">data =</span> <span class="fu">training</span>(sales_split)) <span class="sc">|&gt;</span></span>
<span id="cb45-277"><a href="#cb45-277" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_timeseries_signature</span>(date) <span class="sc">|&gt;</span></span>
<span id="cb45-278"><a href="#cb45-278" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_rm</span>(date) <span class="sc">|&gt;</span>                </span>
<span id="cb45-279"><a href="#cb45-279" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_normalize</span>(date_index.num) <span class="sc">|&gt;</span></span>
<span id="cb45-280"><a href="#cb45-280" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_zv</span>(<span class="fu">all_predictors</span>()) <span class="sc">|&gt;</span></span>
<span id="cb45-281"><a href="#cb45-281" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_dummy</span>(<span class="fu">all_nominal_predictors</span>(), <span class="at">one_hot =</span> <span class="cn">TRUE</span>)</span>
<span id="cb45-282"><a href="#cb45-282" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-283"><a href="#cb45-283" aria-hidden="true" tabindex="-1"></a><span class="co"># Inspect the recipe steps</span></span>
<span id="cb45-284"><a href="#cb45-284" aria-hidden="true" tabindex="-1"></a>sales_recipe</span>
<span id="cb45-285"><a href="#cb45-285" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb45-286"><a href="#cb45-286" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-287"><a href="#cb45-287" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------</span>
<span id="cb45-288"><a href="#cb45-288" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-289"><a href="#cb45-289" aria-hidden="true" tabindex="-1"></a><span class="fu">## Model Specification</span></span>
<span id="cb45-290"><a href="#cb45-290" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-291"><a href="#cb45-291" aria-hidden="true" tabindex="-1"></a>With our time-based features ready, the next step is to **define the models we want to try**. Instead of relying on a single configuration, we evaluate multiple **XGBoost** models by varying key hyperparameters such as **learning rate, tree depth, and regularization** strength.</span>
<span id="cb45-292"><a href="#cb45-292" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-293"><a href="#cb45-293" aria-hidden="true" tabindex="-1"></a>::: callout-note</span>
<span id="cb45-294"><a href="#cb45-294" aria-hidden="true" tabindex="-1"></a>XGBoost (Extreme Gradient Boosting) is a high-performance machine learning algorithm that builds powerful predictive models by combining many decision trees in a sequential, error-correcting manner. It is widely used for regression and classification tasks because it efficiently captures complex nonlinear patterns while offering strong accuracy, scalability, and regularization to prevent overfitting.</span>
<span id="cb45-295"><a href="#cb45-295" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb45-296"><a href="#cb45-296" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-299"><a href="#cb45-299" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb45-300"><a href="#cb45-300" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------------------------------------------------------------------</span></span>
<span id="cb45-301"><a href="#cb45-301" aria-hidden="true" tabindex="-1"></a><span class="co"># Model specification (XGBoost regression)</span></span>
<span id="cb45-302"><a href="#cb45-302" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------------------------------------------------------------------</span></span>
<span id="cb45-303"><a href="#cb45-303" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-304"><a href="#cb45-304" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-305"><a href="#cb45-305" aria-hidden="true" tabindex="-1"></a><span class="co"># Hyperparameter grid (learn_rate + depth + min_n + loss_reduction)</span></span>
<span id="cb45-306"><a href="#cb45-306" aria-hidden="true" tabindex="-1"></a>xgb_param_grid <span class="ot">&lt;-</span> tidyr<span class="sc">::</span><span class="fu">crossing</span>(</span>
<span id="cb45-307"><a href="#cb45-307" aria-hidden="true" tabindex="-1"></a>  <span class="at">learn_rate     =</span> <span class="fu">c</span>(<span class="fl">0.001</span>, <span class="fl">0.01</span>, <span class="fl">0.1</span>, <span class="fl">0.2</span>, <span class="fl">0.35</span>),</span>
<span id="cb45-308"><a href="#cb45-308" aria-hidden="true" tabindex="-1"></a>  <span class="at">tree_depth     =</span> <span class="fu">c</span>(<span class="dv">2</span>L, <span class="dv">4</span>L, <span class="dv">6</span>L, <span class="dv">8</span>L),</span>
<span id="cb45-309"><a href="#cb45-309" aria-hidden="true" tabindex="-1"></a>  <span class="at">min_n          =</span> <span class="fu">c</span>(<span class="dv">2</span>L, <span class="dv">5</span>L, <span class="dv">10</span>L, <span class="dv">20</span>L),</span>
<span id="cb45-310"><a href="#cb45-310" aria-hidden="true" tabindex="-1"></a>  <span class="at">loss_reduction =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.01</span>, <span class="fl">0.1</span>, <span class="dv">1</span>)</span>
<span id="cb45-311"><a href="#cb45-311" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb45-312"><a href="#cb45-312" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-313"><a href="#cb45-313" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------------------------------------------------------------------</span></span>
<span id="cb45-314"><a href="#cb45-314" aria-hidden="true" tabindex="-1"></a><span class="co"># Create model specifications for each hyperparameter combination</span></span>
<span id="cb45-315"><a href="#cb45-315" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------------------------------------------------------------------</span></span>
<span id="cb45-316"><a href="#cb45-316" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-317"><a href="#cb45-317" aria-hidden="true" tabindex="-1"></a>xgb_spec_tbl <span class="ot">&lt;-</span> <span class="fu">create_model_grid</span>(</span>
<span id="cb45-318"><a href="#cb45-318" aria-hidden="true" tabindex="-1"></a>  <span class="at">grid         =</span> xgb_param_grid,</span>
<span id="cb45-319"><a href="#cb45-319" aria-hidden="true" tabindex="-1"></a>  <span class="at">f_model_spec =</span> boost_tree,</span>
<span id="cb45-320"><a href="#cb45-320" aria-hidden="true" tabindex="-1"></a>  <span class="at">engine_name  =</span> <span class="st">"xgboost"</span>,</span>
<span id="cb45-321"><a href="#cb45-321" aria-hidden="true" tabindex="-1"></a>  <span class="at">mode         =</span> <span class="st">"regression"</span></span>
<span id="cb45-322"><a href="#cb45-322" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb45-323"><a href="#cb45-323" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-324"><a href="#cb45-324" aria-hidden="true" tabindex="-1"></a><span class="co"># Review the model specification table (includes parameters + model objects)</span></span>
<span id="cb45-325"><a href="#cb45-325" aria-hidden="true" tabindex="-1"></a>xgb_spec_tbl</span>
<span id="cb45-326"><a href="#cb45-326" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-327"><a href="#cb45-327" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract the list of parsnip model specifications (useful for workflowsets)</span></span>
<span id="cb45-328"><a href="#cb45-328" aria-hidden="true" tabindex="-1"></a>xgb_model_list <span class="ot">&lt;-</span> xgb_spec_tbl<span class="sc">$</span>.models</span>
<span id="cb45-329"><a href="#cb45-329" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-330"><a href="#cb45-330" aria-hidden="true" tabindex="-1"></a><span class="co"># Preview first 2 specs</span></span>
<span id="cb45-331"><a href="#cb45-331" aria-hidden="true" tabindex="-1"></a>xgb_model_list[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>]</span>
<span id="cb45-332"><a href="#cb45-332" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb45-333"><a href="#cb45-333" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-334"><a href="#cb45-334" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------</span>
<span id="cb45-335"><a href="#cb45-335" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-336"><a href="#cb45-336" aria-hidden="true" tabindex="-1"></a><span class="fu">## Workflow sets</span></span>
<span id="cb45-337"><a href="#cb45-337" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-338"><a href="#cb45-338" aria-hidden="true" tabindex="-1"></a>Workflow sets allow us to systematically **combine preprocessing recipes and model specifications into comparable modeling pipelines**. In this case, we pair a single time-series recipe with multiple XGBoost configurations, creating a collection of untrained workflows that can be fit and evaluated consistently.</span>
<span id="cb45-339"><a href="#cb45-339" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-342"><a href="#cb45-342" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb45-343"><a href="#cb45-343" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------------------------------------------------------------------</span></span>
<span id="cb45-344"><a href="#cb45-344" aria-hidden="true" tabindex="-1"></a><span class="co"># Workflow sets</span></span>
<span id="cb45-345"><a href="#cb45-345" aria-hidden="true" tabindex="-1"></a><span class="co"># - Combine the preprocessing recipe with multiple XGBoost model specifications</span></span>
<span id="cb45-346"><a href="#cb45-346" aria-hidden="true" tabindex="-1"></a><span class="co"># - Each workflow represents one unique recipe–model combination</span></span>
<span id="cb45-347"><a href="#cb45-347" aria-hidden="true" tabindex="-1"></a><span class="co"># - Workflows are created unfitted and will be trained during evaluation</span></span>
<span id="cb45-348"><a href="#cb45-348" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------------------------------------------------------------------</span></span>
<span id="cb45-349"><a href="#cb45-349" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-350"><a href="#cb45-350" aria-hidden="true" tabindex="-1"></a>sales_workflow_set <span class="ot">&lt;-</span> <span class="fu">workflow_set</span>(</span>
<span id="cb45-351"><a href="#cb45-351" aria-hidden="true" tabindex="-1"></a>  <span class="at">preproc =</span> <span class="fu">list</span>(<span class="at">sales_recipe =</span> sales_recipe),</span>
<span id="cb45-352"><a href="#cb45-352" aria-hidden="true" tabindex="-1"></a>  <span class="at">models  =</span> xgb_model_list,</span>
<span id="cb45-353"><a href="#cb45-353" aria-hidden="true" tabindex="-1"></a>  <span class="at">cross   =</span> <span class="cn">TRUE</span></span>
<span id="cb45-354"><a href="#cb45-354" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb45-355"><a href="#cb45-355" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-356"><a href="#cb45-356" aria-hidden="true" tabindex="-1"></a><span class="co"># Inspect the workflow set</span></span>
<span id="cb45-357"><a href="#cb45-357" aria-hidden="true" tabindex="-1"></a>sales_workflow_set</span>
<span id="cb45-358"><a href="#cb45-358" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-359"><a href="#cb45-359" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb45-360"><a href="#cb45-360" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-361"><a href="#cb45-361" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------</span>
<span id="cb45-362"><a href="#cb45-362" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-363"><a href="#cb45-363" aria-hidden="true" tabindex="-1"></a><span class="fu">## Fitting Using Parallel Backend</span></span>
<span id="cb45-364"><a href="#cb45-364" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-365"><a href="#cb45-365" aria-hidden="true" tabindex="-1"></a>We will now train all recipe–model combinations by fitting the workflow set on the training portion of the time series. By enabling parallel execution, each workflow is trained concurrently across multiple CPU cores, significantly reducing total runtime while providing clear progress feedback during the fitting process.</span>
<span id="cb45-366"><a href="#cb45-366" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-369"><a href="#cb45-369" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb45-370"><a href="#cb45-370" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------------------------------------------------------------------</span></span>
<span id="cb45-371"><a href="#cb45-371" aria-hidden="true" tabindex="-1"></a><span class="co"># Parallel model training (workflow set fitting)</span></span>
<span id="cb45-372"><a href="#cb45-372" aria-hidden="true" tabindex="-1"></a><span class="co"># - Fit all workflows on the training data</span></span>
<span id="cb45-373"><a href="#cb45-373" aria-hidden="true" tabindex="-1"></a><span class="co"># - Enable parallel processing to speed up computation</span></span>
<span id="cb45-374"><a href="#cb45-374" aria-hidden="true" tabindex="-1"></a><span class="co"># - Verbose output shows progress for each workflow</span></span>
<span id="cb45-375"><a href="#cb45-375" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------------------------------------------------------------------</span></span>
<span id="cb45-376"><a href="#cb45-376" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-377"><a href="#cb45-377" aria-hidden="true" tabindex="-1"></a>fitted_models_tbl <span class="ot">&lt;-</span> sales_workflow_set <span class="sc">|&gt;</span></span>
<span id="cb45-378"><a href="#cb45-378" aria-hidden="true" tabindex="-1"></a>  <span class="fu">modeltime_fit_workflowset</span>(</span>
<span id="cb45-379"><a href="#cb45-379" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> <span class="fu">training</span>(sales_split),</span>
<span id="cb45-380"><a href="#cb45-380" aria-hidden="true" tabindex="-1"></a>    <span class="at">control =</span> <span class="fu">control_fit_workflowset</span>(</span>
<span id="cb45-381"><a href="#cb45-381" aria-hidden="true" tabindex="-1"></a>      <span class="at">verbose   =</span> <span class="cn">TRUE</span>,  <span class="co"># Display progress during fitting</span></span>
<span id="cb45-382"><a href="#cb45-382" aria-hidden="true" tabindex="-1"></a>      <span class="at">allow_par =</span> <span class="cn">TRUE</span>   <span class="co"># Use the active parallel backend</span></span>
<span id="cb45-383"><a href="#cb45-383" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb45-384"><a href="#cb45-384" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb45-385"><a href="#cb45-385" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-386"><a href="#cb45-386" aria-hidden="true" tabindex="-1"></a><span class="co"># Inspect fitted workflows</span></span>
<span id="cb45-387"><a href="#cb45-387" aria-hidden="true" tabindex="-1"></a>fitted_models_tbl</span>
<span id="cb45-388"><a href="#cb45-388" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb45-389"><a href="#cb45-389" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-390"><a href="#cb45-390" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------</span>
<span id="cb45-391"><a href="#cb45-391" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-392"><a href="#cb45-392" aria-hidden="true" tabindex="-1"></a><span class="fu">## Accuracy assessment</span></span>
<span id="cb45-393"><a href="#cb45-393" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-394"><a href="#cb45-394" aria-hidden="true" tabindex="-1"></a>After fitting the models, we evaluate their out-of-sample performance by calibrating each workflow on the test set and computing standard forecast accuracy metrics. Comparing these results allows us to identify the best-performing configuration, with **Model 277 achieving the lowest Mean Absolute Error (MAE)** and therefore providing the most accurate forecasts on unseen data.</span>
<span id="cb45-395"><a href="#cb45-395" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-396"><a href="#cb45-396" aria-hidden="true" tabindex="-1"></a><span class="in">```{r message=FALSE, warning=FALSE}</span></span>
<span id="cb45-397"><a href="#cb45-397" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------------------------------------------------------------------</span></span>
<span id="cb45-398"><a href="#cb45-398" aria-hidden="true" tabindex="-1"></a><span class="co"># Model evaluation and accuracy comparison</span></span>
<span id="cb45-399"><a href="#cb45-399" aria-hidden="true" tabindex="-1"></a><span class="co"># - Calibrate fitted models on the test set</span></span>
<span id="cb45-400"><a href="#cb45-400" aria-hidden="true" tabindex="-1"></a><span class="co"># - Compute standard forecast accuracy metrics</span></span>
<span id="cb45-401"><a href="#cb45-401" aria-hidden="true" tabindex="-1"></a><span class="co"># - Rank models to identify the best performer</span></span>
<span id="cb45-402"><a href="#cb45-402" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------------------------------------------------------------------</span></span>
<span id="cb45-403"><a href="#cb45-403" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-404"><a href="#cb45-404" aria-hidden="true" tabindex="-1"></a>calibration_tbl <span class="ot">&lt;-</span> fitted_models_tbl <span class="sc">|&gt;</span></span>
<span id="cb45-405"><a href="#cb45-405" aria-hidden="true" tabindex="-1"></a>  <span class="fu">modeltime_calibrate</span>(<span class="at">new_data =</span> <span class="fu">testing</span>(sales_split))</span>
<span id="cb45-406"><a href="#cb45-406" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-407"><a href="#cb45-407" aria-hidden="true" tabindex="-1"></a>model_accuracy_tbl <span class="ot">&lt;-</span> calibration_tbl <span class="sc">|&gt;</span></span>
<span id="cb45-408"><a href="#cb45-408" aria-hidden="true" tabindex="-1"></a>  <span class="fu">modeltime_accuracy</span>() <span class="sc">|&gt;</span></span>
<span id="cb45-409"><a href="#cb45-409" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(mae) <span class="sc">|&gt;</span> </span>
<span id="cb45-410"><a href="#cb45-410" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_min</span>(mae, <span class="at">n =</span><span class="dv">10</span>)</span>
<span id="cb45-411"><a href="#cb45-411" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-412"><a href="#cb45-412" aria-hidden="true" tabindex="-1"></a><span class="co"># Display accuracy results in a readable table</span></span>
<span id="cb45-413"><a href="#cb45-413" aria-hidden="true" tabindex="-1"></a><span class="fu">table_modeltime_accuracy</span>(</span>
<span id="cb45-414"><a href="#cb45-414" aria-hidden="true" tabindex="-1"></a>  model_accuracy_tbl,</span>
<span id="cb45-415"><a href="#cb45-415" aria-hidden="true" tabindex="-1"></a>  <span class="at">.interactive =</span> <span class="cn">FALSE</span></span>
<span id="cb45-416"><a href="#cb45-416" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb45-417"><a href="#cb45-417" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-418"><a href="#cb45-418" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb45-419"><a href="#cb45-419" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-420"><a href="#cb45-420" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------</span>
<span id="cb45-421"><a href="#cb45-421" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-422"><a href="#cb45-422" aria-hidden="true" tabindex="-1"></a><span class="fu">## Forecast Assessment</span></span>
<span id="cb45-423"><a href="#cb45-423" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-424"><a href="#cb45-424" aria-hidden="true" tabindex="-1"></a>To complement the numerical accuracy metrics, we visually assess how each model’s forecasts compare against the actual sales during the testing period. This side-by-side visualization helps reveal differences in trend capture, responsiveness to changes, and overall forecast stability that may not be fully apparent from error metrics alone.</span>
<span id="cb45-425"><a href="#cb45-425" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-426"><a href="#cb45-426" aria-hidden="true" tabindex="-1"></a><span class="in">```{r warning=FALSE}</span></span>
<span id="cb45-427"><a href="#cb45-427" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------------------------------------------------------------------</span></span>
<span id="cb45-428"><a href="#cb45-428" aria-hidden="true" tabindex="-1"></a><span class="co"># Forecast assessment (visual comparison on test set)</span></span>
<span id="cb45-429"><a href="#cb45-429" aria-hidden="true" tabindex="-1"></a><span class="co"># - Generate forecasts for each fitted model on the test period</span></span>
<span id="cb45-430"><a href="#cb45-430" aria-hidden="true" tabindex="-1"></a><span class="co"># - Overlay predictions with actual historical sales</span></span>
<span id="cb45-431"><a href="#cb45-431" aria-hidden="true" tabindex="-1"></a><span class="co"># - Retain underlying data for further inspection if needed</span></span>
<span id="cb45-432"><a href="#cb45-432" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------------------------------------------------------------------</span></span>
<span id="cb45-433"><a href="#cb45-433" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-434"><a href="#cb45-434" aria-hidden="true" tabindex="-1"></a>forecast_comparison_tbl <span class="ot">&lt;-</span> calibration_tbl <span class="sc">|&gt;</span></span>
<span id="cb45-435"><a href="#cb45-435" aria-hidden="true" tabindex="-1"></a>  <span class="co"># filter for the 10 best models </span></span>
<span id="cb45-436"><a href="#cb45-436" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(.model_id <span class="sc">%in%</span> model_accuracy_tbl<span class="sc">$</span>.model_id) <span class="sc">|&gt;</span> </span>
<span id="cb45-437"><a href="#cb45-437" aria-hidden="true" tabindex="-1"></a>  <span class="fu">modeltime_forecast</span>(</span>
<span id="cb45-438"><a href="#cb45-438" aria-hidden="true" tabindex="-1"></a>    <span class="at">new_data    =</span> <span class="fu">testing</span>(sales_split),</span>
<span id="cb45-439"><a href="#cb45-439" aria-hidden="true" tabindex="-1"></a>    <span class="at">actual_data =</span> cleaned_sales_df,</span>
<span id="cb45-440"><a href="#cb45-440" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_data   =</span> <span class="cn">TRUE</span></span>
<span id="cb45-441"><a href="#cb45-441" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb45-442"><a href="#cb45-442" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-443"><a href="#cb45-443" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot forecasts vs actuals for visual evaluation</span></span>
<span id="cb45-444"><a href="#cb45-444" aria-hidden="true" tabindex="-1"></a>forecast_comparison_tbl <span class="sc">|&gt;</span></span>
<span id="cb45-445"><a href="#cb45-445" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_modeltime_forecast</span>(</span>
<span id="cb45-446"><a href="#cb45-446" aria-hidden="true" tabindex="-1"></a>    <span class="at">.legend_max_width =</span> <span class="dv">10</span>, <span class="co"># For mobile screens</span></span>
<span id="cb45-447"><a href="#cb45-447" aria-hidden="true" tabindex="-1"></a>    <span class="at">.conf_interval_show =</span> <span class="cn">FALSE</span>,</span>
<span id="cb45-448"><a href="#cb45-448" aria-hidden="true" tabindex="-1"></a>    <span class="at">.title =</span> <span class="st">"Model Forecasts vs Actual Sales (Test Set)"</span></span>
<span id="cb45-449"><a href="#cb45-449" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb45-450"><a href="#cb45-450" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb45-451"><a href="#cb45-451" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-452"><a href="#cb45-452" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------</span>
<span id="cb45-453"><a href="#cb45-453" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-454"><a href="#cb45-454" aria-hidden="true" tabindex="-1"></a><span class="fu">## Refit to Full Dataset &amp; Forecast Forward</span></span>
<span id="cb45-455"><a href="#cb45-455" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-456"><a href="#cb45-456" aria-hidden="true" tabindex="-1"></a>After ranking models on the test set, we select the top performer (lowest MAE) and then **refit it using the full cleaned dataset** so it can learn from all available history. Finally, we generate a **24-month ahead forecast** and plot it alongside the historical sales to visualize the expected future trajectory.</span>
<span id="cb45-457"><a href="#cb45-457" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-460"><a href="#cb45-460" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb45-461"><a href="#cb45-461" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------------------------------------------------------------------</span></span>
<span id="cb45-462"><a href="#cb45-462" aria-hidden="true" tabindex="-1"></a><span class="co"># Select the best model (lowest MAE)</span></span>
<span id="cb45-463"><a href="#cb45-463" aria-hidden="true" tabindex="-1"></a><span class="co"># - slice_min() can return ties, so we break ties deterministically with_mae then</span></span>
<span id="cb45-464"><a href="#cb45-464" aria-hidden="true" tabindex="-1"></a><span class="co">#   take the first row.</span></span>
<span id="cb45-465"><a href="#cb45-465" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------------------------------------------------------------------</span></span>
<span id="cb45-466"><a href="#cb45-466" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-467"><a href="#cb45-467" aria-hidden="true" tabindex="-1"></a>best_model_id <span class="ot">&lt;-</span> model_accuracy_tbl <span class="sc">|&gt;</span></span>
<span id="cb45-468"><a href="#cb45-468" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(mae, .model_id) <span class="sc">|&gt;</span></span>
<span id="cb45-469"><a href="#cb45-469" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">1</span>) <span class="sc">|&gt;</span></span>
<span id="cb45-470"><a href="#cb45-470" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(.model_id)</span>
<span id="cb45-471"><a href="#cb45-471" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-472"><a href="#cb45-472" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------------------------------------------------------------------</span></span>
<span id="cb45-473"><a href="#cb45-473" aria-hidden="true" tabindex="-1"></a><span class="co"># Refit the winning model on the full dataset</span></span>
<span id="cb45-474"><a href="#cb45-474" aria-hidden="true" tabindex="-1"></a><span class="co"># - Re-training on all history improves the final model before forecasting</span></span>
<span id="cb45-475"><a href="#cb45-475" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------------------------------------------------------------------</span></span>
<span id="cb45-476"><a href="#cb45-476" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-477"><a href="#cb45-477" aria-hidden="true" tabindex="-1"></a>final_xgb_tbl <span class="ot">&lt;-</span> calibration_tbl <span class="sc">|&gt;</span></span>
<span id="cb45-478"><a href="#cb45-478" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(.model_id <span class="sc">==</span> best_model_id) <span class="sc">|&gt;</span></span>
<span id="cb45-479"><a href="#cb45-479" aria-hidden="true" tabindex="-1"></a>  <span class="fu">modeltime_refit</span>(<span class="at">data =</span> cleaned_sales_df)</span>
<span id="cb45-480"><a href="#cb45-480" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-481"><a href="#cb45-481" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------------------------------------------------------------------</span></span>
<span id="cb45-482"><a href="#cb45-482" aria-hidden="true" tabindex="-1"></a><span class="co"># Forecast the next 24 months and visualize</span></span>
<span id="cb45-483"><a href="#cb45-483" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------------------------------------------------------------------</span></span>
<span id="cb45-484"><a href="#cb45-484" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-485"><a href="#cb45-485" aria-hidden="true" tabindex="-1"></a>future_forecast_tbl <span class="ot">&lt;-</span> final_xgb_tbl <span class="sc">|&gt;</span></span>
<span id="cb45-486"><a href="#cb45-486" aria-hidden="true" tabindex="-1"></a>  <span class="fu">modeltime_forecast</span>(</span>
<span id="cb45-487"><a href="#cb45-487" aria-hidden="true" tabindex="-1"></a>    <span class="at">h =</span> <span class="st">"24 months"</span>,</span>
<span id="cb45-488"><a href="#cb45-488" aria-hidden="true" tabindex="-1"></a>    <span class="at">actual_data =</span> cleaned_sales_df</span>
<span id="cb45-489"><a href="#cb45-489" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb45-490"><a href="#cb45-490" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-491"><a href="#cb45-491" aria-hidden="true" tabindex="-1"></a>future_forecast_tbl <span class="sc">|&gt;</span></span>
<span id="cb45-492"><a href="#cb45-492" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_modeltime_forecast</span>(</span>
<span id="cb45-493"><a href="#cb45-493" aria-hidden="true" tabindex="-1"></a>    <span class="at">.legend_show =</span> <span class="cn">FALSE</span>,</span>
<span id="cb45-494"><a href="#cb45-494" aria-hidden="true" tabindex="-1"></a>    <span class="at">.title =</span> <span class="st">"Final XGBoost Sales Forecast for Product Y (24-Month Horizon)"</span>,</span>
<span id="cb45-495"><a href="#cb45-495" aria-hidden="true" tabindex="-1"></a>    <span class="at">.y_lab =</span> <span class="st">"Sales in USD"</span></span>
<span id="cb45-496"><a href="#cb45-496" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb45-497"><a href="#cb45-497" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-498"><a href="#cb45-498" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-499"><a href="#cb45-499" aria-hidden="true" tabindex="-1"></a><span class="co"># Forecasts dataset</span></span>
<span id="cb45-500"><a href="#cb45-500" aria-hidden="true" tabindex="-1"></a>future_forecast_tbl <span class="sc">|&gt;</span> </span>
<span id="cb45-501"><a href="#cb45-501" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(.key <span class="sc">==</span> <span class="st">"prediction"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb45-502"><a href="#cb45-502" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(</span>
<span id="cb45-503"><a href="#cb45-503" aria-hidden="true" tabindex="-1"></a>    <span class="at">date =</span> .index, </span>
<span id="cb45-504"><a href="#cb45-504" aria-hidden="true" tabindex="-1"></a>    <span class="at">lower_limit =</span> .conf_lo,</span>
<span id="cb45-505"><a href="#cb45-505" aria-hidden="true" tabindex="-1"></a>    <span class="at">point_estimate =</span> .value,</span>
<span id="cb45-506"><a href="#cb45-506" aria-hidden="true" tabindex="-1"></a>    <span class="at">upper_limit =</span> .conf_hi</span>
<span id="cb45-507"><a href="#cb45-507" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb45-508"><a href="#cb45-508" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb45-509"><a href="#cb45-509" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-512"><a href="#cb45-512" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb45-513"><a href="#cb45-513" aria-hidden="true" tabindex="-1"></a><span class="fu">parallel_stop</span>()</span>
<span id="cb45-514"><a href="#cb45-514" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb45-515"><a href="#cb45-515" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-516"><a href="#cb45-516" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------</span>
<span id="cb45-517"><a href="#cb45-517" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-518"><a href="#cb45-518" aria-hidden="true" tabindex="-1"></a><span class="fu">## Conclusion</span></span>
<span id="cb45-519"><a href="#cb45-519" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-520"><a href="#cb45-520" aria-hidden="true" tabindex="-1"></a>In this post, we walked through an end-to-end machine learning workflow for sales forecasting in R, starting from data exploration and anomaly detection, through feature engineering, model specification, parallel training, evaluation, and finally producing a forward-looking forecast using XGBoost. This approach offers clear benefits: it leverages rich time-based features, uses a robust validation strategy, and produces forecasts that are both data-driven and reproducible. At the same time, it’s important to recognize the limitations, machine learning models like XGBoost can be sensitive to hyperparameter choices, require careful feature engineering, and may not always generalize best across all datasets or business contexts.</span>
<span id="cb45-521"><a href="#cb45-521" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-522"><a href="#cb45-522" aria-hidden="true" tabindex="-1"></a>For Metricon, these forecasts can directly inform decisions such as inventory planning, budgeting, production scheduling, and scenario analysis by providing a clearer view of expected future demand. However, no single model is universally optimal. In the next post, we’ll broaden the analysis by training and comparing multiple forecasting algorithms on the same sales data to assess whether alternative models can outperform XGBoost and under what conditions, bringing us closer to a truly model-agnostic, decision-ready forecasting strategy.</span>
<span id="cb45-523"><a href="#cb45-523" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-524"><a href="#cb45-524" aria-hidden="true" tabindex="-1"></a>***Written by***</span>
<span id="cb45-525"><a href="#cb45-525" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-526"><a href="#cb45-526" aria-hidden="true" tabindex="-1"></a><span class="co">[</span><span class="ot">**George Mwangi**</span><span class="co">](https://github.com/mwangi-george)</span> is a software engineer and data professional specializing in machine learning, data analytics, and digital health systems design &amp; development. His work focuses on building practical, production-ready solutions for forecasting, decision support, and data-driven planning. He is particularly interested in applying modern data science tools to solve real-world business and public health sector problems.</span>
<span id="cb45-527"><a href="#cb45-527" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-528"><a href="#cb45-528" aria-hidden="true" tabindex="-1"></a><span class="co">[</span><span class="al">![](img/author.jpeg)</span><span class="ot">{width="200"}</span><span class="co">](https://www.linkedin.com/in/georgemwangikenya/)</span></span>
<span id="cb45-529"><a href="#cb45-529" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-530"><a href="#cb45-530" aria-hidden="true" tabindex="-1"></a>*You can connect with George on:*</span>
<span id="cb45-531"><a href="#cb45-531" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-532"><a href="#cb45-532" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>LinkedIn: <span class="co">[</span><span class="ot">https://www.linkedin.com/in/georgemwangikenya</span><span class="co">](https://www.linkedin.com/in/georgemwangikenya/)</span></span>
<span id="cb45-533"><a href="#cb45-533" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-534"><a href="#cb45-534" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>GitHub: <span class="ot">&lt;https://github.com/mwangi-george&gt;</span></span>
<span id="cb45-535"><a href="#cb45-535" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-536"><a href="#cb45-536" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------</span>
<span id="cb45-537"><a href="#cb45-537" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-538"><a href="#cb45-538" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">button</span><span class="ot"> class</span><span class="op">=</span><span class="st">"accordion-button"</span><span class="ot"> type</span><span class="op">=</span><span class="st">"button"</span><span class="ot"> data-bs-toggle</span><span class="op">=</span><span class="st">"collapse"</span><span class="ot"> data-bs-target</span><span class="op">=</span><span class="st">"#collapseOne"</span><span class="dt">&gt;</span></span>
<span id="cb45-539"><a href="#cb45-539" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-540"><a href="#cb45-540" aria-hidden="true" tabindex="-1"></a>Session Information</span>
<span id="cb45-541"><a href="#cb45-541" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-542"><a href="#cb45-542" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">button</span><span class="dt">&gt;</span></span>
<span id="cb45-543"><a href="#cb45-543" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-544"><a href="#cb45-544" aria-hidden="true" tabindex="-1"></a>:::: {#collapseOne .accordion-collapse .collapse}</span>
<span id="cb45-545"><a href="#cb45-545" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">div</span><span class="dt">&gt;</span></span>
<span id="cb45-546"><a href="#cb45-546" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-549"><a href="#cb45-549" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb45-550"><a href="#cb45-550" aria-hidden="true" tabindex="-1"></a><span class="fu">sessionInfo</span>()</span>
<span id="cb45-551"><a href="#cb45-551" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb45-552"><a href="#cb45-552" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-553"><a href="#cb45-553" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">div</span><span class="dt">&gt;</span></span>
<span id="cb45-554"><a href="#cb45-554" aria-hidden="true" tabindex="-1"></a>::::</span>
</code><button title="Copy to Clipboard" class="code-copy-button" data-in-quarto-modal=""><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->




<script src="../../site_libs/quarto-html/zenscroll-min.js"></script>
</body></html>